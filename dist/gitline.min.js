function indexToX(t){return 20*t+12}var AsyncLoadingItem=function(){function t(t,e,n,i,o){this.label=t,this.data=e,this.callback=n,this.index=i,this.of=o}return t}(),AsyncLoader=function(){function t(t){this.items=[],this.suspended=!1,this.element=t}return t.prototype.then=function(t,e,n){var i=this;return this.thenSingle(t,function(){for(var o=e(),a=o.length-1;a>=0;a--)i.items.unshift(new AsyncLoadingItem(t,o[a],n,a,o.length))}),this},t.prototype.thenSingle=function(t,e){return this.items.push(new AsyncLoadingItem(t,null,e,0,1)),this},t.prototype.start=function(t){void 0===t&&(t=!0),t&&(this.element.hidden=!1),this.next()},t.prototype.next=function(){var t=this,e=this.items.shift();void 0!==e?e.index%50===0?(this.showStatus(e),window.setTimeout(function(){Logger.debug("executing "+e.label+" ("+e.index+"/"+e.of+")"),t.execute(e)},0)):this.execute(e):this.element.hidden=!0},t.prototype.suspend=function(){this.suspended=!0},t.prototype.resume=function(){this.suspended=!1,this.next()},t.prototype.showStatus=function(t){this.element.innerHTML=t.label},t.prototype.execute=function(t){t.callback(t.data),this.suspended||this.next()},t}(),GitlineConfig=function(){function t(){this.dotHeight=6,this.dotWidth=8,this.remoteOnly=!1,this.avatars=[this.avatar_gravatar]}return t.prototype.avatar_gravatar=function(t){return"http://www.gravatar.com/avatar/"+CryptoJS.MD5(t.toLowerCase())+"?s=16&d=404"},t}(),Expandable=function(){function t(){}return t.extend=function(t){var e=t;return t.classList.add("gitline-expandable"),e.whenFull=function(n){e.onclick=function(i){2==i.detail&&(e.innerHTML=n,i.cancelBubble=!0,t.classList.add("gitline-expandable-expanded"))}},e.whenShort=function(n){e.innerHTML=n,e.onmouseout=function(i){e.innerHTML=n+" ",t.classList.remove("gitline-expandable-expanded")}},e},t}(),CommitProvider=function(){function t(t){this.url=t}return t.prototype.whenDone=function(t){this.callback(t)},t.prototype.withCallback=function(t){this.callback=t},t.prototype.onRequested=function(t){throw new Error("onRequested not implemented on "+this)},t.prototype.request=function(){this.onRequested(this.url)},t}(),__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},LocalGit2JsonProvider=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.onRequested=function(t){var e=this;jQuery.getJSON(t,{},function(t){e.whenDone(t)}).error(function(){Gitline.displayFatalError("Error loading git data from "+t+" create it using git2json")})},e}(CommitProvider),GithubCommitProvider=function(t){function e(){t.apply(this,arguments),this.forks=[],this.baseBranches=[],this.data={},this.done=!1}return __extends(e,t),e.prototype.obtainAccessToken=function(t){window.localStorage&&(this.accessToken=window.localStorage.getItem("github-accesstoken"),this.limit=500),null==this.accessToken?(window.alert("No access token to github defined. see log"),Logger.debug('window.localStorage.setItem("github-accesstoken", "TOKEN")')):t()},e.prototype.gitURL=function(t,e,n){return void 0===n&&(n=""),-1==t.indexOf("api.github.com")&&(t=t.replace(/.*github.com/,"https://api.github.com/repos/").replace(/\/\//g,"/")),t+"/"+e+"?access_token="+this.accessToken+"&per_page="+this.limit+"&callback=?&"+n},e.prototype.onRequested=function(t){var e=this;this.obtainAccessToken(function(){e.loadForks(t)})},e.prototype.loadForks=function(t){var e=this;jQuery.when(jQuery.getJSON(this.gitURL(t,"forks")),jQuery.getJSON(this.gitURL(t,"branches"))).then(function(n,i){e.processBranches(t,i[0].data),e.forks=n[0].data,e.loadBranches()})},e.prototype.processBranches=function(t,e){var n=this;e.forEach(function(e){e.repo=void 0!==t.url?t.url:t,void 0!==t.full_name&&(e.name=e.name+"@"+t.full_name),n.baseBranches.push(e)})},e.prototype.loadBranches=function(){var t=this,e=this.forks.map(function(e){return jQuery.getJSON(t.gitURL(e.url,"branches"),function(n){Logger.debug("loaded branches for "+e.name),t.processBranches(e,n.data)})});jQuery.when.apply(jQuery,e).done(function(){Logger.debug("all branches loaded"),t.loadCommits()})},e.prototype.loadCommits=function(){var t=this,e=[];this.baseBranches.forEach(function(n){var i=t.data[n.commit.sha];void 0==i&&e.push(jQuery.getJSON(t.gitURL(n.repo,"commits","sha="+n.commit.sha),function(e){Logger.debug("loaded commits for "+n.name),t.processCommits(e.data)}))}),jQuery.when.apply(jQuery,e).done(function(){t.process()})},e.prototype.processCommits=function(t){var e=this;t.map(function(t){var e={};return e.sha=t.sha,e.ssha=t.sha.substring(0,8),e.parenthashes=t.parents.map(function(t){return t.sha}),e.authorname=t.commit.author.name,e.authoremail=t.commit.author.email,e.authordate=t.commit.author.date,e.authortimestamp=new Date(t.commit.author.date).getTime(),e.committername=t.commit.committer.name,e.committeremail=t.commit.committer.email,e.committerdate=t.commit.committer.date,e.committertimestamp=new Date(t.commit.committer.date).getTime(),e.subject=t.commit.message,e.body="",e.refnames=[],e.inHeads=[],e}).forEach(function(t){e.data[t.sha]=t})},e.prototype.process=function(){var t=this;this.baseBranches.forEach(function(e){var n=t.data[e.commit.sha];void 0==n||(e.assigned=!0,n.refnames.push(e.name),t.assignHeads(n))});var e={};Object.keys(this.data).sort(function(e,n){return t.data[n].committertimestamp-t.data[e].committertimestamp}).forEach(function(n){e[n]=t.data[n]}),this.whenDone(e)},e.prototype.assignHeads=function(t){var e=this;for(t.parents1=t.parenthashes.map(function(t){return t});t.parents1.length>0;){var n=[];t.parents1.forEach(function(i){var o=e.data[i];void 0!=o&&(o.inHeads.push(t.sha),o.parenthashes.forEach(function(t){-1===n.indexOf(t)&&n.push(t)}))}),t.parents1=n}},e}(CommitProvider),Gitline=function(){function t(){this.self=this,this.maxX=0,this.maxIndexY=0,this.commits={},this.headsMap={},this.config=new GitlineConfig}return t.prototype.addCommit=function(t){this.commits[t.getFullSha()]=t,void 0===this.firstCommit&&(this.firstCommit=t)},t.prototype.addBranch=function(t,e,n){var i=new Branch(t,e,n);this.headsMap[t]=i},t.prototype.render=function(){var t=this;this.canvas=new jsgl.Panel(this.graphicalPanel),this.al.thenSingle("Loading Data",function(){t.al.suspend(),t.commitProvider.withCallback(function(e){t.data=e,t.al.resume()}),t.commitProvider.request()}).then("Loading Commits",function(){return Object.keys(t.data)},function(e){var n=new Commit(t,t.data[e]);t.addCommit(n)}).thenSingle("Building Graph",function(){t.buildGraph()}).then("Drawing Labels",function(){return Object.keys(t.commits)},function(e){var n=t.commits[e];t.drawCommit(n)}).thenSingle("Creating Legend",function(){t.rootLabel=document.createElement("div"),t.rootLabel.className="commit-legend",t.textPanel.appendChild(t.rootLabel)}).then("Drawing Merges",function(){return Object.keys(t.commits)},function(e){var n=t.commits[e];t.drawReferences(n)}).thenSingle("Resizing",function(){t.graphicalPanel.style.width=indexToX(t.maxX+1)+"px",t.graphicalPanel.style.height=t.getHeight()+"px"}).start(),window.onresize=function(e){t.al.then("Redrawing",function(){return Object.keys(t.commits)},function(e){var n=t.commits[e];n.view.redraw()}).thenSingle("Resizing",function(){t.graphicalPanel.style.width=indexToX(t.maxX+1)+"px",t.graphicalPanel.style.height=t.getHeight()+"px"}).start(!1)}},t.prototype.getHeight=function(){return this.rootLabel.offsetTop-this.firstCommit.view.label.offsetTop},t.prototype.buildGraph=function(){var t=this,e=Object.keys(this.commits);e.forEach(function(e){var n=t.commits[e];n.initRelations()}),e.forEach(function(e){var n=t.commits[e];n.initHeadSpecifity(),n.initMerges()}),this.initBranches()},t.prototype.drawCommit=function(t){t.view=new CommitView(this.canvas,this.config,t),t.outOfScope===!1&&(t.view.label=this.drawLabel(t),t.view.label.onclick=function(){console&&Logger.debug(t)},this.textPanel.appendChild(t.view.label),t.view.label.style["padding-left"]=indexToX(this.maxX+1)+"px")},t.prototype.drawReferences=function(t){t.view.addRelations(),t.view.redraw()},t.prototype.drawLabel=function(t){var e=document.createElement("div");e.className="commit-legend";var n=t.getShortSha(),i=t.getFullSha(),o=Expandable.extend(document.createElement("span"));if(o.whenShort(n+" "),o.whenFull(i),o.style.fontFamily="Courier",e.appendChild(o),e.appendChild(this.drawIdentity("author",t.author)),t.author.email!=t.committer.email&&e.appendChild(this.drawIdentity("committer",t.committer)),t.branch&&t.branch.commit===t&&!t.branch.anonymous){var a=document.createElement("span");a.className="head-label",a.style.backgroundColor=t.getColor(40),a.style.color="white",a.style.paddingLeft=a.style.paddingRight="2px",a.innerHTML=t.branch.ref,e.appendChild(a)}var r=document.createElement("span");return r.innerHTML=" "+t.subject,r.style.color=t.hasMerges()?"grey":"black",e.appendChild(r),e.style.position="relative",e},t.prototype.drawIdentity=function(t,e){var n=Expandable.extend(document.createElement("gitline-identity"));n.setAttribute("class",t),n.setAttribute("name",e.name);var i=e.name+" &lt;"+e.email.toLowerCase()+"&gt;";return n.setAttribute("title",i),n.style.background=this.config.avatars.map(function(t){return"url("+t(e.email)+") no-repeat"}).join(", "),n.whenFull(i),n.whenShort(" "),n},t.prototype.initBranches=function(){for(var t=Object.keys(this.headsMap),e=0;e<t.length;e++){var n=t[e],i=this.headsMap[n];i.commit.initDefaultBranch()}var o=this;t.sort(function(t,e){var n=o.headsMap[t].commit,i=o.headsMap[e].commit;return n===i?0:n.branch.category===i.branch.category?n.branch.specifity-i.branch.specifity:n.branch.category.length-i.branch.category.length});for(var a=0,e=0;e<t.length;e++){var n=t[e],i=this.headsMap[n],r=i.commit;if(r.branch===i){i.lane=a,a++;for(var s=0;s<t.length;s++){for(var h=!0,c=0;c<t.length;c++){var l=t[c],d=this.headsMap[l].commit;(void 0===d||d.branch!=i&&d.branch.lane===s&&(r.intersects(d)||r.branch.category!=d.branch.category))&&(h=!1)}if(h){Logger.debug("NO INTERSECTS: ",r.branch.ref," - ",d.branch.ref),i.lane=s;break}}this.maxX=Math.max(this.maxX,i.lane)}}},t.prototype.fromJSON=function(t){return this.fromProvider(new LocalGit2JsonProvider(t))},t.prototype.fromProvider=function(t){return this.commitProvider=t,this},t.prototype.renderTo=function(t){return void 0!==this.headerPanel&&t.appendChild(this.headerPanel),t.appendChild(this.loadingPanel=document.createElement("gitline-loadingpanel")),t.appendChild(this.contentPanel=document.createElement("gitline-contentpanel")),this.contentPanel.appendChild(this.graphicalPanel=document.createElement("gitline-graphicalpanel")),this.contentPanel.appendChild(this.textPanel=document.createElement("gitline-textpanel")),this.al=new AsyncLoader(this.loadingPanel),this.render(),this},t.prototype.withHeader=function(t){return"string"==typeof t?(this.headerPanel=document.createElement("gitline-headerpanel"),this.headerPanel.innerHTML=t):this.headerPanel=t,this},t.displayFatalError=function(t){alert(t)},t}(),Shape=function(){function t(t,e){this.dependencies=[],this.canvas=t,this.element=e}return t.prototype.addIfMissing=function(){void 0!==this.element&&null==this.renderedTo&&(this.addElements(),this.renderedTo=this.canvas)},t.prototype.addElements=function(){this.canvas.addElement(this.element)},t.prototype.update=function(){this.dependencies.forEach(function(t){t.update()})},t.prototype.dependsOn=function(t){t.dependencies.push(this)},t}(),Dot=function(t){function e(e){t.call(this,e,e.createRectangle())}return __extends(e,t),e.prototype.size=function(t,e){return this.width=t,this.height=e,this.element.setWidth(t),this.element.setHeight(e),this.element.setXRadius(t/4),this.element.setYRadius(t/4),this.update(),this.addIfMissing(),this},e.prototype.at=function(t,e){return this.x=t,this.y=e,this.update(),this.addIfMissing(),this},e.prototype.color=function(t,e){return this.element.getStroke().setWeight(1),this.element.getStroke().setColor(t),this.element.getFill().setColor(e),this},e.prototype.update=function(){this.element.setLocationXY(this.x-this.width/2,this.y-this.height/2),t.prototype.update.call(this)},e}(Shape),BaseLink=function(t){function e(e,n){t.call(this,e,n)}return __extends(e,t),e.prototype.from=function(t){return this.dependsOn(t),this.parentDot=t,this},e.prototype.to=function(t){return this.childDot=t,this},e.prototype.color=function(t){return this.element.getStroke().setWeight(1),this.element.getStroke().setColor(t),this.lineColor=t,this.addIfMissing(),this},e}(Shape),Curve=function(t){function e(e){t.call(this,e,e.createCurve()),this.arrow=this.canvas.createPolygon()}return __extends(e,t),e.prototype.addElements=function(){t.prototype.addElements.call(this),this.canvas.addElement(this.arrow)},e.prototype.update=function(){var t=this.childDot.x,e=this.childDot.y,n=this.parentDot.x,i=this.parentDot.y,o=this.lineColor,a=n>t?1:-1;this.element.setStartPointXY(n,i-this.parentDot.height/2),this.element.setEndPointXY(t+this.childDot.width/2*a,e),this.element.setControl2PointXY(n,e),this.element.setControl1PointXY(n,e),this.element.getStroke().setWeight(1),this.element.getStroke().setColor(o),this.arrow.getStroke().setWeight(0),this.arrow.getFill().setColor(o),this.arrow.clearPoints(),this.arrow.addPointXY(0,0),this.arrow.addPointXY(6,-4),this.arrow.addPointXY(6,4);for(var r=0;r<this.arrow.getPointsCount();r++){var s=this.arrow.getPointAt(r).X,h=this.arrow.getPointAt(r).Y;this.arrow.setPointXYAt(s*a+t+this.childDot.width/2*a,h+e,r)}},e}(BaseLink),Straight=function(t){function e(e){t.call(this,e,e.createLine())}return __extends(e,t),e.prototype.update=function(){t.prototype.update.call(this),this.element.setStartPointXY(this.parentDot.x,this.parentDot.y-this.parentDot.height/2),this.element.setEndPointXY(this.childDot.x,this.childDot.y+this.childDot.height/2)},e}(BaseLink),Creation=function(t){function e(e){t.call(this,e,e.createLine()),this.secondLine=e.createLine()}return __extends(e,t),e.prototype.addElements=function(){t.prototype.addElements.call(this),this.canvas.addElement(this.secondLine)},e.prototype.update=function(){t.prototype.update.call(this),this.parentDot.x<this.childDot.x?this.element.setStartPointXY(this.parentDot.x+this.parentDot.width/2,this.parentDot.y):this.element.setStartPointXY(this.parentDot.x-this.parentDot.width/2,this.parentDot.y),this.element.setEndPointXY(this.childDot.x,this.parentDot.y),this.element.getStroke().setWeight(1),this.element.getStroke().setDashStyle(jsgl.DashStyles.DASH),this.element.getStroke().setColor(this.lineColor),this.secondLine.setStartPointXY(this.childDot.x,this.parentDot.y),this.secondLine.setEndPointXY(this.childDot.x,this.childDot.y+this.childDot.height/2),this.secondLine.getStroke().setWeight(1),this.secondLine.getStroke().setColor(this.lineColor)},e}(BaseLink),CommitView=function(){function t(t,e,n){this.lines=[],this.canvas=t,this.config=e,this.commit=n,this.dot=new Dot(this.canvas)}return t.prototype.addRelations=function(){var t=this;if(null!=this.commit.directparent){var e;e=this.commit.getLane()==this.commit.directparent.getLane()||this.commit.directparent.outOfScope?new Straight(this.canvas).from(this.commit.directparent.view.dot).to(this.dot).color(this.commit.getColor(20)):new Creation(this.canvas).from(this.commit.directparent.view.dot).to(this.dot).color(this.commit.getColor(30)),this.lines.push(e)}var n=this.commit.merges.standard.concat(this.commit.merges.anonymous);n.forEach(function(e){t.lines.push(new Curve(t.canvas).from(e.source.view.dot).to(t.dot).color(e.source.getColor(35)))})},t.prototype.redraw=function(){this.dot.at(this.commit.getX(),this.commit.getY()).size(this.config.dotWidth,this.config.dotHeight).color(this.commit.getColor(20),this.commit.getColor(80))},t}(),Identity=function(){function t(t,e,n){this.name=t,this.email=e,this.date=n}return t}(),Commit=function(){function t(t,e){this.warnings=[],this.inHeadsRef=[],this.parents=[],this.childs=[],this.siblings=[],this.outOfScope=!1,this.merges={standard:[],anonymous:[]},this.container=t,this.data=e,this.data.obj=this,null==e.inHeads&&(e.inHeads=[]),null==e.parenthashes&&(e.parenthashes=[]),null==e.refnames&&(e.refnames=[]),this.sha=e.sha,this.ssha=e.ssha,this.subject=e.subject,this.indexY=t.maxIndexY++,this.committer=new Identity(this.data.committername,this.data.committeremail,new Date(this.data.committerdate).getTime()),this.author=new Identity(this.data.authorname,this.data.authoremail,new Date(this.data.authordate).getTime())}return t.prototype.getShortSha=function(){return this.ssha},t.prototype.getFullSha=function(){return this.sha},t.prototype.initRelations=function(){var e=this,n=this;this.data.parenthashes.forEach(function(i){var o=e.container.commits[i];if(null==o&&(o=new t(e.container,{sha:i+Math.random()}),o.outOfScope=!0,n.container.addCommit(o)),e.parents.push(o),o.childs.push(e),e.siblings=o.childs,e.parents.length>0){var a=e.parents[0];e.directparent=a,a.directchild=e}}),this.data.inHeads.forEach(function(t){var n=e.container.commits[t];void 0===e.inHeadsRef.indexOf(n)&&e.inHeadsRef.push(n)})},t.prototype.initDefaultBranch=function(){for(var t=this;null!=t;)(null==t.branch||t.branch.specifity>this.branch.specifity)&&(t.branch=this.branch),t.branch.start=t,t.branch.origin=t.directparent,t=t.directparent},t.prototype.initHeadSpecifity=function(){for(var t=0;t<this.data.refnames.length;t++){var e=this.data.refnames[t];if(!this.container.config.remoteOnly||0==e.indexOf("origin/")){this.container.config.remoteOnly&&(e=e.replace(/^origin./,""));var n=1e3*e.replace(/[^\/-]/g,"").length;n+=e.replace(/[^a-zA-Z0-9-]/,"").length,this.container.addBranch(e,this,n),(null==this.maxSpecifity||n<this.maxSpecifity)&&(Logger.debug("assigning branch",e,this.sha,this.maxSpecifity,n),this.maxSpecifity=n,this.branch=this.container.headsMap[e]),this.initDefaultBranch()}}},t.prototype.initMerges=function(){if(this.merges={standard:[],anonymous:[]},this.warnings=[],1==this.parents.length){var t=this.parents[0];this.directparent=t,t.directchild=this}if(this.parents.length>=2){var t=this.parents[0];this.directparent=t,t.directchild=this;for(var e=1;e<this.parents.length;e++){var n=this.parents[e];null!=n&&(n.data.refnames.length>0||n.inHeadsRef.length!=t.inHeadsRef.length?this.merges.standard.push({source:n}):(this.merges.anonymous.push({source:n}),this.initAnonymous()))}}},t.prototype.initAnonymous=function(){var t=this;this.merges.anonymous.forEach(function(e){for(var n=e.source,i=t;null!=i&&null==i.branch;)i=i.directchild;null!=i&&null==n.branch&&(n.branch=new Branch(i.branch.ref+"/anonymous"+n.sha+Math.random(),n,i.branch.specifity+1),n.branch.anonymous=!0,n.branch.parent=i.branch,n.branch.start=i,n.branch.category=i.branch.category,t.container.headsMap[n.branch.ref]=n.branch)})},t.prototype.getColor=function(t){if(null!=this.branch){var e=this.branch;this.branch.anonymous&&(e=this.branch.parent);var n=300*e.lane/this.container.maxX;return"hsl("+n+", 100%, "+t+"%)"}this.warn("No Branch set")},t.prototype.hasMerges=function(){return this.merges.standard.length>0||this.merges.anonymous.length>0},t.prototype.getX=function(){return indexToX(this.getLane())},t.prototype.getY=function(){return this.outOfScope?this.container.rootLabel.offsetTop+20:this.view.label.offsetTop-this.container.firstCommit.view.label.offsetTop+this.view.label.offsetHeight/2},t.prototype.getOriginIndexY=function(){return void 0!=this.branch.origin?this.branch.origin.getIndexY():this.branch.start.outOfScope?this.container.maxIndexY:this.branch.start.indexY},t.prototype.intersects=function(t){var e=9999999,n=999999;return this.outOfScope||t.outOfScope?!0:(null!=t.directchild&&(e=t.directchild.indexY),null!=this.directchild&&(n=this.directchild.indexY),this.getOriginIndexY()>=Math.min(t.indexY,e)&&Math.min(n,this.indexY)<=t.getOriginIndexY())},t.prototype.getIndex=function(){return this.data.index},t.prototype.getIndexY=function(){return this.indexY},t.prototype.warn=function(t){this.warnings.push(t),this.debug(t)},t.prototype.debug=function(t){console&&Logger.debug(t,this)},t.prototype.getLane=function(){return null!=this.branch?this.branch.commit.branch.lane:null},t}(),Branch=function(){function t(t,e,n){this.ref=t,this.commit=e,this.specifity=n,this.shortname=t.split("@")[0],this.category=this.shortname.substring(0,this.shortname.lastIndexOf("/"))}return t}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9zb3VyY2UvQ29uZmlnLnRzIiwiL3NvdXJjZS9Bc3luY0xvYWRlci50cyIsIi9zb3VyY2UvRXhwYW5kYWJsZS50cyIsIi9zb3VyY2UvQ29tbWl0UHJvdmlkZXIudHMiLCJnaXRsaW5lLmpzIiwiL3NvdXJjZS9wbHVnaW5zL0xvY2FsR2l0Mkpzb25Qcm92aWRlci50cyIsIi9zb3VyY2UvcGx1Z2lucy9naXRodWIudHMiLCIvc291cmNlL0dpdGxpbmUudHMiLCIvc291cmNlL3JlbmRlcmluZy9TaGFwZS50cyIsIi9zb3VyY2UvcmVuZGVyaW5nL0RvdC50cyIsIi9zb3VyY2UvcmVuZGVyaW5nL0Jhc2VMaW5rLnRzIiwiL3NvdXJjZS9yZW5kZXJpbmcvQ3VydmUudHMiLCIvc291cmNlL3JlbmRlcmluZy9TdHJhaWdodC50cyIsIi9zb3VyY2UvcmVuZGVyaW5nL0NyZWF0aW9uLnRzIiwiL3NvdXJjZS9Db21taXRWaWV3LnRzIiwiL3NvdXJjZS9Db21taXQudHMiLCIvc291cmNlL0JyYW5jaC50cyJdLCJuYW1lcyI6WyJpbmRleFRvWCIsImluZGV4IiwiQXN5bmNMb2FkaW5nSXRlbSIsIkFzeW5jTG9hZGluZ0l0ZW0uY29uc3RydWN0b3IiLCJBc3luY0xvYWRlciIsIkFzeW5jTG9hZGVyLmNvbnN0cnVjdG9yIiwiQXN5bmNMb2FkZXIudGhlbiIsIkFzeW5jTG9hZGVyLnRoZW5TaW5nbGUiLCJBc3luY0xvYWRlci5zdGFydCIsIkFzeW5jTG9hZGVyLm5leHQiLCJBc3luY0xvYWRlci5zdXNwZW5kIiwiQXN5bmNMb2FkZXIucmVzdW1lIiwiQXN5bmNMb2FkZXIuc2hvd1N0YXR1cyIsIkFzeW5jTG9hZGVyLmV4ZWN1dGUiLCJHaXRsaW5lQ29uZmlnIiwiR2l0bGluZUNvbmZpZy5jb25zdHJ1Y3RvciIsIkdpdGxpbmVDb25maWcuYXZhdGFyX2dyYXZhdGFyIiwiRXhwYW5kYWJsZSIsIkV4cGFuZGFibGUuZXh0ZW5kIiwiQ29tbWl0UHJvdmlkZXIiLCJDb21taXRQcm92aWRlci5jb25zdHJ1Y3RvciIsIkNvbW1pdFByb3ZpZGVyLndoZW5Eb25lIiwiQ29tbWl0UHJvdmlkZXIud2l0aENhbGxiYWNrIiwiQ29tbWl0UHJvdmlkZXIub25SZXF1ZXN0ZWQiLCJDb21taXRQcm92aWRlci5yZXF1ZXN0IiwiX19leHRlbmRzIiwidGhpcyIsImQiLCJiIiwiX18iLCJjb25zdHJ1Y3RvciIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsIkxvY2FsR2l0Mkpzb25Qcm92aWRlciIsIl9zdXBlciIsIkxvY2FsR2l0Mkpzb25Qcm92aWRlci5jb25zdHJ1Y3RvciIsIkxvY2FsR2l0Mkpzb25Qcm92aWRlci5vblJlcXVlc3RlZCIsIkdpdGxpbmUiLCJkaXNwbGF5RmF0YWxFcnJvciIsInVybCIsIkdpdGh1YkNvbW1pdFByb3ZpZGVyIiwiR2l0aHViQ29tbWl0UHJvdmlkZXIuY29uc3RydWN0b3IiLCJHaXRodWJDb21taXRQcm92aWRlci5vYnRhaW5BY2Nlc3NUb2tlbiIsIkdpdGh1YkNvbW1pdFByb3ZpZGVyLmdpdFVSTCIsIkdpdGh1YkNvbW1pdFByb3ZpZGVyLm9uUmVxdWVzdGVkIiwiR2l0aHViQ29tbWl0UHJvdmlkZXIubG9hZEZvcmtzIiwiR2l0aHViQ29tbWl0UHJvdmlkZXIucHJvY2Vzc0JyYW5jaGVzIiwiR2l0aHViQ29tbWl0UHJvdmlkZXIubG9hZEJyYW5jaGVzIiwiR2l0aHViQ29tbWl0UHJvdmlkZXIubG9hZENvbW1pdHMiLCJHaXRodWJDb21taXRQcm92aWRlci5wcm9jZXNzQ29tbWl0cyIsIkdpdGh1YkNvbW1pdFByb3ZpZGVyLnByb2Nlc3MiLCJHaXRodWJDb21taXRQcm92aWRlci5hc3NpZ25IZWFkcyIsIkdpdGxpbmUuY29uc3RydWN0b3IiLCJHaXRsaW5lLmFkZENvbW1pdCIsIkdpdGxpbmUuYWRkQnJhbmNoIiwiR2l0bGluZS5yZW5kZXIiLCJHaXRsaW5lLmdldEhlaWdodCIsIkdpdGxpbmUuYnVpbGRHcmFwaCIsIkdpdGxpbmUuZHJhd0NvbW1pdCIsImNvbnNvbGUiLCJMb2dnZXIiLCJkZWJ1ZyIsImNvbW1pdCIsIkdpdGxpbmUuZHJhd1JlZmVyZW5jZXMiLCJHaXRsaW5lLmRyYXdMYWJlbCIsIkdpdGxpbmUuZHJhd0lkZW50aXR5IiwiR2l0bGluZS5pbml0QnJhbmNoZXMiLCJsSGVhZCIsInNlbGYiLCJoZWFkc01hcCIsImwiLCJySGVhZCIsInIiLCJicmFuY2giLCJjYXRlZ29yeSIsInNwZWNpZml0eSIsImxlbmd0aCIsIkdpdGxpbmUuZnJvbUpTT04iLCJHaXRsaW5lLmZyb21Qcm92aWRlciIsIkdpdGxpbmUucmVuZGVyVG8iLCJHaXRsaW5lLndpdGhIZWFkZXIiLCJHaXRsaW5lLmRpc3BsYXlGYXRhbEVycm9yIiwiU2hhcGUiLCJTaGFwZS5jb25zdHJ1Y3RvciIsIlNoYXBlLmFkZElmTWlzc2luZyIsIlNoYXBlLmFkZEVsZW1lbnRzIiwiU2hhcGUudXBkYXRlIiwiU2hhcGUuZGVwZW5kc09uIiwiRG90IiwiRG90LmNvbnN0cnVjdG9yIiwiRG90LnNpemUiLCJEb3QuYXQiLCJEb3QuY29sb3IiLCJEb3QudXBkYXRlIiwiQmFzZUxpbmsiLCJCYXNlTGluay5jb25zdHJ1Y3RvciIsIkJhc2VMaW5rLmZyb20iLCJCYXNlTGluay50byIsIkJhc2VMaW5rLmNvbG9yIiwiQ3VydmUiLCJDdXJ2ZS5jb25zdHJ1Y3RvciIsIkN1cnZlLmFkZEVsZW1lbnRzIiwiQ3VydmUudXBkYXRlIiwiU3RyYWlnaHQiLCJTdHJhaWdodC5jb25zdHJ1Y3RvciIsIlN0cmFpZ2h0LnVwZGF0ZSIsIkNyZWF0aW9uIiwiQ3JlYXRpb24uY29uc3RydWN0b3IiLCJDcmVhdGlvbi5hZGRFbGVtZW50cyIsIkNyZWF0aW9uLnVwZGF0ZSIsIkNvbW1pdFZpZXciLCJDb21taXRWaWV3LmNvbnN0cnVjdG9yIiwiQ29tbWl0Vmlldy5hZGRSZWxhdGlvbnMiLCJDb21taXRWaWV3LnJlZHJhdyIsIklkZW50aXR5IiwiSWRlbnRpdHkuY29uc3RydWN0b3IiLCJDb21taXQiLCJDb21taXQuY29uc3RydWN0b3IiLCJDb21taXQuZ2V0U2hvcnRTaGEiLCJDb21taXQuZ2V0RnVsbFNoYSIsIkNvbW1pdC5pbml0UmVsYXRpb25zIiwiQ29tbWl0LmluaXREZWZhdWx0QnJhbmNoIiwiQ29tbWl0LmluaXRIZWFkU3BlY2lmaXR5IiwiQ29tbWl0LmluaXRNZXJnZXMiLCJDb21taXQuaW5pdEFub255bW91cyIsIkNvbW1pdC5nZXRDb2xvciIsIkNvbW1pdC5oYXNNZXJnZXMiLCJDb21taXQuZ2V0WCIsIkNvbW1pdC5nZXRZIiwiQ29tbWl0LmdldE9yaWdpbkluZGV4WSIsIkNvbW1pdC5pbnRlcnNlY3RzIiwiQ29tbWl0LmdldEluZGV4IiwiQ29tbWl0LmdldEluZGV4WSIsIkNvbW1pdC53YXJuIiwiQ29tbWl0LmRlYnVnIiwiQ29tbWl0LmdldExhbmUiLCJCcmFuY2giLCJCcmFuY2guY29uc3RydWN0b3IiXSwibWFwcGluZ3MiOiJBQVFBLFFBQUFBLFVBQWtCQyxHQUNqQkQsTUFBY0EsSUFBUEEsRUFBWUEsR0NScEIsR0FBQUUsa0JBQUEsV0FPQ0EsUUFBQUEsR0FBYUEsRUFBZUEsRUFBV0EsRUFBb0JBLEVBQWVBLEdBQ3pFQyxLQUFLQSxNQUFRQSxFQUNiQSxLQUFLQSxLQUFPQSxFQUNaQSxLQUFLQSxTQUFXQSxFQUNoQkEsS0FBS0EsTUFBUUEsRUFDYkEsS0FBS0EsR0FBS0EsRUFFWkQsTUFBQUEsTUFFQUUsWUFBQSxXQU1DQSxRQUFBQSxHQUFhQSxHQUhMQyxLQUFBQSxTQUNBQSxLQUFBQSxXQUFxQkEsRUFHNUJBLEtBQUtBLFFBQVVBLEVBK0RqQkQsTUEzRFFBLEdBQUFBLFVBQUFBLEtBQVBBLFNBQVlBLEVBQWVBLEVBQXdCQSxHQUFuREUsR0FBQUEsR0FBQUEsSUFRQ0EsT0FQQUEsTUFBS0EsV0FBV0EsRUFBT0EsV0FHdEJBLElBQUlBLEdBREFBLEdBQWNBLElBQ1ZBLEVBQUlBLEVBQUtBLE9BQU9BLEVBQUdBLEdBQUlBLEVBQUdBLElBQ2pDQSxFQUFLQSxNQUFNQSxR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QSxRQUFTQSxFQUFNQSxNQUMxQkEsT0FBR0EsTUFBS0EsWUFBY0EsRUFBTUEsWUFBbUJBLEdBRXZCQSxNQUFyQkEsRUFBTUEsY0FDUkEsRUFBU0EsRUFBTUEsWUFBWUEsUUFHTEEsTUFBcEJBLEtBQUtBLGNBQ1BBLEVBQVFBLEtBQUtBLFlBQVlBLFFBR25CQSxLQUFLQSxtQkFBcUJBLEtBQUtBLElBQUlBLEVBQU1BLE9BQVFBLElBQVdBLEtBQUtBLElBQUlBLEVBQU9BLEtBQUtBLFNBQVdBLEVBQU1BLG9CQUduR2QsRUFBQUEsVUFBQUEsU0FBUEEsV0FDQ2UsTUFBT0EsTUFBS0EsS0FBS0EsT0FHWGYsRUFBQUEsVUFBQUEsVUFBUEEsV0FDQ2dCLE1BQU9BLE1BQUtBLFFBR05oQixFQUFBQSxVQUFBQSxLQUFQQSxTQUFZQSxHQUNYaUIsS0FBS0EsU0FBU0EsS0FBS0EsR0FDbkJBLEtBQUtBLE1BQU1BLElBR0xqQixFQUFBQSxVQUFBQSxNQUFQQSxTQUFhQSxHQUNUa0IsU0FDRkEsT0FBT0EsTUFBTUEsRUFBU0EsT0FJakJsQixFQUFBQSxVQUFBQSxRQUFQQSxXQUNDbUIsTUFBa0JBLE9BQWZBLEtBQUtBLE9BQ0FBLEtBQUtBLE9BQU9BLE9BQU9BLE9BQU9BLEtBRTNCQSxNQUtUbkIsS0NoU0FvQixPQUFBLFdBYUNBLFFBQUFBLEdBQVlBLEVBQWlCQSxFQUFnQkEsR0FDNUNDLEtBQUtBLElBQU1BLEVBQ1hBLEtBQUtBLE9BQVNBLEVBQ2RBLEtBQUtBLFVBQVlBLEVBQ2pCQSxLQUFLQSxVQUFZQSxFQUFRQSxNQUFNQSxLQUFLQSxHQUNwQ0EsS0FBS0EsU0FBV0EsS0FBS0EsVUFBVUEsVUFBVUEsRUFBR0EsS0FBS0EsVUFBVUEsWUFBWUEsTUFFekVELE1BQUFBIiwiZmlsZSI6ImdpdGxpbmUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkJyYW5jaC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21taXQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiR2l0bGluZS50c1wiLz5cbi8qIGdsb2JhbHMgKi9cbmRlY2xhcmUgdmFyIGpzZ2w6IGFueTtcbmRlY2xhcmUgdmFyIENyeXB0b0pTOiBhbnk7XG5kZWNsYXJlIHZhciBMb2dnZXI6IGFueTtcblxuZnVuY3Rpb24gaW5kZXhUb1goaW5kZXgpIHtcblx0cmV0dXJuIGluZGV4ICoyMCArIDEyO1xufVxuXG5jbGFzcyBHaXRsaW5lQ29uZmlnIHtcblx0cHVibGljIGRvdEhlaWdodCA9IDY7XG5cdHB1YmxpYyBkb3RXaWR0aCA9IDg7XG5cblx0cHVibGljIHJlbW90ZU9ubHk6IGJvb2xlYW4gPSBmYWxzZTtcblxuXHRwcml2YXRlIGF2YXRhcl9ncmF2YXRhciAoZW1haWwpIHtcblx0XHRyZXR1cm4gXCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvXCIrQ3J5cHRvSlMuTUQ1KGVtYWlsLnRvTG93ZXJDYXNlKCkpK1wiP3M9MTYmZD00MDRcIjtcblx0fVxuXG5cdHB1YmxpYyBhdmF0YXJzIDogRnVuY3Rpb25bXSA9IFt0aGlzLmF2YXRhcl9ncmF2YXRhcl07XG59XG4iLCJcclxuY2xhc3MgQXN5bmNMb2FkaW5nSXRlbSB7XHJcblx0cHVibGljIGxhYmVsOiBzdHJpbmc7XHJcblx0cHVibGljIGRhdGE6IGFueTtcclxuXHRwdWJsaWMgY2FsbGJhY2s6IEZ1bmN0aW9uO1xyXG5cdHB1YmxpYyBpbmRleDogbnVtYmVyO1xyXG5cdHB1YmxpYyBvZiA6IG51bWJlcjtcclxuXHRcclxuXHRjb25zdHJ1Y3RvciAobGFiZWw6IHN0cmluZywgZGF0YTogYW55LCBjYWxsYmFjazogRnVuY3Rpb24sIGluZGV4OiBudW1iZXIsIG9mOiBudW1iZXIpIHtcclxuXHRcdHRoaXMubGFiZWwgPSBsYWJlbDtcclxuXHRcdHRoaXMuZGF0YSA9IGRhdGE7XHJcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0XHR0aGlzLmluZGV4ID0gaW5kZXg7XHJcblx0XHR0aGlzLm9mID0gb2Y7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBBc3luY0xvYWRlciB7XHJcblx0XHJcblx0cHJpdmF0ZSBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGl0ZW1zOiBBc3luY0xvYWRpbmdJdGVtW10gPSBbXTtcclxuXHRwcml2YXRlIHN1c3BlbmRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHRjb25zdHJ1Y3RvciAoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuXHRcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcblx0fVxyXG5cdFxyXG5cdC8qKiBkbyB0aGlzIGFzeW5jLCBkaXNwbGF5IHRoZSBsYWJlbCBhbmQgdGhlIGRhdGEgKi9cclxuXHRwdWJsaWMgdGhlbihsYWJlbDogc3RyaW5nLCBkYXRhY2FsbGJhY2s6IEZ1bmN0aW9uLCBjYWxsYmFjazogRnVuY3Rpb24pOiBBc3luY0xvYWRlciB7XHJcblx0XHR0aGlzLnRoZW5TaW5nbGUobGFiZWwsICgpID0+IHtcclxuXHRcdFx0Ly8gYWRkIGl0IHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHF1ZXVlXHJcblx0XHRcdHZhciBkYXRhOiBhbnlbXSA9IGRhdGFjYWxsYmFjaygpO1xyXG5cdFx0XHRmb3IodmFyIGkgPSBkYXRhLmxlbmd0aC0xOyBpPj0gMDsgaS0tKSB7XHJcblx0XHRcdFx0dGhpcy5pdGVtcy51bnNoaWZ0KG5ldyBBc3luY0xvYWRpbmdJdGVtKGxhYmVsLCBkYXRhW2ldLCBjYWxsYmFjaywgaSwgZGF0YS5sZW5ndGgpKTtcdFxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgdGhlblNpbmdsZShsYWJlbDogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pOiBBc3luY0xvYWRlciB7XHJcblx0XHR0aGlzLml0ZW1zLnB1c2gobmV3IEFzeW5jTG9hZGluZ0l0ZW0obGFiZWwsIG51bGwsIGNhbGxiYWNrLCAwLCAxKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcdFxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgc3RhcnQoc2hpZWxkOiBib29sZWFuID0gdHJ1ZSkge1xyXG5cdFx0aWYoc2hpZWxkKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcdFxyXG5cdFx0fVxyXG5cdFx0dGhpcy5uZXh0KCk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBuZXh0KCkge1xyXG5cdFx0dmFyIG5leHRJdGVtOiBBc3luY0xvYWRpbmdJdGVtID0gdGhpcy5pdGVtcy5zaGlmdCgpO1xyXG5cdFx0aWYobmV4dEl0ZW0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyBhdm9pZCB5aWVsZGluZyBjb250cm9sIHVubmVjZXNzYXJpbHksIGJ1dCBsaW1pdCBzdGFjayBkZXB0aCBhdCB0aGUgc2FtZSB0aW1lXHJcblx0XHRcdGlmICgobmV4dEl0ZW0uaW5kZXggJSA1MCkgPT09IDApIHtcclxuXHRcdFx0XHR0aGlzLnNob3dTdGF0dXMobmV4dEl0ZW0pO1xyXG5cdCAgICBcdFx0d2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5kZWJ1ZyhcImV4ZWN1dGluZyBcIituZXh0SXRlbS5sYWJlbCsgXCIgKFwiK25leHRJdGVtLmluZGV4K1wiL1wiK25leHRJdGVtLm9mK1wiKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUobmV4dEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUobmV4dEl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cHVibGljIHN1c3BlbmQoKSB7XHJcblx0XHR0aGlzLnN1c3BlbmRlZCA9IHRydWU7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyByZXN1bWUoKSB7XHJcblx0XHR0aGlzLnN1c3BlbmRlZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5uZXh0KCk7XHJcblx0fVxyXG5cdHB1YmxpYyBzaG93U3RhdHVzKGl0ZW06IEFzeW5jTG9hZGluZ0l0ZW0pIHtcclxuXHRcdHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBpdGVtLmxhYmVsOyAvLyArIFwiIChcIitpdGVtLmluZGV4ICsgXCIvXCIraXRlbS5vZitcIilcIjtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGV4ZWN1dGUoaXRlbTogQXN5bmNMb2FkaW5nSXRlbSkge1xyXG5cdFx0aXRlbS5jYWxsYmFjayhpdGVtLmRhdGEpO1xyXG5cdFx0aWYoIXRoaXMuc3VzcGVuZGVkKSB7XHJcblx0XHRcdHRoaXMubmV4dCgpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCIvKipcclxuICogRWxlbWVudHMgd2l0aCB0d28gY29udGVudHMsIHRoYXQgZXhwYW5kIG9uIGRvdWJsZSBjbGlja1xyXG4gKi9cclxuIFxyXG5cdGludGVyZmFjZSBIVE1MRXhwYW5kYWJsZUVsZW1lbnQgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XHJcblx0XHR3aGVuU2hvcnQoaW5uZXJIVE1MOiBzdHJpbmcpOiB2b2lkO1xyXG5cdFx0d2hlbkZ1bGwoaW5uZXJIVE1MOiBzdHJpbmcpOiB2b2lkO1xyXG5cdH1cclxuXHRcclxuXHRjbGFzcyBFeHBhbmRhYmxlIHtcclxuXHRcdHB1YmxpYyBzdGF0aWMgZXh0ZW5kKGVsZW1lbnQ6IEhUTUxFbGVtZW50KTogSFRNTEV4cGFuZGFibGVFbGVtZW50IHtcclxuXHRcdFx0dmFyIGV4dGVuZGVkOiBIVE1MRXhwYW5kYWJsZUVsZW1lbnQgPSA8SFRNTEV4cGFuZGFibGVFbGVtZW50PiBlbGVtZW50O1xyXG5cdFx0XHRlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnaXRsaW5lLWV4cGFuZGFibGVcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRleHRlbmRlZC53aGVuRnVsbCA9IChpbm5lckhUTUw6IHN0cmluZykgPT4ge1xyXG5cdFx0XHRcdGV4dGVuZGVkLm9uY2xpY2sgPSAoZXZlbnQpID0+IHtcclxuXHRcdFx0XHRcdGlmKGV2ZW50LmRldGFpbCA9PSAyKSB7XHJcblx0XHRcdFx0XHRcdGV4dGVuZGVkLmlubmVySFRNTCA9IGlubmVySFRNTDtcclxuXHRcdFx0XHRcdFx0ZXZlbnQuY2FuY2VsQnViYmxlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2l0bGluZS1leHBhbmRhYmxlLWV4cGFuZGVkXCIpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGV4dGVuZGVkLndoZW5TaG9ydCA9ICAoaW5uZXJIVE1MOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRleHRlbmRlZC5pbm5lckhUTUwgPSBpbm5lckhUTUw7XHJcblx0XHRcdFx0XHRleHRlbmRlZC5vbm1vdXNlb3V0ID0gKGV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRleHRlbmRlZC5pbm5lckhUTUwgPSBpbm5lckhUTUwrIFwiIFwiO1xyXG5cdFx0XHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZ2l0bGluZS1leHBhbmRhYmxlLWV4cGFuZGVkXCIpO1xyXG5cdFx0XHRcdH07XHRcclxuXHRcdFx0fVxyXG5cclxuXHRcdHJldHVybiBleHRlbmRlZDtcclxuXHRcdH1cdFx0XHJcblx0fVxyXG5cdFxyXG4iLCIvKipcclxuICogTmV3IHR5cGVzY3JpcHQgZmlsZVxyXG4gKi9cclxuXHJcbmNsYXNzIENvbW1pdFByb3ZpZGVyIHtcclxuIFx0cHJpdmF0ZSB1cmw7XHJcbiBcdHByaXZhdGUgY2FsbGJhY2s6IEZ1bmN0aW9uO1xyXG4gXHRcclxuXHRjb25zdHJ1Y3RvciAodXJsOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMudXJsID0gdXJsO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgd2hlbkRvbmUoZGF0YTogYW55KSB7XHJcblx0XHR0aGlzLmNhbGxiYWNrKGRhdGEpO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgd2l0aENhbGxiYWNrKGNhbGxiYWNrRm46IEZ1bmN0aW9uKSB7XHJcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tGbjtcclxuXHR9XHJcblx0XHJcblx0LyoqIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVyd3JpdHRlbi4gaXQgbXVzdCBjYWxsIHdoZW5Eb25lKGRhdGEpIHdoZW4gYWxsIGRhdGEgd2FzIGxvYWRlZC4gKi9cclxuXHRwdWJsaWMgb25SZXF1ZXN0ZWQodXJsOiBzdHJpbmcpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIm9uUmVxdWVzdGVkIG5vdCBpbXBsZW1lbnRlZCBvbiBcIit0aGlzKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHJlcXVlc3QoKSB7XHJcblx0XHR0aGlzLm9uUmVxdWVzdGVkKHRoaXMudXJsKTtcclxuXHR9XHJcbn1cclxuXHQiLCJ2YXIgQXN5bmNMb2FkaW5nSXRlbSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXN5bmNMb2FkaW5nSXRlbShsYWJlbCwgZGF0YSwgY2FsbGJhY2ssIGluZGV4LCBvZikge1xuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgdGhpcy5pbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLm9mID0gb2Y7XG4gICAgfVxuICAgIHJldHVybiBBc3luY0xvYWRpbmdJdGVtO1xufSkoKTtcbnZhciBBc3luY0xvYWRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQXN5bmNMb2FkZXIoZWxlbWVudCkge1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMuc3VzcGVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuICAgIC8qKiBkbyB0aGlzIGFzeW5jLCBkaXNwbGF5IHRoZSBsYWJlbCBhbmQgdGhlIGRhdGEgKi9cbiAgICBBc3luY0xvYWRlci5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChsYWJlbCwgZGF0YWNhbGxiYWNrLCBjYWxsYmFjaykge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLnRoZW5TaW5nbGUobGFiZWwsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGFkZCBpdCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBxdWV1ZVxuICAgICAgICAgICAgdmFyIGRhdGEgPSBkYXRhY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaXRlbXMudW5zaGlmdChuZXcgQXN5bmNMb2FkaW5nSXRlbShsYWJlbCwgZGF0YVtpXSwgY2FsbGJhY2ssIGksIGRhdGEubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEFzeW5jTG9hZGVyLnByb3RvdHlwZS50aGVuU2luZ2xlID0gZnVuY3Rpb24gKGxhYmVsLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLml0ZW1zLnB1c2gobmV3IEFzeW5jTG9hZGluZ0l0ZW0obGFiZWwsIG51bGwsIGNhbGxiYWNrLCAwLCAxKSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQXN5bmNMb2FkZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKHNoaWVsZCkge1xuICAgICAgICBpZiAoc2hpZWxkID09PSB2b2lkIDApIHsgc2hpZWxkID0gdHJ1ZTsgfVxuICAgICAgICBpZiAoc2hpZWxkKSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaGlkZGVuID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgfTtcbiAgICBBc3luY0xvYWRlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIG5leHRJdGVtID0gdGhpcy5pdGVtcy5zaGlmdCgpO1xuICAgICAgICBpZiAobmV4dEl0ZW0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgLy8gYXZvaWQgeWllbGRpbmcgY29udHJvbCB1bm5lY2Vzc2FyaWx5LCBidXQgbGltaXQgc3RhY2sgZGVwdGggYXQgdGhlIHNhbWUgdGltZVxuICAgICAgICAgICAgaWYgKChuZXh0SXRlbS5pbmRleCAlIDUwKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N0YXR1cyhuZXh0SXRlbSk7XG4gICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBMb2dnZXIuZGVidWcoXCJleGVjdXRpbmcgXCIgKyBuZXh0SXRlbS5sYWJlbCArIFwiIChcIiArIG5leHRJdGVtLmluZGV4ICsgXCIvXCIgKyBuZXh0SXRlbS5vZiArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhlY3V0ZShuZXh0SXRlbSk7XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUobmV4dEl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmhpZGRlbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFzeW5jTG9hZGVyLnByb3RvdHlwZS5zdXNwZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN1c3BlbmRlZCA9IHRydWU7XG4gICAgfTtcbiAgICBBc3luY0xvYWRlci5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnN1c3BlbmRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLm5leHQoKTtcbiAgICB9O1xuICAgIEFzeW5jTG9hZGVyLnByb3RvdHlwZS5zaG93U3RhdHVzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGl0ZW0ubGFiZWw7IC8vICsgXCIgKFwiK2l0ZW0uaW5kZXggKyBcIi9cIitpdGVtLm9mK1wiKVwiO1xuICAgIH07XG4gICAgQXN5bmNMb2FkZXIucHJvdG90eXBlLmV4ZWN1dGUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBpdGVtLmNhbGxiYWNrKGl0ZW0uZGF0YSk7XG4gICAgICAgIGlmICghdGhpcy5zdXNwZW5kZWQpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dCgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQXN5bmNMb2FkZXI7XG59KSgpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkJyYW5jaC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21taXQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiR2l0bGluZS50c1wiLz5cbmZ1bmN0aW9uIGluZGV4VG9YKGluZGV4KSB7XG4gICAgcmV0dXJuIGluZGV4ICogMjAgKyAxMjtcbn1cbnZhciBHaXRsaW5lQ29uZmlnID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHaXRsaW5lQ29uZmlnKCkge1xuICAgICAgICB0aGlzLmRvdEhlaWdodCA9IDY7XG4gICAgICAgIHRoaXMuZG90V2lkdGggPSA4O1xuICAgICAgICB0aGlzLnJlbW90ZU9ubHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hdmF0YXJzID0gW3RoaXMuYXZhdGFyX2dyYXZhdGFyXTtcbiAgICB9XG4gICAgR2l0bGluZUNvbmZpZy5wcm90b3R5cGUuYXZhdGFyX2dyYXZhdGFyID0gZnVuY3Rpb24gKGVtYWlsKSB7XG4gICAgICAgIHJldHVybiBcImh0dHA6Ly93d3cuZ3JhdmF0YXIuY29tL2F2YXRhci9cIiArIENyeXB0b0pTLk1ENShlbWFpbC50b0xvd2VyQ2FzZSgpKSArIFwiP3M9MTYmZD00MDRcIjtcbiAgICB9O1xuICAgIHJldHVybiBHaXRsaW5lQ29uZmlnO1xufSkoKTtcbi8qKlxuICogRWxlbWVudHMgd2l0aCB0d28gY29udGVudHMsIHRoYXQgZXhwYW5kIG9uIGRvdWJsZSBjbGlja1xuICovXG52YXIgRXhwYW5kYWJsZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXhwYW5kYWJsZSgpIHtcbiAgICB9XG4gICAgRXhwYW5kYWJsZS5leHRlbmQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgICAgICB2YXIgZXh0ZW5kZWQgPSBlbGVtZW50O1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnaXRsaW5lLWV4cGFuZGFibGVcIik7XG4gICAgICAgIGV4dGVuZGVkLndoZW5GdWxsID0gZnVuY3Rpb24gKGlubmVySFRNTCkge1xuICAgICAgICAgICAgZXh0ZW5kZWQub25jbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwgPT0gMikge1xuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZC5pbm5lckhUTUwgPSBpbm5lckhUTUw7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImdpdGxpbmUtZXhwYW5kYWJsZS1leHBhbmRlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICBleHRlbmRlZC53aGVuU2hvcnQgPSBmdW5jdGlvbiAoaW5uZXJIVE1MKSB7XG4gICAgICAgICAgICBleHRlbmRlZC5pbm5lckhUTUwgPSBpbm5lckhUTUw7XG4gICAgICAgICAgICBleHRlbmRlZC5vbm1vdXNlb3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5kZWQuaW5uZXJIVE1MID0gaW5uZXJIVE1MICsgXCIgXCI7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZ2l0bGluZS1leHBhbmRhYmxlLWV4cGFuZGVkXCIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZGVkO1xuICAgIH07XG4gICAgcmV0dXJuIEV4cGFuZGFibGU7XG59KSgpO1xuLyoqXG4gKiBOZXcgdHlwZXNjcmlwdCBmaWxlXG4gKi9cbnZhciBDb21taXRQcm92aWRlciA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29tbWl0UHJvdmlkZXIodXJsKSB7XG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgIH1cbiAgICBDb21taXRQcm92aWRlci5wcm90b3R5cGUud2hlbkRvbmUgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB0aGlzLmNhbGxiYWNrKGRhdGEpO1xuICAgIH07XG4gICAgQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLndpdGhDYWxsYmFjayA9IGZ1bmN0aW9uIChjYWxsYmFja0ZuKSB7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFja0ZuO1xuICAgIH07XG4gICAgLyoqIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVyd3JpdHRlbi4gaXQgbXVzdCBjYWxsIHdoZW5Eb25lKGRhdGEpIHdoZW4gYWxsIGRhdGEgd2FzIGxvYWRlZC4gKi9cbiAgICBDb21taXRQcm92aWRlci5wcm90b3R5cGUub25SZXF1ZXN0ZWQgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm9uUmVxdWVzdGVkIG5vdCBpbXBsZW1lbnRlZCBvbiBcIiArIHRoaXMpO1xuICAgIH07XG4gICAgQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub25SZXF1ZXN0ZWQodGhpcy51cmwpO1xuICAgIH07XG4gICAgcmV0dXJuIENvbW1pdFByb3ZpZGVyO1xufSkoKTtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG59O1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0NvbW1pdFByb3ZpZGVyLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0dpdGxpbmUudHNcIi8+XG52YXIgTG9jYWxHaXQySnNvblByb3ZpZGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoTG9jYWxHaXQySnNvblByb3ZpZGVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIExvY2FsR2l0Mkpzb25Qcm92aWRlcigpIHtcbiAgICAgICAgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIExvY2FsR2l0Mkpzb25Qcm92aWRlci5wcm90b3R5cGUub25SZXF1ZXN0ZWQgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGpRdWVyeS5nZXRKU09OKHVybCwge30sIGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICBfdGhpcy53aGVuRG9uZShqc29uKTtcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgR2l0bGluZS5kaXNwbGF5RmF0YWxFcnJvcihcIkVycm9yIGxvYWRpbmcgZ2l0IGRhdGEgZnJvbSBcIiArIHVybCArIFwiIGNyZWF0ZSBpdCB1c2luZyBnaXQyanNvblwiKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gTG9jYWxHaXQySnNvblByb3ZpZGVyO1xufSkoQ29tbWl0UHJvdmlkZXIpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0NvbW1pdFByb3ZpZGVyLnRzXCIvPlxudmFyIEdpdGh1YkNvbW1pdFByb3ZpZGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2l0aHViQ29tbWl0UHJvdmlkZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR2l0aHViQ29tbWl0UHJvdmlkZXIoKSB7XG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmZvcmtzID0gW107XG4gICAgICAgIHRoaXMuYmFzZUJyYW5jaGVzID0gW107XG4gICAgICAgIHRoaXMuZGF0YSA9IHt9O1xuICAgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcbiAgICB9XG4gICAgR2l0aHViQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLm9idGFpbkFjY2Vzc1Rva2VuID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZ2l0aHViLWFjY2Vzc3Rva2VuXCIpO1xuICAgICAgICAgICAgdGhpcy5saW1pdCA9IDUwMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbiA9PSBudWxsKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWxlcnQoXCJObyBhY2Nlc3MgdG9rZW4gdG8gZ2l0aHViIGRlZmluZWQuIHNlZSBsb2dcIik7XG4gICAgICAgICAgICBMb2dnZXIuZGVidWcoJ3dpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImdpdGh1Yi1hY2Nlc3N0b2tlblwiLCBcIlRPS0VOXCIpJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBHaXRodWJDb21taXRQcm92aWRlci5wcm90b3R5cGUuZ2l0VVJMID0gZnVuY3Rpb24gKHVybCwgYXBpLCBwYXJhbXMpIHtcbiAgICAgICAgaWYgKHBhcmFtcyA9PT0gdm9pZCAwKSB7IHBhcmFtcyA9IFwiXCI7IH1cbiAgICAgICAgLy8gY29udmVydCB0byBhcGkgdXJsIGFuZCByZW1vdmUgdHJhaWxpbmcgL1xuICAgICAgICBpZiAodXJsLmluZGV4T2YoXCJhcGkuZ2l0aHViLmNvbVwiKSA9PSAtMSkge1xuICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLy4qZ2l0aHViLmNvbS8sIFwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9cIikucmVwbGFjZSgvXFwvXFwvL2csIFwiL1wiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsICsgXCIvXCIgKyBhcGkgKyBcIj9hY2Nlc3NfdG9rZW49XCIgKyB0aGlzLmFjY2Vzc1Rva2VuICsgXCImcGVyX3BhZ2U9XCIgKyB0aGlzLmxpbWl0ICsgXCImY2FsbGJhY2s9PyZcIiArIHBhcmFtcztcbiAgICB9O1xuICAgIEdpdGh1YkNvbW1pdFByb3ZpZGVyLnByb3RvdHlwZS5vblJlcXVlc3RlZCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5vYnRhaW5BY2Nlc3NUb2tlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5sb2FkRm9ya3ModXJsKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBHaXRodWJDb21taXRQcm92aWRlci5wcm90b3R5cGUubG9hZEZvcmtzID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBqUXVlcnkud2hlbihqUXVlcnkuZ2V0SlNPTih0aGlzLmdpdFVSTCh1cmwsIFwiZm9ya3NcIikpLCBqUXVlcnkuZ2V0SlNPTih0aGlzLmdpdFVSTCh1cmwsIFwiYnJhbmNoZXNcIikpKS50aGVuKGZ1bmN0aW9uIChmb3JrcywgYnJhbmNoZXMpIHtcbiAgICAgICAgICAgIC8vdGhpcy5iYXNlQ29tbWl0cyA9IGNvbW1pdHNbMF0uZGF0YTtcbiAgICAgICAgICAgIF90aGlzLnByb2Nlc3NCcmFuY2hlcyh1cmwsIGJyYW5jaGVzWzBdLmRhdGEpO1xuICAgICAgICAgICAgX3RoaXMuZm9ya3MgPSBmb3Jrc1swXS5kYXRhO1xuICAgICAgICAgICAgX3RoaXMubG9hZEJyYW5jaGVzKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgR2l0aHViQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLnByb2Nlc3NCcmFuY2hlcyA9IGZ1bmN0aW9uIChmb3JrLCBkYXRhKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoYnJhbmNoKSB7XG4gICAgICAgICAgICBicmFuY2gucmVwbyA9IGZvcmsudXJsICE9PSB1bmRlZmluZWQgPyBmb3JrLnVybCA6IGZvcms7XG4gICAgICAgICAgICBpZiAoZm9yay5mdWxsX25hbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGJyYW5jaC5uYW1lID0gYnJhbmNoLm5hbWUgKyBcIkBcIiArIGZvcmsuZnVsbF9uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMuYmFzZUJyYW5jaGVzLnB1c2goYnJhbmNoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBHaXRodWJDb21taXRQcm92aWRlci5wcm90b3R5cGUubG9hZEJyYW5jaGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgZm9ya1JlcXVlc3RzID0gdGhpcy5mb3Jrcy5tYXAoZnVuY3Rpb24gKGZvcmspIHtcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuZ2V0SlNPTihfdGhpcy5naXRVUkwoZm9yay51cmwsIFwiYnJhbmNoZXNcIiksIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgTG9nZ2VyLmRlYnVnKFwibG9hZGVkIGJyYW5jaGVzIGZvciBcIiArIGZvcmsubmFtZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0JyYW5jaGVzKGZvcmssIGRhdGEuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGpRdWVyeS53aGVuLmFwcGx5KGpRdWVyeSwgZm9ya1JlcXVlc3RzKS5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIExvZ2dlci5kZWJ1ZyhcImFsbCBicmFuY2hlcyBsb2FkZWRcIik7XG4gICAgICAgICAgICBfdGhpcy5sb2FkQ29tbWl0cygpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEdpdGh1YkNvbW1pdFByb3ZpZGVyLnByb3RvdHlwZS5sb2FkQ29tbWl0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIGNvbW1pdFJlcXVlc3RzID0gW107XG4gICAgICAgIHRoaXMuYmFzZUJyYW5jaGVzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIHZhciBjb21taXQgPSBfdGhpcy5kYXRhW2IuY29tbWl0LnNoYV07XG4gICAgICAgICAgICBpZiAoY29tbWl0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbW1pdFJlcXVlc3RzLnB1c2goalF1ZXJ5LmdldEpTT04oX3RoaXMuZ2l0VVJMKGIucmVwbywgXCJjb21taXRzXCIsIFwic2hhPVwiICsgYi5jb21taXQuc2hhKSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLmRlYnVnKFwibG9hZGVkIGNvbW1pdHMgZm9yIFwiICsgYi5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0NvbW1pdHMoZGF0YS5kYXRhKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBqUXVlcnkud2hlbi5hcHBseShqUXVlcnksIGNvbW1pdFJlcXVlc3RzKS5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnByb2Nlc3MoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBHaXRodWJDb21taXRQcm92aWRlci5wcm90b3R5cGUucHJvY2Vzc0NvbW1pdHMgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBkYXRhLm1hcChmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgdmFyIGMgPSB7fTtcbiAgICAgICAgICAgIGMuc2hhID0gZGF0YS5zaGE7XG4gICAgICAgICAgICBjLnNzaGEgPSBkYXRhLnNoYS5zdWJzdHJpbmcoMCwgOCk7XG4gICAgICAgICAgICBjLnBhcmVudGhhc2hlcyA9IGRhdGEucGFyZW50cy5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguc2hhOyB9KTtcbiAgICAgICAgICAgIGMuYXV0aG9ybmFtZSA9IGRhdGEuY29tbWl0LmF1dGhvci5uYW1lO1xuICAgICAgICAgICAgYy5hdXRob3JlbWFpbCA9IGRhdGEuY29tbWl0LmF1dGhvci5lbWFpbDtcbiAgICAgICAgICAgIGMuYXV0aG9yZGF0ZSA9IGRhdGEuY29tbWl0LmF1dGhvci5kYXRlO1xuICAgICAgICAgICAgYy5hdXRob3J0aW1lc3RhbXAgPSBuZXcgRGF0ZShkYXRhLmNvbW1pdC5hdXRob3IuZGF0ZSkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgYy5jb21taXR0ZXJuYW1lID0gZGF0YS5jb21taXQuY29tbWl0dGVyLm5hbWU7XG4gICAgICAgICAgICBjLmNvbW1pdHRlcmVtYWlsID0gZGF0YS5jb21taXQuY29tbWl0dGVyLmVtYWlsO1xuICAgICAgICAgICAgYy5jb21taXR0ZXJkYXRlID0gZGF0YS5jb21taXQuY29tbWl0dGVyLmRhdGU7XG4gICAgICAgICAgICBjLmNvbW1pdHRlcnRpbWVzdGFtcCA9IG5ldyBEYXRlKGRhdGEuY29tbWl0LmNvbW1pdHRlci5kYXRlKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICBjLnN1YmplY3QgPSBkYXRhLmNvbW1pdC5tZXNzYWdlO1xuICAgICAgICAgICAgYy5ib2R5ID0gXCJcIjsgLy8gVG9kbzogd2hlcmUgdG8gZ2V0IHRoaXM/XG4gICAgICAgICAgICBjLnJlZm5hbWVzID0gW107IC8vIHNldCB3aGVuIHBhcnNpbmcgYnJhbmNoZXNcbiAgICAgICAgICAgIGMuaW5IZWFkcyA9IFtdOyAvLyBzZXQgd2hlbiBwYXJzaW5nIGJyYW5jaGVzXG4gICAgICAgICAgICByZXR1cm4gYztcbiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoY29tbWl0KSB7XG4gICAgICAgICAgICBfdGhpcy5kYXRhW2NvbW1pdC5zaGFdID0gY29tbWl0O1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEdpdGh1YkNvbW1pdFByb3ZpZGVyLnByb3RvdHlwZS5wcm9jZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB0aGlzLmJhc2VCcmFuY2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICAgICAgICB2YXIgY29tbWl0ID0gX3RoaXMuZGF0YVtiLmNvbW1pdC5zaGFdO1xuICAgICAgICAgICAgaWYgKGNvbW1pdCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGIuYXNzaWduZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbW1pdC5yZWZuYW1lcy5wdXNoKGIubmFtZSk7XG4gICAgICAgICAgICAgICAgX3RoaXMuYXNzaWduSGVhZHMoY29tbWl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFNvcnRcbiAgICAgICAgdmFyIG5ld2RhdGEgPSB7fTtcbiAgICAgICAgT2JqZWN0LmtleXModGhpcy5kYXRhKS5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXMuZGF0YVtiXS5jb21taXR0ZXJ0aW1lc3RhbXAgLSBfdGhpcy5kYXRhW2FdLmNvbW1pdHRlcnRpbWVzdGFtcDtcbiAgICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoc2hhKSB7XG4gICAgICAgICAgICBuZXdkYXRhW3NoYV0gPSBfdGhpcy5kYXRhW3NoYV07XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLndoZW5Eb25lKG5ld2RhdGEpO1xuICAgIH07XG4gICAgR2l0aHViQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLmFzc2lnbkhlYWRzID0gZnVuY3Rpb24gKGNvbW1pdCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBjb21taXQucGFyZW50czEgPSBjb21taXQucGFyZW50aGFzaGVzLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7IC8vIGNvcHkgYXJyYXlcbiAgICAgICAgd2hpbGUgKGNvbW1pdC5wYXJlbnRzMS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgbmV3UGFyZW50cyA9IFtdO1xuICAgICAgICAgICAgY29tbWl0LnBhcmVudHMxLmZvckVhY2goZnVuY3Rpb24gKHBhcmVudEhhc2gpIHtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IF90aGlzLmRhdGFbcGFyZW50SGFzaF07XG4gICAgICAgICAgICAgICAgaWYgKHAgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHAuaW5IZWFkcy5wdXNoKGNvbW1pdC5zaGEpO1xuICAgICAgICAgICAgICAgICAgICAvLyBhZGQgYWxsIGdyYW5kcGFyZW50cyB0byB0aGUgbmV3cGFyZW50c1xuICAgICAgICAgICAgICAgICAgICBwLnBhcmVudGhhc2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmV3UGFyZW50cy5pbmRleE9mKGgpID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1BhcmVudHMucHVzaChoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb21taXQucGFyZW50czEgPSBuZXdQYXJlbnRzO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gR2l0aHViQ29tbWl0UHJvdmlkZXI7XG59KShDb21taXRQcm92aWRlcik7XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQnJhbmNoLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbW1pdC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb25maWcudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQXN5bmNMb2FkZXIudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiRXhwYW5kYWJsZS50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21taXRQcm92aWRlci50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwbHVnaW5zL0xvY2FsR2l0Mkpzb25Qcm92aWRlci50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwbHVnaW5zL2dpdGh1Yi50c1wiLz5cbnZhciBHaXRsaW5lID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBHaXRsaW5lKCkge1xuICAgICAgICB0aGlzLnNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLm1heFggPSAwO1xuICAgICAgICB0aGlzLm1heEluZGV4WSA9IDA7XG4gICAgICAgIHRoaXMuY29tbWl0cyA9IHt9O1xuICAgICAgICB0aGlzLmhlYWRzTWFwID0ge307XG4gICAgICAgIHRoaXMuY29uZmlnID0gbmV3IEdpdGxpbmVDb25maWcoKTtcbiAgICB9XG4gICAgR2l0bGluZS5wcm90b3R5cGUuYWRkQ29tbWl0ID0gZnVuY3Rpb24gKGNvbW1pdCkge1xuICAgICAgICB0aGlzLmNvbW1pdHNbY29tbWl0LmdldEZ1bGxTaGEoKV0gPSBjb21taXQ7XG4gICAgICAgIC8vIGZpcnN0IGNvbW1pdCBuZWVkZWQgYnkgcmVuZGVyaW5nXG4gICAgICAgIGlmICh0aGlzLmZpcnN0Q29tbWl0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RDb21taXQgPSBjb21taXQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEdpdGxpbmUucHJvdG90eXBlLmFkZEJyYW5jaCA9IGZ1bmN0aW9uIChyZWZuYW1lLCBjb21taXQsIHNwZWNpZml0eSkge1xuICAgICAgICB2YXIgYnJhbmNoID0gbmV3IEJyYW5jaChyZWZuYW1lLCBjb21taXQsIHNwZWNpZml0eSk7XG4gICAgICAgIHRoaXMuaGVhZHNNYXBbcmVmbmFtZV0gPSBicmFuY2g7XG4gICAgfTtcbiAgICBHaXRsaW5lLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuY2FudmFzID0gbmV3IGpzZ2wuUGFuZWwodGhpcy5ncmFwaGljYWxQYW5lbCk7XG4gICAgICAgIHRoaXMuYWwudGhlblNpbmdsZShcIkxvYWRpbmcgRGF0YVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5hbC5zdXNwZW5kKCk7XG4gICAgICAgICAgICBfdGhpcy5jb21taXRQcm92aWRlci53aXRoQ2FsbGJhY2soZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5kYXRhID0ganNvbjtcbiAgICAgICAgICAgICAgICBfdGhpcy5hbC5yZXN1bWUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX3RoaXMuY29tbWl0UHJvdmlkZXIucmVxdWVzdCgpO1xuICAgICAgICB9KS50aGVuKFwiTG9hZGluZyBDb21taXRzXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIE9iamVjdC5rZXlzKF90aGlzLmRhdGEpOyB9LCBmdW5jdGlvbiAoc2hhKSB7XG4gICAgICAgICAgICB2YXIgY29tbWl0ID0gbmV3IENvbW1pdChfdGhpcywgX3RoaXMuZGF0YVtzaGFdKTtcbiAgICAgICAgICAgIF90aGlzLmFkZENvbW1pdChjb21taXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW5TaW5nbGUoXCJCdWlsZGluZyBHcmFwaFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5idWlsZEdyYXBoKCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihcIkRyYXdpbmcgTGFiZWxzXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIE9iamVjdC5rZXlzKF90aGlzLmNvbW1pdHMpOyB9LCBmdW5jdGlvbiAoc2hhKSB7XG4gICAgICAgICAgICB2YXIgY29tbWl0ID0gX3RoaXMuY29tbWl0c1tzaGFdO1xuICAgICAgICAgICAgX3RoaXMuZHJhd0NvbW1pdChjb21taXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW5TaW5nbGUoXCJDcmVhdGluZyBMZWdlbmRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucm9vdExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBfdGhpcy5yb290TGFiZWwuY2xhc3NOYW1lID0gXCJjb21taXQtbGVnZW5kXCI7XG4gICAgICAgICAgICBfdGhpcy50ZXh0UGFuZWwuYXBwZW5kQ2hpbGQoX3RoaXMucm9vdExhYmVsKTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKFwiRHJhd2luZyBNZXJnZXNcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gT2JqZWN0LmtleXMoX3RoaXMuY29tbWl0cyk7IH0sIGZ1bmN0aW9uIChzaGEpIHtcbiAgICAgICAgICAgIHZhciBjb21taXQgPSBfdGhpcy5jb21taXRzW3NoYV07XG4gICAgICAgICAgICBfdGhpcy5kcmF3UmVmZXJlbmNlcyhjb21taXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW5TaW5nbGUoXCJSZXNpemluZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5ncmFwaGljYWxQYW5lbC5zdHlsZS53aWR0aCA9IGluZGV4VG9YKF90aGlzLm1heFggKyAxKSArIFwicHhcIjtcbiAgICAgICAgICAgIF90aGlzLmdyYXBoaWNhbFBhbmVsLnN0eWxlLmhlaWdodCA9IF90aGlzLmdldEhlaWdodCgpICsgXCJweFwiO1xuICAgICAgICB9KS5zdGFydCgpO1xuICAgICAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIF90aGlzLmFsLnRoZW4oXCJSZWRyYXdpbmdcIiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gT2JqZWN0LmtleXMoX3RoaXMuY29tbWl0cyk7IH0sIGZ1bmN0aW9uIChzaGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29tbWl0ID0gX3RoaXMuY29tbWl0c1tzaGFdO1xuICAgICAgICAgICAgICAgIGNvbW1pdC52aWV3LnJlZHJhdygpO1xuICAgICAgICAgICAgfSkudGhlblNpbmdsZShcIlJlc2l6aW5nXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5ncmFwaGljYWxQYW5lbC5zdHlsZS53aWR0aCA9IGluZGV4VG9YKF90aGlzLm1heFggKyAxKSArIFwicHhcIjtcbiAgICAgICAgICAgICAgICBfdGhpcy5ncmFwaGljYWxQYW5lbC5zdHlsZS5oZWlnaHQgPSBfdGhpcy5nZXRIZWlnaHQoKSArIFwicHhcIjtcbiAgICAgICAgICAgIH0pLnN0YXJ0KGZhbHNlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuICAgIEdpdGxpbmUucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdExhYmVsLm9mZnNldFRvcCAtIHRoaXMuZmlyc3RDb21taXQudmlldy5sYWJlbC5vZmZzZXRUb3A7XG4gICAgfTtcbiAgICBHaXRsaW5lLnByb3RvdHlwZS5idWlsZEdyYXBoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc2hhcyA9IE9iamVjdC5rZXlzKHRoaXMuY29tbWl0cyk7XG4gICAgICAgIHNoYXMuZm9yRWFjaChmdW5jdGlvbiAoc2hhKSB7XG4gICAgICAgICAgICB2YXIgY29tbWl0ID0gX3RoaXMuY29tbWl0c1tzaGFdO1xuICAgICAgICAgICAgY29tbWl0LmluaXRSZWxhdGlvbnMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHNoYXMuZm9yRWFjaChmdW5jdGlvbiAoc2hhKSB7XG4gICAgICAgICAgICB2YXIgY29tbWl0ID0gX3RoaXMuY29tbWl0c1tzaGFdO1xuICAgICAgICAgICAgY29tbWl0LmluaXRIZWFkU3BlY2lmaXR5KCk7XG4gICAgICAgICAgICBjb21taXQuaW5pdE1lcmdlcygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbml0QnJhbmNoZXMoKTtcbiAgICB9O1xuICAgIEdpdGxpbmUucHJvdG90eXBlLmRyYXdDb21taXQgPSBmdW5jdGlvbiAoY29tbWl0KSB7XG4gICAgICAgIC8vIExhYmVsXG4gICAgICAgIGNvbW1pdC52aWV3ID0gbmV3IENvbW1pdFZpZXcodGhpcy5jYW52YXMsIHRoaXMuY29uZmlnLCBjb21taXQpO1xuICAgICAgICBpZiAoY29tbWl0Lm91dE9mU2NvcGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb21taXQudmlldy5sYWJlbCA9IHRoaXMuZHJhd0xhYmVsKGNvbW1pdCk7XG4gICAgICAgICAgICBjb21taXQudmlldy5sYWJlbC5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmIChjb25zb2xlKSB7XG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5kZWJ1Zyhjb21taXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnRleHRQYW5lbC5hcHBlbmRDaGlsZChjb21taXQudmlldy5sYWJlbCk7XG4gICAgICAgICAgICBjb21taXQudmlldy5sYWJlbC5zdHlsZVsncGFkZGluZy1sZWZ0J10gPSBpbmRleFRvWCh0aGlzLm1heFggKyAxKSArIFwicHhcIjtcbiAgICAgICAgfVxuICAgIH07XG4gICAgR2l0bGluZS5wcm90b3R5cGUuZHJhd1JlZmVyZW5jZXMgPSBmdW5jdGlvbiAoY29tbWl0KSB7XG4gICAgICAgIGNvbW1pdC52aWV3LmFkZFJlbGF0aW9ucygpO1xuICAgICAgICBjb21taXQudmlldy5yZWRyYXcoKTtcbiAgICB9O1xuICAgIEdpdGxpbmUucHJvdG90eXBlLmRyYXdMYWJlbCA9IGZ1bmN0aW9uIChjb21taXQpIHtcbiAgICAgICAgdmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGxhYmVsLmNsYXNzTmFtZSA9IFwiY29tbWl0LWxlZ2VuZFwiO1xuICAgICAgICAvLyBTSEEgSGFzaCBcbiAgICAgICAgdmFyIHNob3J0U2hhID0gY29tbWl0LmdldFNob3J0U2hhKCk7XG4gICAgICAgIHZhciBmdWxsU2hhID0gY29tbWl0LmdldEZ1bGxTaGEoKTtcbiAgICAgICAgdmFyIHNoYSA9IEV4cGFuZGFibGUuZXh0ZW5kKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpKTtcbiAgICAgICAgc2hhLndoZW5TaG9ydChzaG9ydFNoYSArIFwiIFwiKTtcbiAgICAgICAgc2hhLndoZW5GdWxsKGZ1bGxTaGEpO1xuICAgICAgICBzaGEuc3R5bGUuZm9udEZhbWlseSA9IFwiQ291cmllclwiO1xuICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChzaGEpO1xuICAgICAgICAvLyBBdXRob3IgYW5kIGNvbW1pdHRlclxuICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZCh0aGlzLmRyYXdJZGVudGl0eShcImF1dGhvclwiLCBjb21taXQuYXV0aG9yKSk7XG4gICAgICAgIGlmIChjb21taXQuYXV0aG9yLmVtYWlsICE9IGNvbW1pdC5jb21taXR0ZXIuZW1haWwpIHtcbiAgICAgICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKHRoaXMuZHJhd0lkZW50aXR5KFwiY29tbWl0dGVyXCIsIGNvbW1pdC5jb21taXR0ZXIpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBCcmFuY2ggLSBUT0RPOiBUYWdzIGFuZCBvdGhlciBicmFuY2hlc1x0XHRcbiAgICAgICAgaWYgKGNvbW1pdC5icmFuY2ggJiYgY29tbWl0LmJyYW5jaC5jb21taXQgPT09IGNvbW1pdCAmJiAhY29tbWl0LmJyYW5jaC5hbm9ueW1vdXMpIHtcbiAgICAgICAgICAgIHZhciBoZWFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgICAgICBoZWFkLmNsYXNzTmFtZSA9IFwiaGVhZC1sYWJlbFwiO1xuICAgICAgICAgICAgaGVhZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb21taXQuZ2V0Q29sb3IoNDApO1xuICAgICAgICAgICAgaGVhZC5zdHlsZS5jb2xvciA9IFwid2hpdGVcIjtcbiAgICAgICAgICAgIGhlYWQuc3R5bGUucGFkZGluZ0xlZnQgPSBoZWFkLnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiMnB4XCI7XG4gICAgICAgICAgICBoZWFkLmlubmVySFRNTCA9IGNvbW1pdC5icmFuY2gucmVmO1xuICAgICAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoaGVhZCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU3ViamVjdFx0XHRcbiAgICAgICAgdmFyIHN1YmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICAgICAgc3ViamVjdC5pbm5lckhUTUwgPSBcIiBcIiArIGNvbW1pdC5zdWJqZWN0O1xuICAgICAgICBzdWJqZWN0LnN0eWxlLmNvbG9yID0gY29tbWl0Lmhhc01lcmdlcygpID8gXCJncmV5XCIgOiBcImJsYWNrXCI7XG4gICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKHN1YmplY3QpO1xuICAgICAgICBsYWJlbC5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcbiAgICAgICAgcmV0dXJuIGxhYmVsO1xuICAgIH07XG4gICAgR2l0bGluZS5wcm90b3R5cGUuZHJhd0lkZW50aXR5ID0gZnVuY3Rpb24gKHR5cGUsIGlkKSB7XG4gICAgICAgIHZhciBlbCA9IEV4cGFuZGFibGUuZXh0ZW5kKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJnaXRsaW5lLWlkZW50aXR5XCIpKTtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdHlwZSk7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgaWQubmFtZSk7XG4gICAgICAgIHZhciBmdWxsbmFtZSA9IGlkLm5hbWUgKyBcIiAmbHQ7XCIgKyBpZC5lbWFpbC50b0xvd2VyQ2FzZSgpICsgXCImZ3Q7XCI7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShcInRpdGxlXCIsIGZ1bGxuYW1lKTtcbiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9IHRoaXMuY29uZmlnLmF2YXRhcnMubWFwKGZ1bmN0aW9uIChmKSB7IHJldHVybiBcInVybChcIiArIGYoaWQuZW1haWwpICsgXCIpIG5vLXJlcGVhdFwiOyB9KS5qb2luKFwiLCBcIik7XG4gICAgICAgIGVsLndoZW5GdWxsKGZ1bGxuYW1lKTtcbiAgICAgICAgZWwud2hlblNob3J0KFwiIFwiKTtcbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH07XG4gICAgLypcbiAgICAgICAgQmFzZWQgb24gdGhlIHNwZWNpZml0eSBhc3NpZ24gdGhlIGJyYW5jaGVzIHRvIHRoZSBjb21taXRzLiBpZiBpbiBkb3VidCB0aGUgY29tbWl0IHdpbGwgYmUgb24gdGhlIG1vc3Qgc3BlY2lmaWMgYnJhbmNoXG4gICAgKi9cbiAgICBHaXRsaW5lLnByb3RvdHlwZS5pbml0QnJhbmNoZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoZWFkcyA9IE9iamVjdC5rZXlzKHRoaXMuaGVhZHNNYXApO1xuICAgICAgICAvKiBzZXQgdGhlIGluZGV4IHRvIHRoZSBoZWFkIG9iamVjdCAqL1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlYWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaGVhZE5hbWUgPSBoZWFkc1tpXTtcbiAgICAgICAgICAgIHZhciBoZWFkID0gdGhpcy5oZWFkc01hcFtoZWFkTmFtZV07XG4gICAgICAgICAgICBoZWFkLmNvbW1pdC5pbml0RGVmYXVsdEJyYW5jaCgpO1xuICAgICAgICB9XG4gICAgICAgIC8qIFNvcnQgdGhlIGJyYW5jaGVzIGJ5IHNwZWNpZml0eSAqL1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGhlYWRzLnNvcnQoZnVuY3Rpb24gKGwsIHIpIHtcbiAgICAgICAgICAgIHZhciBsSGVhZCA9IHNlbGYuaGVhZHNNYXBbbF0uY29tbWl0O1xuICAgICAgICAgICAgdmFyIHJIZWFkID0gc2VsZi5oZWFkc01hcFtyXS5jb21taXQ7XG4gICAgICAgICAgICBpZiAobEhlYWQgPT09IHJIZWFkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobEhlYWQuYnJhbmNoLmNhdGVnb3J5ID09PSBySGVhZC5icmFuY2guY2F0ZWdvcnkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbEhlYWQuYnJhbmNoLnNwZWNpZml0eSAtIHJIZWFkLmJyYW5jaC5zcGVjaWZpdHk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbEhlYWQuYnJhbmNoLmNhdGVnb3J5Lmxlbmd0aCAtIHJIZWFkLmJyYW5jaC5jYXRlZ29yeS5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvKiBzZXQgdGhlIGluZGV4IHRvIHRoZSBoZWFkIG9iamVjdCAqL1xuICAgICAgICB2YXIgbWF4TGFuZSA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBoZWFkTmFtZSA9IGhlYWRzW2ldO1xuICAgICAgICAgICAgdmFyIGhlYWQgPSB0aGlzLmhlYWRzTWFwW2hlYWROYW1lXTtcbiAgICAgICAgICAgIHZhciB0aXAgPSBoZWFkLmNvbW1pdDtcbiAgICAgICAgICAgIGlmICh0aXAuYnJhbmNoID09PSBoZWFkKSB7XG4gICAgICAgICAgICAgICAgaGVhZC5sYW5lID0gbWF4TGFuZTtcbiAgICAgICAgICAgICAgICAvL2hlYWQuaW5kZXggPSBtYXhMYW5lO1xuICAgICAgICAgICAgICAgIG1heExhbmUrKztcbiAgICAgICAgICAgICAgICAvLyBDYW4gd2UgZGlzcGxheSB0aGlzIGhlYWQgYSBsaXR0bGUgbW9yZSB0byB0aGUgbGVmdD9cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBsID0gMDsgbCA8IGhlYWRzLmxlbmd0aDsgbCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW5Vc2VMYW5lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBoZWFkcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpoZWFkTmFtZSA9IGhlYWRzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRPbkxhbmUgPSB0aGlzLmhlYWRzTWFwW2poZWFkTmFtZV0uY29tbWl0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRPbkxhbmUgPT09IHVuZGVmaW5lZCB8fCBoZWFkT25MYW5lLmJyYW5jaCAhPSBoZWFkICYmIGhlYWRPbkxhbmUuYnJhbmNoLmxhbmUgPT09IGwgJiYgKHRpcC5pbnRlcnNlY3RzKGhlYWRPbkxhbmUpIHx8IHRpcC5icmFuY2guY2F0ZWdvcnkgIT0gaGVhZE9uTGFuZS5icmFuY2guY2F0ZWdvcnkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuVXNlTGFuZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYW5Vc2VMYW5lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBMb2dnZXIuZGVidWcoXCJOTyBJTlRFUlNFQ1RTOiBcIiwgdGlwLmJyYW5jaC5yZWYsIFwiIC0gXCIsIGhlYWRPbkxhbmUuYnJhbmNoLnJlZik7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkLmxhbmUgPSBsO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5tYXhYID0gTWF0aC5tYXgodGhpcy5tYXhYLCBoZWFkLmxhbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBMYXVuY2hpbmdcbiAgICBHaXRsaW5lLnByb3RvdHlwZS5mcm9tSlNPTiA9IGZ1bmN0aW9uIChqc29uRmlsZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5mcm9tUHJvdmlkZXIobmV3IExvY2FsR2l0Mkpzb25Qcm92aWRlcihqc29uRmlsZSkpO1xuICAgIH07XG4gICAgR2l0bGluZS5wcm90b3R5cGUuZnJvbVByb3ZpZGVyID0gZnVuY3Rpb24gKGNvbW1pdFByb3ZpZGVyKSB7XG4gICAgICAgIHRoaXMuY29tbWl0UHJvdmlkZXIgPSBjb21taXRQcm92aWRlcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBHaXRsaW5lLnByb3RvdHlwZS5yZW5kZXJUbyA9IGZ1bmN0aW9uIChwYW5lbCkge1xuICAgICAgICBpZiAodGhpcy5oZWFkZXJQYW5lbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZCh0aGlzLmhlYWRlclBhbmVsKTtcbiAgICAgICAgfVxuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZCh0aGlzLmxvYWRpbmdQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJnaXRsaW5lLWxvYWRpbmdwYW5lbFwiKSk7XG4gICAgICAgIHBhbmVsLmFwcGVuZENoaWxkKHRoaXMuY29udGVudFBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImdpdGxpbmUtY29udGVudHBhbmVsXCIpKTtcbiAgICAgICAgdGhpcy5jb250ZW50UGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5ncmFwaGljYWxQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJnaXRsaW5lLWdyYXBoaWNhbHBhbmVsXCIpKTtcbiAgICAgICAgdGhpcy5jb250ZW50UGFuZWwuYXBwZW5kQ2hpbGQodGhpcy50ZXh0UGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZ2l0bGluZS10ZXh0cGFuZWxcIikpO1xuICAgICAgICB0aGlzLmFsID0gbmV3IEFzeW5jTG9hZGVyKHRoaXMubG9hZGluZ1BhbmVsKTtcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBHaXRsaW5lLnByb3RvdHlwZS53aXRoSGVhZGVyID0gZnVuY3Rpb24gKGhlYWRlcikge1xuICAgICAgICBpZiAodHlwZW9mIGhlYWRlciA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJnaXRsaW5lLWhlYWRlcnBhbmVsXCIpO1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJQYW5lbC5pbm5lckhUTUwgPSBoZWFkZXI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlclBhbmVsID0gaGVhZGVyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgR2l0bGluZS5kaXNwbGF5RmF0YWxFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgIGFsZXJ0KG1lc3NhZ2UpO1xuICAgIH07XG4gICAgcmV0dXJuIEdpdGxpbmU7XG59KSgpO1xuLyoqXG4gKiBiYXNpYyBzdXBwb3J0IGZvciBqc2dsIHNoYXBlc1xuICovXG52YXIgU2hhcGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNoYXBlKGNhbnZhcywgZWxlbWVudCkge1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IFtdO1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG4gICAgU2hhcGUucHJvdG90eXBlLmFkZElmTWlzc2luZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucmVuZGVyZWRUbyA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnRzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVkVG8gPSB0aGlzLmNhbnZhcztcbiAgICAgICAgfVxuICAgIH07XG4gICAgU2hhcGUucHJvdG90eXBlLmFkZEVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFbGVtZW50KHRoaXMuZWxlbWVudCk7XG4gICAgfTtcbiAgICBTaGFwZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcy5mb3JFYWNoKGZ1bmN0aW9uIChkZXApIHtcbiAgICAgICAgICAgIGRlcC51cGRhdGUoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBTaGFwZS5wcm90b3R5cGUuZGVwZW5kc09uID0gZnVuY3Rpb24gKG9uKSB7XG4gICAgICAgIG9uLmRlcGVuZGVuY2llcy5wdXNoKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIFNoYXBlO1xufSkoKTtcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJTaGFwZS50c1wiLz5cbi8qKlxuICogTmV3IHR5cGVzY3JpcHQgZmlsZVxuICovXG52YXIgRG90ID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoRG90LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIERvdChjYW52YXMpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgY2FudmFzLCBjYW52YXMuY3JlYXRlUmVjdGFuZ2xlKCkpO1xuICAgIH1cbiAgICBEb3QucHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0V2lkdGgod2lkdGgpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0SGVpZ2h0KGhlaWdodCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRYUmFkaXVzKHdpZHRoIC8gNCk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRZUmFkaXVzKHdpZHRoIC8gNCk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIHRoaXMuYWRkSWZNaXNzaW5nKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRG90LnByb3RvdHlwZS5hdCA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIHRoaXMuYWRkSWZNaXNzaW5nKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRG90LnByb3RvdHlwZS5jb2xvciA9IGZ1bmN0aW9uIChzdHJva2VDb2xvciwgZmlsbENvbG9yKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRXZWlnaHQoMSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRDb2xvcihzdHJva2VDb2xvcik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRGaWxsKCkuc2V0Q29sb3IoZmlsbENvbG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBEb3QucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldExvY2F0aW9uWFkodGhpcy54IC0gdGhpcy53aWR0aCAvIDIsIHRoaXMueSAtIHRoaXMuaGVpZ2h0IC8gMik7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICByZXR1cm4gRG90O1xufSkoU2hhcGUpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNoYXBlLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkRvdC50c1wiLz5cbi8qKlxuICogU2hhcGUgdGhhdCBsaW5rcyB0d28gZG90c1xuICovXG52YXIgQmFzZUxpbmsgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhCYXNlTGluaywgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBCYXNlTGluayhjYW52YXMsIGVsZW1lbnQpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgY2FudmFzLCBlbGVtZW50KTtcbiAgICB9XG4gICAgQmFzZUxpbmsucHJvdG90eXBlLmZyb20gPSBmdW5jdGlvbiAoZnJvbSkge1xuICAgICAgICB0aGlzLmRlcGVuZHNPbihmcm9tKTtcbiAgICAgICAgdGhpcy5wYXJlbnREb3QgPSBmcm9tO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEJhc2VMaW5rLnByb3RvdHlwZS50byA9IGZ1bmN0aW9uICh0bykge1xuICAgICAgICAvL3RoaXMuZGVwZW5kc09uKHRvKTtcbiAgICAgICAgdGhpcy5jaGlsZERvdCA9IHRvO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIEJhc2VMaW5rLnByb3RvdHlwZS5jb2xvciA9IGZ1bmN0aW9uIChsaW5lQ29sb3IpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldFdlaWdodCgxKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldENvbG9yKGxpbmVDb2xvcik7XG4gICAgICAgIHRoaXMubGluZUNvbG9yID0gbGluZUNvbG9yO1xuICAgICAgICB0aGlzLmFkZElmTWlzc2luZygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBCYXNlTGluaztcbn0pKFNoYXBlKTtcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJCYXNlTGluay50c1wiLz5cbnZhciBDdXJ2ZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKEN1cnZlLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEN1cnZlKGNhbnZhcykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBjYW52YXMsIGNhbnZhcy5jcmVhdGVDdXJ2ZSgpKTtcbiAgICAgICAgdGhpcy5hcnJvdyA9IHRoaXMuY2FudmFzLmNyZWF0ZVBvbHlnb24oKTtcbiAgICB9XG4gICAgQ3VydmUucHJvdG90eXBlLmFkZEVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFkZEVsZW1lbnRzLmNhbGwodGhpcyk7XG4gICAgICAgIC8vIDJuZCBlbGVtZW50XG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEVsZW1lbnQodGhpcy5hcnJvdyk7XG4gICAgfTtcbiAgICBDdXJ2ZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgeCA9IHRoaXMuY2hpbGREb3QueDtcbiAgICAgICAgdmFyIHkgPSB0aGlzLmNoaWxkRG90Lnk7XG4gICAgICAgIHZhciBwYXJlbnRYID0gdGhpcy5wYXJlbnREb3QueDtcbiAgICAgICAgdmFyIHBhcmVudFkgPSB0aGlzLnBhcmVudERvdC55O1xuICAgICAgICB2YXIgY29sb3IgPSB0aGlzLmxpbmVDb2xvcjtcbiAgICAgICAgdmFyIGRpcmVjdGlvbiA9IHggPCBwYXJlbnRYID8gMSA6IC0xO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0U3RhcnRQb2ludFhZKHBhcmVudFgsIHBhcmVudFkgLSB0aGlzLnBhcmVudERvdC5oZWlnaHQgLyAyKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEVuZFBvaW50WFkoeCArIHRoaXMuY2hpbGREb3Qud2lkdGggLyAyICogZGlyZWN0aW9uLCB5KTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldENvbnRyb2wyUG9pbnRYWShwYXJlbnRYLCB5KTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldENvbnRyb2wxUG9pbnRYWShwYXJlbnRYLCB5KTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldFdlaWdodCgxKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldENvbG9yKGNvbG9yKTtcbiAgICAgICAgdGhpcy5hcnJvdy5nZXRTdHJva2UoKS5zZXRXZWlnaHQoMCk7XG4gICAgICAgIHRoaXMuYXJyb3cuZ2V0RmlsbCgpLnNldENvbG9yKGNvbG9yKTtcbiAgICAgICAgdGhpcy5hcnJvdy5jbGVhclBvaW50cygpO1xuICAgICAgICB0aGlzLmFycm93LmFkZFBvaW50WFkoMCwgMCk7XG4gICAgICAgIHRoaXMuYXJyb3cuYWRkUG9pbnRYWSg2LCAtNCk7XG4gICAgICAgIHRoaXMuYXJyb3cuYWRkUG9pbnRYWSg2LCA0KTtcbiAgICAgICAgLy8gTW92ZVx0XHRcdFx0XHRcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFycm93LmdldFBvaW50c0NvdW50KCk7IGkrKykge1xuICAgICAgICAgICAgdmFyIHB4ID0gdGhpcy5hcnJvdy5nZXRQb2ludEF0KGkpLlg7XG4gICAgICAgICAgICB2YXIgcHkgPSB0aGlzLmFycm93LmdldFBvaW50QXQoaSkuWTtcbiAgICAgICAgICAgIC8vdGhpcy5hcnJvdy5zZXRQb2ludFhZQXQocHgsIHB5ICsgeSwgaSk7XG4gICAgICAgICAgICB0aGlzLmFycm93LnNldFBvaW50WFlBdChweCAqIGRpcmVjdGlvbiArIHggKyB0aGlzLmNoaWxkRG90LndpZHRoIC8gMiAqIGRpcmVjdGlvbiwgcHkgKyB5LCBpKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEN1cnZlO1xufSkoQmFzZUxpbmspO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkJhc2VMaW5rLnRzXCIvPlxuLyoqXG4gKiBOZXcgdHlwZXNjcmlwdCBmaWxlXG4gKi9cbnZhciBTdHJhaWdodCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFN0cmFpZ2h0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN0cmFpZ2h0KGNhbnZhcykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBjYW52YXMsIGNhbnZhcy5jcmVhdGVMaW5lKCkpO1xuICAgIH1cbiAgICBTdHJhaWdodC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0U3RhcnRQb2ludFhZKHRoaXMucGFyZW50RG90LngsIHRoaXMucGFyZW50RG90LnkgLSB0aGlzLnBhcmVudERvdC5oZWlnaHQgLyAyKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEVuZFBvaW50WFkodGhpcy5jaGlsZERvdC54LCB0aGlzLmNoaWxkRG90LnkgKyB0aGlzLmNoaWxkRG90LmhlaWdodCAvIDIpO1xuICAgIH07XG4gICAgcmV0dXJuIFN0cmFpZ2h0O1xufSkoQmFzZUxpbmspO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNoYXBlLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkRvdC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJTdHJhaWdodC50c1wiLz5cbnZhciBDcmVhdGlvbiA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKENyZWF0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENyZWF0aW9uKGNhbnZhcykge1xuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBjYW52YXMsIGNhbnZhcy5jcmVhdGVMaW5lKCkpO1xuICAgICAgICB0aGlzLnNlY29uZExpbmUgPSBjYW52YXMuY3JlYXRlTGluZSgpO1xuICAgIH1cbiAgICBDcmVhdGlvbi5wcm90b3R5cGUuYWRkRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUuYWRkRWxlbWVudHMuY2FsbCh0aGlzKTtcbiAgICAgICAgLy8gMm5kIGVsZW1lbnRcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRWxlbWVudCh0aGlzLnNlY29uZExpbmUpOyAvLyBUT0Q6IGFkZCBsYXRlcj9cbiAgICB9O1xuICAgIENyZWF0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUudXBkYXRlLmNhbGwodGhpcyk7XG4gICAgICAgIC8vIEhvcml6b250YWwgZG90dGVkIGxpbmVcbiAgICAgICAgaWYgKHRoaXMucGFyZW50RG90LnggPCB0aGlzLmNoaWxkRG90LngpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5zZXRTdGFydFBvaW50WFkodGhpcy5wYXJlbnREb3QueCArIHRoaXMucGFyZW50RG90LndpZHRoIC8gMiwgdGhpcy5wYXJlbnREb3QueSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0U3RhcnRQb2ludFhZKHRoaXMucGFyZW50RG90LnggLSB0aGlzLnBhcmVudERvdC53aWR0aCAvIDIsIHRoaXMucGFyZW50RG90LnkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRFbmRQb2ludFhZKHRoaXMuY2hpbGREb3QueCwgdGhpcy5wYXJlbnREb3QueSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRXZWlnaHQoMSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXREYXNoU3R5bGUoanNnbC5EYXNoU3R5bGVzLkRBU0gpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuZ2V0U3Ryb2tlKCkuc2V0Q29sb3IodGhpcy5saW5lQ29sb3IpO1xuICAgICAgICAvLyBWZXJ0aWNhbCBsaW5lXG4gICAgICAgIHRoaXMuc2Vjb25kTGluZS5zZXRTdGFydFBvaW50WFkodGhpcy5jaGlsZERvdC54LCB0aGlzLnBhcmVudERvdC55KTtcbiAgICAgICAgdGhpcy5zZWNvbmRMaW5lLnNldEVuZFBvaW50WFkodGhpcy5jaGlsZERvdC54LCB0aGlzLmNoaWxkRG90LnkgKyB0aGlzLmNoaWxkRG90LmhlaWdodCAvIDIpO1xuICAgICAgICB0aGlzLnNlY29uZExpbmUuZ2V0U3Ryb2tlKCkuc2V0V2VpZ2h0KDEpO1xuICAgICAgICB0aGlzLnNlY29uZExpbmUuZ2V0U3Ryb2tlKCkuc2V0Q29sb3IodGhpcy5saW5lQ29sb3IpO1xuICAgIH07XG4gICAgcmV0dXJuIENyZWF0aW9uO1xufSkoQmFzZUxpbmspO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbmZpZy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21taXQudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicmVuZGVyaW5nL0N1cnZlLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInJlbmRlcmluZy9Eb3QudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicmVuZGVyaW5nL1N0cmFpZ2h0LnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInJlbmRlcmluZy9DcmVhdGlvbi50c1wiLz5cbi8qKlxuICogVmlldyBvZiB0aGUgQ29tbWl0XG4gKi9cbnZhciBDb21taXRWaWV3ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb21taXRWaWV3KGNhbnZhcywgY29uZmlnLCBjb21taXQpIHtcbiAgICAgICAgdGhpcy5saW5lcyA9IFtdO1xuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuY29tbWl0ID0gY29tbWl0O1xuICAgICAgICB0aGlzLmRvdCA9IG5ldyBEb3QodGhpcy5jYW52YXMpO1xuICAgIH1cbiAgICBDb21taXRWaWV3LnByb3RvdHlwZS5hZGRSZWxhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8vIERpcmVjdCBwYXJlbnRcbiAgICAgICAgaWYgKHRoaXMuY29tbWl0LmRpcmVjdHBhcmVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICB2YXIgZHBsO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tbWl0LmdldExhbmUoKSA9PSB0aGlzLmNvbW1pdC5kaXJlY3RwYXJlbnQuZ2V0TGFuZSgpIHx8IHRoaXMuY29tbWl0LmRpcmVjdHBhcmVudC5vdXRPZlNjb3BlKSB7XG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0IHBhcmVudCBpcyB0aGUgc2FtZSBYL2xhbmUsIHRoaXMgbWVhbnMgaXQgaXMgYSBzdGFuZGFyZCBmb3J3YXJkIGNvbW1pdCBcbiAgICAgICAgICAgICAgICBkcGwgPSBuZXcgU3RyYWlnaHQodGhpcy5jYW52YXMpLmZyb20odGhpcy5jb21taXQuZGlyZWN0cGFyZW50LnZpZXcuZG90KS50byh0aGlzLmRvdCkuY29sb3IodGhpcy5jb21taXQuZ2V0Q29sb3IoMjApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIGRpcmVjdCBwYXJlbnQgaXMgb24gYSBkaWZmZXJlbnQgbGFuZSwgdGhpcyBpcyBtb3N0IGNlcnRhaW5seSBhIG5ldyBicmFuY2ggXG4gICAgICAgICAgICAgICAgZHBsID0gbmV3IENyZWF0aW9uKHRoaXMuY2FudmFzKS5mcm9tKHRoaXMuY29tbWl0LmRpcmVjdHBhcmVudC52aWV3LmRvdCkudG8odGhpcy5kb3QpLmNvbG9yKHRoaXMuY29tbWl0LmdldENvbG9yKDMwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmxpbmVzLnB1c2goZHBsKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWxsbWVyZ2VzID0gdGhpcy5jb21taXQubWVyZ2VzLnN0YW5kYXJkLmNvbmNhdCh0aGlzLmNvbW1pdC5tZXJnZXMuYW5vbnltb3VzKTtcbiAgICAgICAgYWxsbWVyZ2VzLmZvckVhY2goZnVuY3Rpb24gKG1lcmdlKSB7XG4gICAgICAgICAgICBfdGhpcy5saW5lcy5wdXNoKG5ldyBDdXJ2ZShfdGhpcy5jYW52YXMpXG4gICAgICAgICAgICAgICAgLmZyb20obWVyZ2Uuc291cmNlLnZpZXcuZG90KVxuICAgICAgICAgICAgICAgIC50byhfdGhpcy5kb3QpXG4gICAgICAgICAgICAgICAgLmNvbG9yKG1lcmdlLnNvdXJjZS5nZXRDb2xvcigzNSkpKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAvKiogY2FsY3VsYXRlIHRoZSBwb3NpdGlvbnMgYmFzZWQgb24gbW9kZWwgYW5kIHVwZGF0ZSB0aGUgc2hhcGVzICovXG4gICAgQ29tbWl0Vmlldy5wcm90b3R5cGUucmVkcmF3ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRvdFxuICAgICAgICAgICAgLmF0KHRoaXMuY29tbWl0LmdldFgoKSwgdGhpcy5jb21taXQuZ2V0WSgpKVxuICAgICAgICAgICAgLnNpemUodGhpcy5jb25maWcuZG90V2lkdGgsIHRoaXMuY29uZmlnLmRvdEhlaWdodClcbiAgICAgICAgICAgIC5jb2xvcih0aGlzLmNvbW1pdC5nZXRDb2xvcigyMCksIHRoaXMuY29tbWl0LmdldENvbG9yKDgwKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tbWl0Vmlldztcbn0pKCk7XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQnJhbmNoLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkdpdGxpbmUudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tbWl0Vmlldy50c1wiLz5cbi8qKiBjb21taXR0ZXIgb3IgYXV0aG9yICovXG52YXIgSWRlbnRpdHkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIElkZW50aXR5KG5hbWUsIGVtYWlsLCBkYXRlKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuZW1haWwgPSBlbWFpbDtcbiAgICAgICAgdGhpcy5kYXRlID0gZGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIElkZW50aXR5O1xufSkoKTtcbnZhciBDb21taXQgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbW1pdChjb250YWluZXIsIGRhdGEpIHtcbiAgICAgICAgdGhpcy53YXJuaW5ncyA9IFtdO1xuICAgICAgICB0aGlzLmluSGVhZHNSZWYgPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnRzID0gW107XG4gICAgICAgIHRoaXMuY2hpbGRzID0gW107XG4gICAgICAgIHRoaXMuc2libGluZ3MgPSBbXTtcbiAgICAgICAgdGhpcy5vdXRPZlNjb3BlID0gZmFsc2U7IC8vIFRoaXMgY29tbWl0IHdhcyBub3QgcGFydCBvZiB0aGUgbG9ncyBzY29wZSwgYnV0IGlzIHJlZmVyZW5jZWQgYnkgYW5vdGhlciBjb21taXQuXG4gICAgICAgIHRoaXMubWVyZ2VzID0geyBzdGFuZGFyZDogW10sIGFub255bW91czogW10gfTtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIC8vIHJlZmVyZW5jZSB0aGUgZGF0YSBiYWNrIHRvIHRoZSBvYmplY3RcbiAgICAgICAgdGhpcy5kYXRhLm9iaiA9IHRoaXM7XG4gICAgICAgIGlmIChkYXRhLmluSGVhZHMgPT0gbnVsbClcbiAgICAgICAgICAgIGRhdGEuaW5IZWFkcyA9IFtdO1xuICAgICAgICBpZiAoZGF0YS5wYXJlbnRoYXNoZXMgPT0gbnVsbClcbiAgICAgICAgICAgIGRhdGEucGFyZW50aGFzaGVzID0gW107XG4gICAgICAgIGlmIChkYXRhLnJlZm5hbWVzID09IG51bGwpXG4gICAgICAgICAgICBkYXRhLnJlZm5hbWVzID0gW107XG4gICAgICAgIHRoaXMuc2hhID0gZGF0YS5zaGE7XG4gICAgICAgIHRoaXMuc3NoYSA9IGRhdGEuc3NoYTtcbiAgICAgICAgdGhpcy5zdWJqZWN0ID0gZGF0YS5zdWJqZWN0O1xuICAgICAgICB0aGlzLmluZGV4WSA9IGNvbnRhaW5lci5tYXhJbmRleFkrKztcbiAgICAgICAgdGhpcy5jb21taXR0ZXIgPSBuZXcgSWRlbnRpdHkodGhpcy5kYXRhLmNvbW1pdHRlcm5hbWUsIHRoaXMuZGF0YS5jb21taXR0ZXJlbWFpbCwgbmV3IERhdGUodGhpcy5kYXRhLmNvbW1pdHRlcmRhdGUpLmdldFRpbWUoKSk7XG4gICAgICAgIHRoaXMuYXV0aG9yID0gbmV3IElkZW50aXR5KHRoaXMuZGF0YS5hdXRob3JuYW1lLCB0aGlzLmRhdGEuYXV0aG9yZW1haWwsIG5ldyBEYXRlKHRoaXMuZGF0YS5hdXRob3JkYXRlKS5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICBDb21taXQucHJvdG90eXBlLmdldFNob3J0U2hhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zc2hhO1xuICAgIH07XG4gICAgQ29tbWl0LnByb3RvdHlwZS5nZXRGdWxsU2hhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGE7XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmluaXRSZWxhdGlvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5kYXRhLnBhcmVudGhhc2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChoYXNoKSB7XG4gICAgICAgICAgICB2YXIgcGFyZW50Q29tbWl0ID0gX3RoaXMuY29udGFpbmVyLmNvbW1pdHNbaGFzaF07XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSB2aXJ0dWFsIGNvbW1pdFxuICAgICAgICAgICAgaWYgKHBhcmVudENvbW1pdCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50Q29tbWl0ID0gbmV3IENvbW1pdChfdGhpcy5jb250YWluZXIsIHsgc2hhOiBoYXNoICsgTWF0aC5yYW5kb20oKSB9KTtcbiAgICAgICAgICAgICAgICBwYXJlbnRDb21taXQub3V0T2ZTY29wZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2VsZi5jb250YWluZXIuYWRkQ29tbWl0KHBhcmVudENvbW1pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5wYXJlbnRzLnB1c2gocGFyZW50Q29tbWl0KTtcbiAgICAgICAgICAgIHBhcmVudENvbW1pdC5jaGlsZHMucHVzaChfdGhpcyk7XG4gICAgICAgICAgICBfdGhpcy5zaWJsaW5ncyA9IHBhcmVudENvbW1pdC5jaGlsZHM7IC8vIHRoaXMgd2lsbCBiZSBvdmVyd2l0dGVuIGFzIG5ldyBjaGlsZHMgYXJlIGZvdW5kXG4gICAgICAgICAgICBpZiAoX3RoaXMucGFyZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRwID0gX3RoaXMucGFyZW50c1swXTtcbiAgICAgICAgICAgICAgICBfdGhpcy5kaXJlY3RwYXJlbnQgPSBkcDtcbiAgICAgICAgICAgICAgICBkcC5kaXJlY3RjaGlsZCA9IF90aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5kYXRhLmluSGVhZHMuZm9yRWFjaChmdW5jdGlvbiAoaGVhZHNoYSkge1xuICAgICAgICAgICAgdmFyIGNvbW1pdCA9IF90aGlzLmNvbnRhaW5lci5jb21taXRzW2hlYWRzaGFdO1xuICAgICAgICAgICAgaWYgKF90aGlzLmluSGVhZHNSZWYuaW5kZXhPZihjb21taXQpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pbkhlYWRzUmVmLnB1c2goY29tbWl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmluaXREZWZhdWx0QnJhbmNoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29tbWl0ID0gdGhpcztcbiAgICAgICAgd2hpbGUgKGNvbW1pdCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBHVUVTU0lORzogVGhlIGNvcnJlY3QgYnJhbmNoIGlzIHVzdWFsbHkgdGhlIG9uZSB3aXRoIHRoZSBsZWFzdCBzcGVjaWZpYyBuYW1lXG4gICAgICAgICAgICBpZiAoY29tbWl0LmJyYW5jaCA9PSBudWxsIHx8IGNvbW1pdC5icmFuY2guc3BlY2lmaXR5ID4gdGhpcy5icmFuY2guc3BlY2lmaXR5KSB7XG4gICAgICAgICAgICAgICAgY29tbWl0LmJyYW5jaCA9IHRoaXMuYnJhbmNoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29tbWl0LmJyYW5jaC5zdGFydCA9IGNvbW1pdDsgLy8gdGhpcyBmdW5jdGlvbiB3aWxsIHRyYXZlcnNlIHRoZSBwYXJlbnRzLCBzbyB0aGUgbGFzdCBvbmUgd2lsbCBiZSB0aGUgZmlyc3QgY29tbWl0XG4gICAgICAgICAgICBjb21taXQuYnJhbmNoLm9yaWdpbiA9IGNvbW1pdC5kaXJlY3RwYXJlbnQ7IC8vIHRoaXMgY291bGQgYmUgbnVsbCAtPiBpdCBpcyBvdXRzaWRlIG9mIHRoZSBoaXN0b3J5LlxuICAgICAgICAgICAgY29tbWl0ID0gY29tbWl0LmRpcmVjdHBhcmVudDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29tbWl0LnByb3RvdHlwZS5pbml0SGVhZFNwZWNpZml0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmRhdGEucmVmbmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByZWZuYW1lID0gdGhpcy5kYXRhLnJlZm5hbWVzW2ldO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lci5jb25maWcucmVtb3RlT25seSB8fCByZWZuYW1lLmluZGV4T2YoXCJvcmlnaW4vXCIpID09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250YWluZXIuY29uZmlnLnJlbW90ZU9ubHkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmbmFtZSA9IHJlZm5hbWUucmVwbGFjZSgvXm9yaWdpbi4vLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBzcGVjaWZpdHkgPSByZWZuYW1lLnJlcGxhY2UoL1teXFwvLV0vZywgJycpLmxlbmd0aCAqIDEwMDA7XG4gICAgICAgICAgICAgICAgc3BlY2lmaXR5ICs9IHJlZm5hbWUucmVwbGFjZSgvW15hLXpBLVowLTktXS8sICcnKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQnJhbmNoKHJlZm5hbWUsIHRoaXMsIHNwZWNpZml0eSk7XG4gICAgICAgICAgICAgICAgLyogYXNzaWduIHRoZSBtb3N0IHNwZWNpZmljIGhlYWQgb24gdGhpcyB0aXAgY29tbWl0ICovXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4U3BlY2lmaXR5ID09IG51bGwgfHwgc3BlY2lmaXR5IDwgdGhpcy5tYXhTcGVjaWZpdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLmRlYnVnKFwiYXNzaWduaW5nIGJyYW5jaFwiLCByZWZuYW1lLCB0aGlzLnNoYSwgdGhpcy5tYXhTcGVjaWZpdHksIHNwZWNpZml0eSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWF4U3BlY2lmaXR5ID0gc3BlY2lmaXR5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmJyYW5jaCA9IHRoaXMuY29udGFpbmVyLmhlYWRzTWFwW3JlZm5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmluaXREZWZhdWx0QnJhbmNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuaW5pdE1lcmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5tZXJnZXMgPSB7IHN0YW5kYXJkOiBbXSwgYW5vbnltb3VzOiBbXSB9O1xuICAgICAgICB0aGlzLndhcm5pbmdzID0gW107XG4gICAgICAgIC8vIERldGVjdCBhIG1lcmdlIChvY3RvcHVzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkKVxuICAgICAgICBpZiAodGhpcy5wYXJlbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICB2YXIgZHAgPSB0aGlzLnBhcmVudHNbMF07XG4gICAgICAgICAgICB0aGlzLmRpcmVjdHBhcmVudCA9IGRwO1xuICAgICAgICAgICAgZHAuZGlyZWN0Y2hpbGQgPSB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBhcmVudHMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgICAgIHZhciBkcCA9IHRoaXMucGFyZW50c1swXTtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0cGFyZW50ID0gZHA7XG4gICAgICAgICAgICBkcC5kaXJlY3RjaGlsZCA9IHRoaXM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRoaXMucGFyZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBtcCA9IHRoaXMucGFyZW50c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAobXAgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDbHVlcyBpZiB0aGlzIGlzIGEgc3RhbmRhcmQgb3IgYW5vbnltb3VzIG1lcmdlXG4gICAgICAgICAgICAgICAgICAgIGlmIChtcC5kYXRhLnJlZm5hbWVzLmxlbmd0aCA+IDAgLy8gVGhpcyBpcyBzdGFuZGFyZCBtZXJnZSB3aXRoIG1wcyBoZWFkXG4gICAgICAgICAgICAgICAgICAgICAgICB8fCBtcC5pbkhlYWRzUmVmLmxlbmd0aCAhPSBkcC5pbkhlYWRzUmVmLmxlbmd0aCAvLyBUaGUgaGVhZHMgb2YgYm90aCBhcmUgZGlmZmVyZW50XG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZXMuc3RhbmRhcmQucHVzaCh7IHNvdXJjZTogbXAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgYW5vbnltb3VzIChhdXRvbWF0aWMpIG1lcmdlIG9uIHRoZSBzYW1lIGJyYW5jaFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXJnZXMuYW5vbnltb3VzLnB1c2goeyBzb3VyY2U6IG1wIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0QW5vbnltb3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuaW5pdEFub255bW91cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZHVtbXkgYnJhbmNoIGZvciBhbm9ueW1vdXMgbWVyZ2VzLCB3aGljaCBpcyBhcyBzcGVjaWZpYyBhcyB0aGUgb3JpZ2luYWwgYnJhbmNoLiBcbiAgICAgICAgLy8gdHJ5IGZpbmRpbmcgdGhlIG9yaWdpbmFsIGJyYW5jaCBieSBnb2luZyB1cCBkaXJlY3QgY2hpbGRzLCB3aGljaCB3aWxsIGdldCB0aGUgb3JpZ2luYWxcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLm1lcmdlcy5hbm9ueW1vdXMuZm9yRWFjaChmdW5jdGlvbiAoX21lcmdlKSB7XG4gICAgICAgICAgICB2YXIgbWVyZ2UgPSBfbWVyZ2Uuc291cmNlO1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gX3RoaXM7XG4gICAgICAgICAgICB3aGlsZSAoY2hpbGQgIT0gbnVsbCAmJiBjaGlsZC5icmFuY2ggPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGNoaWxkID0gY2hpbGQuZGlyZWN0Y2hpbGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiB0aGlzIGlzIG9ubHkgYW4gYW5vbnltb3VzIGJyYW5jaCBoZWFkLCBpZiB0aGVyZSBpcyBvbmx5IG9uZSBjaGlsZCAodGhlIG1lcmdlKVxuICAgICAgICAgICAgICAgVE9ETzogaWYgdGhlcmUgYXJlIG11bHRpcGxlLCBpdCBtaWdodCByZXN1bHQgaW4gd3JvbmdseSBhc3NpZ25lZCBicmFuY2hlcyAqL1xuICAgICAgICAgICAgaWYgKGNoaWxkICE9IG51bGwgJiYgbWVyZ2UuYnJhbmNoID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtZXJnZS5icmFuY2ggPSBuZXcgQnJhbmNoKGNoaWxkLmJyYW5jaC5yZWYgKyBcIi9hbm9ueW1vdXNcIiArIG1lcmdlLnNoYSArIE1hdGgucmFuZG9tKCksIG1lcmdlLCBjaGlsZC5icmFuY2guc3BlY2lmaXR5ICsgMSk7XG4gICAgICAgICAgICAgICAgbWVyZ2UuYnJhbmNoLmFub255bW91cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgbWVyZ2UuYnJhbmNoLnBhcmVudCA9IGNoaWxkLmJyYW5jaDtcbiAgICAgICAgICAgICAgICBtZXJnZS5icmFuY2guc3RhcnQgPSBjaGlsZDtcbiAgICAgICAgICAgICAgICBtZXJnZS5icmFuY2guY2F0ZWdvcnkgPSBjaGlsZC5icmFuY2guY2F0ZWdvcnk7XG4gICAgICAgICAgICAgICAgX3RoaXMuY29udGFpbmVyLmhlYWRzTWFwW21lcmdlLmJyYW5jaC5yZWZdID0gbWVyZ2UuYnJhbmNoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuZ2V0Q29sb3IgPSBmdW5jdGlvbiAobGlnaHRuZXNzKSB7XG4gICAgICAgIGlmICh0aGlzLmJyYW5jaCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLndhcm4oXCJObyBCcmFuY2ggc2V0XCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLmJyYW5jaDtcbiAgICAgICAgICAgIGlmICh0aGlzLmJyYW5jaC5hbm9ueW1vdXMpIHtcbiAgICAgICAgICAgICAgICBiID0gdGhpcy5icmFuY2gucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGh1ZSA9IGIubGFuZSAqIDMwMCAvIHRoaXMuY29udGFpbmVyLm1heFg7XG4gICAgICAgICAgICByZXR1cm4gXCJoc2woXCIgKyBodWUgKyBcIiwgMTAwJSwgXCIgKyBsaWdodG5lc3MgKyBcIiUpXCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuaGFzTWVyZ2VzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXJnZXMuc3RhbmRhcmQubGVuZ3RoID4gMCB8fCB0aGlzLm1lcmdlcy5hbm9ueW1vdXMubGVuZ3RoID4gMDtcbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGluZGV4VG9YKHRoaXMuZ2V0TGFuZSgpKTtcbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuZ2V0WSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMub3V0T2ZTY29wZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLnJvb3RMYWJlbC5vZmZzZXRUb3AgKyAyMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmxhYmVsLm9mZnNldFRvcCAtIHRoaXMuY29udGFpbmVyLmZpcnN0Q29tbWl0LnZpZXcubGFiZWwub2Zmc2V0VG9wICsgdGhpcy52aWV3LmxhYmVsLm9mZnNldEhlaWdodCAvIDI7XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmdldE9yaWdpbkluZGV4WSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuYnJhbmNoLm9yaWdpbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJyYW5jaC5vcmlnaW4uZ2V0SW5kZXhZKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5icmFuY2guc3RhcnQub3V0T2ZTY29wZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyLm1heEluZGV4WTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJyYW5jaC5zdGFydC5pbmRleFk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuaW50ZXJzZWN0cyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgICAgICB2YXIgb3RoZXJZID0gOTk5OTk5OSwgdGhpc1kgPSA5OTk5OTk7XG4gICAgICAgIGlmICh0aGlzLm91dE9mU2NvcGUgfHwgb3RoZXIub3V0T2ZTY29wZSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAob3RoZXIuZGlyZWN0Y2hpbGQgIT0gbnVsbCkge1xuICAgICAgICAgICAgb3RoZXJZID0gb3RoZXIuZGlyZWN0Y2hpbGQuaW5kZXhZO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRpcmVjdGNoaWxkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXNZID0gdGhpcy5kaXJlY3RjaGlsZC5pbmRleFk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JpZ2luSW5kZXhZKCkgPj0gTWF0aC5taW4ob3RoZXIuaW5kZXhZLCBvdGhlclkpICYmIE1hdGgubWluKHRoaXNZLCB0aGlzLmluZGV4WSkgPD0gb3RoZXIuZ2V0T3JpZ2luSW5kZXhZKCk7XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmdldEluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmluZGV4O1xuICAgIH07XG4gICAgQ29tbWl0LnByb3RvdHlwZS5nZXRJbmRleFkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4WTtcbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uICh3YXJuaW5nKSB7XG4gICAgICAgIHRoaXMud2FybmluZ3MucHVzaCh3YXJuaW5nKTtcbiAgICAgICAgdGhpcy5kZWJ1Zyh3YXJuaW5nKTtcbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuZGVidWcgPSBmdW5jdGlvbiAod2FybmluZykge1xuICAgICAgICBpZiAoY29uc29sZSkge1xuICAgICAgICAgICAgTG9nZ2VyLmRlYnVnKHdhcm5pbmcsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmdldExhbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmJyYW5jaCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5icmFuY2guY29tbWl0LmJyYW5jaC5sYW5lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIENvbW1pdDtcbn0pKCk7XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tbWl0LnRzXCIvPlxudmFyIEJyYW5jaCA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQnJhbmNoKHJlZm5hbWUsIGNvbW1pdCwgc3BlY2lmaXR5KSB7XG4gICAgICAgIHRoaXMucmVmID0gcmVmbmFtZTtcbiAgICAgICAgdGhpcy5jb21taXQgPSBjb21taXQ7XG4gICAgICAgIHRoaXMuc3BlY2lmaXR5ID0gc3BlY2lmaXR5O1xuICAgICAgICB0aGlzLnNob3J0bmFtZSA9IHJlZm5hbWUuc3BsaXQoXCJAXCIpWzBdO1xuICAgICAgICB0aGlzLmNhdGVnb3J5ID0gdGhpcy5zaG9ydG5hbWUuc3Vic3RyaW5nKDAsIHRoaXMuc2hvcnRuYW1lLmxhc3RJbmRleE9mKFwiL1wiKSk7XG4gICAgfVxuICAgIHJldHVybiBCcmFuY2g7XG59KSgpO1xuXG4iLCIvKipcclxuICogTmV3IHR5cGVzY3JpcHQgZmlsZVxyXG4gKi9cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0NvbW1pdFByb3ZpZGVyLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vR2l0bGluZS50c1wiLz5cclxuZGVjbGFyZSB2YXIgalF1ZXJ5OiBhbnk7XHJcbmRlY2xhcmUgdmFyIExvZ2dlcjogYW55O1xyXG5cclxuY2xhc3MgTG9jYWxHaXQySnNvblByb3ZpZGVyIGV4dGVuZHMgQ29tbWl0UHJvdmlkZXIge1xyXG5cdFxyXG5cdHB1YmxpYyBvblJlcXVlc3RlZCh1cmw6IHN0cmluZykge1xyXG5cdFx0XHJcblx0XHRqUXVlcnkuZ2V0SlNPTih1cmwsIHt9LCAoanNvbikgPT4ge1xyXG5cdFx0XHR0aGlzLndoZW5Eb25lKGpzb24pO1xyXG5cdFx0fSkuZXJyb3IoZnVuY3Rpb24oKSB7XHJcblx0XHRcdEdpdGxpbmUuZGlzcGxheUZhdGFsRXJyb3IoXCJFcnJvciBsb2FkaW5nIGdpdCBkYXRhIGZyb20gXCIrdXJsKyBcIiBjcmVhdGUgaXQgdXNpbmcgZ2l0Mmpzb25cIik7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0iLCIvKipcclxuICogR2l0aHViIGNvbW1pdCBwcm92aWRlci4gb25seSB3b3JrcyBpZiB0aGVyZSBpcyBhbmQgYWNjZXNzdG9rZW4gY29uZmlndXJlZCBpbiB0aGUgYnJvd3NlclxyXG4gKi9cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0NvbW1pdFByb3ZpZGVyLnRzXCIvPlxyXG5kZWNsYXJlIHZhciBqUXVlcnk6IGFueTtcclxuZGVjbGFyZSB2YXIgTG9nZ2VyOiBhbnk7XHJcblxyXG5jbGFzcyBHaXRodWJDb21taXRQcm92aWRlciBleHRlbmRzIENvbW1pdFByb3ZpZGVyIHtcclxuXHJcblx0cHJpdmF0ZSBmb3JrczogYW55W10gPSBbXTtcclxuXHRwcml2YXRlIGJhc2VDb21taXRzOiBhbnlbXTtcclxuXHRwcml2YXRlIGJhc2VCcmFuY2hlczogYW55W10gPSBbXTtcclxuXHRwcml2YXRlIGRhdGEgOiB7fSA9IHt9O1xyXG5cdFx0XHJcblx0cHJpdmF0ZSBsaW1pdDtcclxuXHRwcml2YXRlIGFjY2Vzc1Rva2VuOiBzdHJpbmc7XHJcblx0cHJpdmF0ZSBkb25lOiBib29sZWFuID0gZmFsc2U7XHJcblx0XHJcblx0cHVibGljIG9idGFpbkFjY2Vzc1Rva2VuKGNhbGxiYWNrOiBGdW5jdGlvbikge1xyXG5cdFx0aWYod2luZG93LmxvY2FsU3RvcmFnZSkge1xyXG5cdFx0XHR0aGlzLmFjY2Vzc1Rva2VuID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZ2l0aHViLWFjY2Vzc3Rva2VuXCIpO1xyXG5cdFx0XHR0aGlzLmxpbWl0ID0gNTAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmKHRoaXMuYWNjZXNzVG9rZW4gPT0gbnVsbCkge1xyXG5cdFx0XHR3aW5kb3cuYWxlcnQoXCJObyBhY2Nlc3MgdG9rZW4gdG8gZ2l0aHViIGRlZmluZWQuIHNlZSBsb2dcIik7XHJcblx0XHRcdExvZ2dlci5kZWJ1Zygnd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiZ2l0aHViLWFjY2Vzc3Rva2VuXCIsIFwiVE9LRU5cIiknKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNhbGxiYWNrKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgZ2l0VVJMKHVybDogc3RyaW5nLCBhcGk6IHN0cmluZywgcGFyYW1zOiBzdHJpbmcgPSBcIlwiKSB7XHJcblxyXG5cdFx0Ly8gY29udmVydCB0byBhcGkgdXJsIGFuZCByZW1vdmUgdHJhaWxpbmcgL1xyXG5cdFx0aWYodXJsLmluZGV4T2YoXCJhcGkuZ2l0aHViLmNvbVwiKSA9PSAtMSkge1xyXG5cdFx0XHR1cmwgPSB1cmwucmVwbGFjZSgvLipnaXRodWIuY29tLywgXCJodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL1wiKS5yZXBsYWNlKC9cXC9cXC8vZywgXCIvXCIpO1xyXG5cdFx0XHRcdFxyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHVybCArIFwiL1wiK2FwaStcIj9hY2Nlc3NfdG9rZW49XCIrdGhpcy5hY2Nlc3NUb2tlbitcIiZwZXJfcGFnZT1cIit0aGlzLmxpbWl0K1wiJmNhbGxiYWNrPT8mXCIrcGFyYW1zO1xyXG5cdH1cclxuXHJcblx0cHVibGljIG9uUmVxdWVzdGVkKHVybDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLm9idGFpbkFjY2Vzc1Rva2VuKCgpID0+IHtcclxuXHRcdFx0dGhpcy5sb2FkRm9ya3ModXJsKVxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBsb2FkRm9ya3ModXJsOiBzdHJpbmcpIHtcclxuXHRcdGpRdWVyeS53aGVuKFxyXG5cdFx0XHRcdGpRdWVyeS5nZXRKU09OKHRoaXMuZ2l0VVJMKHVybCwgXCJmb3Jrc1wiKSksXHJcblx0XHRcdFx0alF1ZXJ5LmdldEpTT04odGhpcy5naXRVUkwodXJsLCBcImJyYW5jaGVzXCIpKVxyXG5cdFx0XHQpLnRoZW4oIChmb3JrcywgYnJhbmNoZXMpID0+IHtcclxuXHRcdFx0XHQvL3RoaXMuYmFzZUNvbW1pdHMgPSBjb21taXRzWzBdLmRhdGE7XHJcblx0XHRcdFx0dGhpcy5wcm9jZXNzQnJhbmNoZXModXJsLCBicmFuY2hlc1swXS5kYXRhKTtcclxuXHRcdFx0XHR0aGlzLmZvcmtzID0gZm9ya3NbMF0uZGF0YTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLmxvYWRCcmFuY2hlcygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFxyXG5cdH1cclxuXHJcblx0cHVibGljIHByb2Nlc3NCcmFuY2hlcyhmb3JrLCBkYXRhKSB7XHJcblx0XHRkYXRhLmZvckVhY2goYnJhbmNoID0+IHtcclxuXHRcdFx0YnJhbmNoLnJlcG8gPSBmb3JrLnVybCAhPT0gdW5kZWZpbmVkID8gZm9yay51cmwgOiBmb3JrO1xyXG5cdFx0XHRpZihmb3JrLmZ1bGxfbmFtZSAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0YnJhbmNoLm5hbWUgPSBicmFuY2gubmFtZSArIFwiQFwiICsgZm9yay5mdWxsX25hbWU7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5iYXNlQnJhbmNoZXMucHVzaChicmFuY2gpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBsb2FkQnJhbmNoZXMoKSB7XHJcblx0XHR2YXIgZm9ya1JlcXVlc3RzID0gdGhpcy5mb3Jrcy5tYXAoZm9yayA9PiB7cmV0dXJuIGpRdWVyeS5nZXRKU09OKHRoaXMuZ2l0VVJMKGZvcmsudXJsLCBcImJyYW5jaGVzXCIpLCBkYXRhID0+IHtcclxuXHRcdFx0TG9nZ2VyLmRlYnVnKFwibG9hZGVkIGJyYW5jaGVzIGZvciBcIitmb3JrLm5hbWUpO1xyXG5cdFx0XHR0aGlzLnByb2Nlc3NCcmFuY2hlcyhmb3JrLCBkYXRhLmRhdGEpO1xyXG5cdFx0fSl9KTtcclxuXHRcdGpRdWVyeS53aGVuLmFwcGx5KGpRdWVyeSwgZm9ya1JlcXVlc3RzKS5kb25lKCgpID0+IHtcclxuXHRcdFx0TG9nZ2VyLmRlYnVnKFwiYWxsIGJyYW5jaGVzIGxvYWRlZFwiKTtcclxuXHRcdFx0dGhpcy5sb2FkQ29tbWl0cygpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBsb2FkQ29tbWl0cygpIHtcclxuXHRcdHZhciBjb21taXRSZXF1ZXN0cyA9IFtdO1xyXG5cdFx0dGhpcy5iYXNlQnJhbmNoZXMuZm9yRWFjaChiID0+IHtcclxuXHRcdFx0dmFyIGNvbW1pdCA9IHRoaXMuZGF0YVtiLmNvbW1pdC5zaGFdO1xyXG5cdFx0XHRpZihjb21taXQgPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0Y29tbWl0UmVxdWVzdHMucHVzaChcclxuXHRcdFx0XHRcdGpRdWVyeS5nZXRKU09OKHRoaXMuZ2l0VVJMKGIucmVwbywgXCJjb21taXRzXCIsIFwic2hhPVwiK2IuY29tbWl0LnNoYSksIGRhdGEgPT4ge1xyXG5cdFx0XHRcdFx0XHRMb2dnZXIuZGVidWcoXCJsb2FkZWQgY29tbWl0cyBmb3IgXCIrYi5uYW1lKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5wcm9jZXNzQ29tbWl0cyhkYXRhLmRhdGEpO1xyXG5cdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0alF1ZXJ5LndoZW4uYXBwbHkoalF1ZXJ5LCBjb21taXRSZXF1ZXN0cykuZG9uZSgoKSA9PiB7XHJcblx0XHRcdHRoaXMucHJvY2VzcygpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBwcm9jZXNzQ29tbWl0cyhkYXRhKSB7XHJcblx0XHRkYXRhLm1hcChkYXRhID0+IHtcclxuXHRcdFx0dmFyIGM6YW55ID0ge307XHJcblx0XHRcdGMuc2hhID0gZGF0YS5zaGE7XHJcblx0XHRcdGMuc3NoYSA9IGRhdGEuc2hhLnN1YnN0cmluZygwLDgpO1xyXG5cdFx0XHRjLnBhcmVudGhhc2hlcyA9ICg8YW55W10+IGRhdGEucGFyZW50cykubWFwKHggPT4geyByZXR1cm4geC5zaGF9KTtcdFx0XHRcclxuXHRcdFx0Yy5hdXRob3JuYW1lID0gZGF0YS5jb21taXQuYXV0aG9yLm5hbWU7XHJcblx0XHRcdGMuYXV0aG9yZW1haWwgPSBkYXRhLmNvbW1pdC5hdXRob3IuZW1haWw7XHJcblx0XHRcdGMuYXV0aG9yZGF0ZSA9IGRhdGEuY29tbWl0LmF1dGhvci5kYXRlO1xyXG5cdFx0XHRjLmF1dGhvcnRpbWVzdGFtcCA9IG5ldyBEYXRlKGRhdGEuY29tbWl0LmF1dGhvci5kYXRlKS5nZXRUaW1lKCk7XHJcblx0XHRcdFxyXG5cdFx0XHRjLmNvbW1pdHRlcm5hbWUgPSBkYXRhLmNvbW1pdC5jb21taXR0ZXIubmFtZTtcclxuXHRcdFx0Yy5jb21taXR0ZXJlbWFpbCA9IGRhdGEuY29tbWl0LmNvbW1pdHRlci5lbWFpbDtcclxuXHRcdFx0Yy5jb21taXR0ZXJkYXRlID0gZGF0YS5jb21taXQuY29tbWl0dGVyLmRhdGU7XHJcblx0XHRcdGMuY29tbWl0dGVydGltZXN0YW1wID0gbmV3IERhdGUoZGF0YS5jb21taXQuY29tbWl0dGVyLmRhdGUpLmdldFRpbWUoKTtcclxuXHRcclxuXHRcdFx0Yy5zdWJqZWN0ID0gZGF0YS5jb21taXQubWVzc2FnZTtcclxuXHRcdFx0Yy5ib2R5ID0gXCJcIjsgLy8gVG9kbzogd2hlcmUgdG8gZ2V0IHRoaXM/XHJcblx0XHRcdGMucmVmbmFtZXMgPSBbXTsgLy8gc2V0IHdoZW4gcGFyc2luZyBicmFuY2hlc1xyXG5cdFx0XHRjLmluSGVhZHMgPSBbXTsgLy8gc2V0IHdoZW4gcGFyc2luZyBicmFuY2hlc1xyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIGM7XHJcblx0XHR9KS5mb3JFYWNoKGNvbW1pdCA9PiB7XHJcblx0XHRcdHRoaXMuZGF0YVtjb21taXQuc2hhXSA9IGNvbW1pdDtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cclxuXHRwdWJsaWMgcHJvY2VzcygpIHtcclxuXHRcdHRoaXMuYmFzZUJyYW5jaGVzLmZvckVhY2goYiA9PiB7XHJcblx0XHRcdHZhciBjb21taXQgPSB0aGlzLmRhdGFbYi5jb21taXQuc2hhXTtcclxuXHRcdFx0aWYoY29tbWl0ID09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdC8vIGNvbW1pdCBtaXNzaW5nIGZvciBicmFuY2ggLSBUT0RPOiBmZXRjaCBpdFxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGIuYXNzaWduZWQgPSB0cnVlO1xyXG5cdFx0XHRcdGNvbW1pdC5yZWZuYW1lcy5wdXNoKGIubmFtZSk7XHJcblx0XHRcdFx0dGhpcy5hc3NpZ25IZWFkcyhjb21taXQpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gU29ydFxyXG5cdFx0dmFyIG5ld2RhdGEgPSB7fTtcclxuXHRcdE9iamVjdC5rZXlzKHRoaXMuZGF0YSkuc29ydCgoYSxiKSA9PiB7XHJcblx0XHRcdHJldHVybiB0aGlzLmRhdGFbYl0uY29tbWl0dGVydGltZXN0YW1wIC0gdGhpcy5kYXRhW2FdLmNvbW1pdHRlcnRpbWVzdGFtcDtcclxuXHRcdH0pLmZvckVhY2goc2hhID0+IHtcclxuXHRcdFx0bmV3ZGF0YVtzaGFdID0gdGhpcy5kYXRhW3NoYV07XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0XHJcblx0XHR0aGlzLndoZW5Eb25lKG5ld2RhdGEpO1xyXG5cdH1cclxuXHRcclxuXHRwcml2YXRlIGFzc2lnbkhlYWRzKGNvbW1pdCkge1xyXG5cdFx0Y29tbWl0LnBhcmVudHMxID0gY29tbWl0LnBhcmVudGhhc2hlcy5tYXAoIHggPT4geyByZXR1cm4geH0pOyAvLyBjb3B5IGFycmF5XHJcblx0XHJcblx0XHR3aGlsZShjb21taXQucGFyZW50czEubGVuZ3RoID4gMCkge1xyXG5cdFx0XHR2YXIgbmV3UGFyZW50cyA9IFtdO1xyXG5cdFx0XHRjb21taXQucGFyZW50czEuZm9yRWFjaCggcGFyZW50SGFzaCA9PiB7XHJcblx0XHRcdFx0dmFyIHAgPSB0aGlzLmRhdGFbcGFyZW50SGFzaF1cdFxyXG5cdFx0XHRcdGlmKHAgIT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRwLmluSGVhZHMucHVzaChjb21taXQuc2hhKVxyXG5cdFx0XHRcdFx0Ly8gYWRkIGFsbCBncmFuZHBhcmVudHMgdG8gdGhlIG5ld3BhcmVudHNcclxuXHRcdFx0XHRcdHAucGFyZW50aGFzaGVzLmZvckVhY2goaCA9PiB7XHJcblx0XHRcdFx0XHRcdGlmKG5ld1BhcmVudHMuaW5kZXhPZihoKSA9PT0gLTEpIHtcclxuXHRcdFx0XHRcdFx0XHRuZXdQYXJlbnRzLnB1c2goaCk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0pXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Y29tbWl0LnBhcmVudHMxID0gbmV3UGFyZW50c1xyXG5cdFx0fVxyXG5cdH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJCcmFuY2gudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21taXQudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb25maWcudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJBc3luY0xvYWRlci50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkV4cGFuZGFibGUudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21taXRQcm92aWRlci50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInBsdWdpbnMvTG9jYWxHaXQySnNvblByb3ZpZGVyLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicGx1Z2lucy9naXRodWIudHNcIi8+XHJcblx0XHJcbmludGVyZmFjZSBDb21taXRzIHsgW2tleTpzdHJpbmddOkNvbW1pdDsgfVxyXG5pbnRlcmZhY2UgQnJhbmNoZXMgeyBba2V5OnN0cmluZ106QnJhbmNoOyB9XHJcblx0XHJcbmNsYXNzIEdpdGxpbmUge1xyXG5cdFxyXG5cdHNlbGYgPSB0aGlzO1xyXG5cdHB1YmxpYyBtYXhYOm51bWJlciA9IDA7XHJcblx0cHVibGljIG1heEluZGV4WTpudW1iZXIgPSAwO1xyXG5cdHB1YmxpYyBjb21taXRzOkNvbW1pdHMgPSB7fTtcclxuXHRwdWJsaWMgZmlyc3RDb21taXQ6Q29tbWl0O1xyXG5cdHB1YmxpYyBjYW52YXM7XHJcblx0cHVibGljIGRhdGE7XHJcblx0cHVibGljIHBhbmVsO1xyXG5cdHB1YmxpYyB0ZXh0UGFuZWw7XHJcblx0cHVibGljIGhlYWRzTWFwOkJyYW5jaGVzID0ge307XHJcblx0cHVibGljIHJvb3RMYWJlbDsgXHJcblx0XHRcclxuXHRwdWJsaWMgYWw6IEFzeW5jTG9hZGVyO1xyXG5cdFxyXG5cdHB1YmxpYyBjb25maWc6IEdpdGxpbmVDb25maWcgPSBuZXcgR2l0bGluZUNvbmZpZygpO1xyXG5cdFx0XHRcclxuXHQvLyBIVE1MIHN0dWZmXHJcblx0cHJpdmF0ZSBsb2FkaW5nUGFuZWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgZ3JhcGhpY2FsUGFuZWw6IEhUTUxFbGVtZW50O1xyXG5cdHByaXZhdGUgaGVhZGVyUGFuZWw6IEhUTUxFbGVtZW50OyAgXHJcblx0cHJpdmF0ZSBjb250ZW50UGFuZWw6IEhUTUxFbGVtZW50O1xyXG5cdFx0XHRcclxuXHRwcml2YXRlIGNvbW1pdFByb3ZpZGVyOiBDb21taXRQcm92aWRlcjtcclxuXHRcclxuXHRwdWJsaWMgYWRkQ29tbWl0KGNvbW1pdDogQ29tbWl0KSB7XHJcblx0XHR0aGlzLmNvbW1pdHNbY29tbWl0LmdldEZ1bGxTaGEoKV0gPSBjb21taXQ7XHJcblx0XHRcclxuXHRcdC8vIGZpcnN0IGNvbW1pdCBuZWVkZWQgYnkgcmVuZGVyaW5nXHJcblx0XHRpZih0aGlzLmZpcnN0Q29tbWl0ID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0dGhpcy5maXJzdENvbW1pdCA9IGNvbW1pdDtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cHVibGljIGFkZEJyYW5jaChyZWZuYW1lOiBzdHJpbmcsIGNvbW1pdDogQ29tbWl0LCBzcGVjaWZpdHk6IG51bWJlcikge1xyXG5cdFx0dmFyIGJyYW5jaCA9IG5ldyBCcmFuY2gocmVmbmFtZSwgY29tbWl0LCBzcGVjaWZpdHkpO1xyXG5cdFx0dGhpcy5oZWFkc01hcFtyZWZuYW1lXSA9IGJyYW5jaDtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHJlbmRlcigpIHtcclxuXHRcdHRoaXMuY2FudmFzID0gbmV3IGpzZ2wuUGFuZWwodGhpcy5ncmFwaGljYWxQYW5lbCk7XHJcblxyXG5cdFx0dGhpcy5hbC50aGVuU2luZ2xlKFwiTG9hZGluZyBEYXRhXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5hbC5zdXNwZW5kKCk7XHJcblx0XHRcdHRoaXMuY29tbWl0UHJvdmlkZXIud2l0aENhbGxiYWNrKCAoanNvbikgPT4ge1xyXG5cdFx0XHRcdHRoaXMuZGF0YSA9IGpzb247XHJcblx0XHRcdFx0dGhpcy5hbC5yZXN1bWUoKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0dGhpcy5jb21taXRQcm92aWRlci5yZXF1ZXN0KCk7XHJcblx0XHR9KS50aGVuKFwiTG9hZGluZyBDb21taXRzXCIsICgpID0+IHtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5kYXRhKX0sIChzaGEpID0+IHtcclxuXHRcdFx0dmFyIGNvbW1pdCA9IG5ldyBDb21taXQodGhpcywgdGhpcy5kYXRhW3NoYV0pO1xyXG5cdFx0XHR0aGlzLmFkZENvbW1pdChjb21taXQpO1xyXG5cdFx0fSlcclxuXHRcdC50aGVuU2luZ2xlKFwiQnVpbGRpbmcgR3JhcGhcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmJ1aWxkR3JhcGgoKTtcclxuXHRcdH0pXHJcblx0XHQudGhlbihcIkRyYXdpbmcgTGFiZWxzXCIsICgpID0+IHtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5jb21taXRzKX0sIChzaGEpID0+IHtcclxuXHRcdFx0dmFyIGNvbW1pdCA9IHRoaXMuY29tbWl0c1tzaGFdO1xyXG5cdFx0XHR0aGlzLmRyYXdDb21taXQoY29tbWl0KTtcclxuXHRcdH0pXHJcblx0XHQudGhlblNpbmdsZShcIkNyZWF0aW5nIExlZ2VuZFwiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMucm9vdExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuXHRcdFx0dGhpcy5yb290TGFiZWwuY2xhc3NOYW1lID0gXCJjb21taXQtbGVnZW5kXCJcclxuXHRcdFx0dGhpcy50ZXh0UGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5yb290TGFiZWwpO1xyXG5cdFx0fSlcclxuXHRcdC50aGVuKFwiRHJhd2luZyBNZXJnZXNcIiwgKCkgPT4ge3JldHVybiBPYmplY3Qua2V5cyh0aGlzLmNvbW1pdHMpfSwgKHNoYSkgPT4ge1xyXG5cdFx0XHR2YXIgY29tbWl0ID0gdGhpcy5jb21taXRzW3NoYV07XHJcblx0XHRcdHRoaXMuZHJhd1JlZmVyZW5jZXMoY29tbWl0KTtcclxuXHRcdH0pXHJcblx0XHQudGhlblNpbmdsZShcIlJlc2l6aW5nXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5ncmFwaGljYWxQYW5lbC5zdHlsZS53aWR0aCA9IGluZGV4VG9YKHRoaXMubWF4WCArIDEpICsgXCJweFwiXHJcblx0XHRcdHRoaXMuZ3JhcGhpY2FsUGFuZWwuc3R5bGUuaGVpZ2h0ID0gdGhpcy5nZXRIZWlnaHQoKSArIFwicHhcIjtcclxuXHRcdH0pLnN0YXJ0KCk7XHJcblx0XHRcclxuXHRcdHdpbmRvdy5vbnJlc2l6ZSA9IChldmVudDogVUlFdmVudCkgPT4ge1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5hbC50aGVuKFwiUmVkcmF3aW5nXCIsICgpID0+IHtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5jb21taXRzKX0sIChzaGEpID0+IHtcclxuXHRcdFx0XHR2YXIgY29tbWl0OkNvbW1pdCA9IHRoaXMuY29tbWl0c1tzaGFdO1xyXG5cdFx0XHRcdGNvbW1pdC52aWV3LnJlZHJhdygpO1xyXG5cdFx0XHR9KS50aGVuU2luZ2xlKFwiUmVzaXppbmdcIiwgKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuZ3JhcGhpY2FsUGFuZWwuc3R5bGUud2lkdGggPSBpbmRleFRvWCh0aGlzLm1heFggKyAxKSArIFwicHhcIlxyXG5cdFx0XHRcdHRoaXMuZ3JhcGhpY2FsUGFuZWwuc3R5bGUuaGVpZ2h0ID0gdGhpcy5nZXRIZWlnaHQoKSArIFwicHhcIjtcclxuXHRcdFx0fSkuc3RhcnQoZmFsc2UpOyBcclxuXHRcdH07XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBnZXRIZWlnaHQoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yb290TGFiZWwub2Zmc2V0VG9wIC0gdGhpcy5maXJzdENvbW1pdC52aWV3LmxhYmVsLm9mZnNldFRvcDtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGJ1aWxkR3JhcGgoKSB7XHJcblx0XHR2YXIgc2hhcyA9IE9iamVjdC5rZXlzKHRoaXMuY29tbWl0cyk7XHJcblx0XHRzaGFzLmZvckVhY2goKHNoYSkgPT4ge1xyXG5cdFx0XHR2YXIgY29tbWl0ID0gdGhpcy5jb21taXRzW3NoYV07XHJcblx0XHRcdGNvbW1pdC5pbml0UmVsYXRpb25zKCk7XHJcblx0XHR9KTtcclxuXHRcdHNoYXMuZm9yRWFjaCgoc2hhKSA9PiB7XHJcblx0XHRcdHZhciBjb21taXQgPSB0aGlzLmNvbW1pdHNbc2hhXTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbW1pdC5pbml0SGVhZFNwZWNpZml0eSgpO1xyXG5cdFx0XHRjb21taXQuaW5pdE1lcmdlcygpO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLmluaXRCcmFuY2hlcygpO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZHJhd0NvbW1pdChjb21taXQ6IENvbW1pdCkge1xyXG5cdFx0Ly8gTGFiZWxcclxuXHRcdGNvbW1pdC52aWV3ID0gbmV3IENvbW1pdFZpZXcodGhpcy5jYW52YXMsIHRoaXMuY29uZmlnLCBjb21taXQpO1xyXG5cdFx0XHJcblx0XHRpZihjb21taXQub3V0T2ZTY29wZSA9PT0gZmFsc2UpIHtcclxuXHRcdFx0Y29tbWl0LnZpZXcubGFiZWwgPSB0aGlzLmRyYXdMYWJlbChjb21taXQpO1xyXG5cclxuXHRcdFx0Y29tbWl0LnZpZXcubGFiZWwub25jbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmKGNvbnNvbGUpIHtcclxuXHRcdFx0XHRcdExvZ2dlci5kZWJ1Zyhjb21taXQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHRoaXMudGV4dFBhbmVsLmFwcGVuZENoaWxkKGNvbW1pdC52aWV3LmxhYmVsKTtcclxuXHRcdFx0Y29tbWl0LnZpZXcubGFiZWwuc3R5bGVbJ3BhZGRpbmctbGVmdCddID0gaW5kZXhUb1godGhpcy5tYXhYICsgMSkrXCJweFwiXHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBkcmF3UmVmZXJlbmNlcyhjb21taXQ6IENvbW1pdCkge1xyXG5cdFx0Y29tbWl0LnZpZXcuYWRkUmVsYXRpb25zKCk7XHJcblx0XHRjb21taXQudmlldy5yZWRyYXcoKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGRyYXdMYWJlbChjb21taXQ6IENvbW1pdCkge1xyXG5cdFx0dmFyIGxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuXHRcdGxhYmVsLmNsYXNzTmFtZSA9IFwiY29tbWl0LWxlZ2VuZFwiXHJcblxyXG5cdFx0Ly8gU0hBIEhhc2ggXHJcblx0XHR2YXIgc2hvcnRTaGE6c3RyaW5nID0gY29tbWl0LmdldFNob3J0U2hhKCk7XHJcblx0XHR2YXIgZnVsbFNoYTpzdHJpbmcgPSBjb21taXQuZ2V0RnVsbFNoYSgpO1xyXG5cdFx0dmFyIHNoYTpIVE1MRXhwYW5kYWJsZUVsZW1lbnQgPSBFeHBhbmRhYmxlLmV4dGVuZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSk7XHJcblx0XHRzaGEud2hlblNob3J0KHNob3J0U2hhK1wiIFwiKTtcclxuXHRcdHNoYS53aGVuRnVsbChmdWxsU2hhKTtcclxuXHRcdHNoYS5zdHlsZS5mb250RmFtaWx5ID0gXCJDb3VyaWVyXCI7XHJcblx0XHRcclxuXHRcdGxhYmVsLmFwcGVuZENoaWxkKHNoYSk7XHJcblx0XHRcclxuXHRcdC8vIEF1dGhvciBhbmQgY29tbWl0dGVyXHJcblx0XHRsYWJlbC5hcHBlbmRDaGlsZCh0aGlzLmRyYXdJZGVudGl0eShcImF1dGhvclwiLCBjb21taXQuYXV0aG9yKSk7XHJcblx0XHRcclxuXHRcdGlmKGNvbW1pdC5hdXRob3IuZW1haWwgIT0gY29tbWl0LmNvbW1pdHRlci5lbWFpbCkge1xyXG5cdFx0XHRsYWJlbC5hcHBlbmRDaGlsZCh0aGlzLmRyYXdJZGVudGl0eShcImNvbW1pdHRlclwiLCBjb21taXQuY29tbWl0dGVyKSk7XHJcblx0XHR9XHJcblx0XHQgXHJcblx0XHQvLyBCcmFuY2ggLSBUT0RPOiBUYWdzIGFuZCBvdGhlciBicmFuY2hlc1x0XHRcclxuXHRcdGlmKGNvbW1pdC5icmFuY2ggJiYgY29tbWl0LmJyYW5jaC5jb21taXQgPT09IGNvbW1pdCAmJiAhY29tbWl0LmJyYW5jaC5hbm9ueW1vdXMpIHtcclxuXHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuXHRcdFx0aGVhZC5jbGFzc05hbWUgPSBcImhlYWQtbGFiZWxcIjtcclxuXHRcdFx0aGVhZC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb21taXQuZ2V0Q29sb3IoNDApO1xyXG5cdFx0XHRoZWFkLnN0eWxlLmNvbG9yID0gXCJ3aGl0ZVwiO1xyXG5cdFx0XHRoZWFkLnN0eWxlLnBhZGRpbmdMZWZ0ID0gaGVhZC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjJweFwiO1xyXG5cdFx0XHRoZWFkLmlubmVySFRNTCA9IGNvbW1pdC5icmFuY2gucmVmO1xyXG5cdFxyXG5cdFx0XHRsYWJlbC5hcHBlbmRDaGlsZChoZWFkKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0XHJcblx0XHQvLyBTdWJqZWN0XHRcdFxyXG5cdFx0dmFyIHN1YmplY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcclxuXHRcdHN1YmplY3QuaW5uZXJIVE1MID0gXCIgXCIrY29tbWl0LnN1YmplY3Q7XHJcblx0XHRzdWJqZWN0LnN0eWxlLmNvbG9yID0gY29tbWl0Lmhhc01lcmdlcygpID8gXCJncmV5XCI6IFwiYmxhY2tcIjtcclxuXHRcdGxhYmVsLmFwcGVuZENoaWxkKHN1YmplY3QpOyBcclxuXHRcdFxyXG5cdFx0bGFiZWwuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XHJcblx0XHRyZXR1cm4gbGFiZWw7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBkcmF3SWRlbnRpdHkodHlwZTogc3RyaW5nLCBpZDogSWRlbnRpdHkpIHtcclxuXHRcdHZhciBlbDogSFRNTEV4cGFuZGFibGVFbGVtZW50ID0gRXhwYW5kYWJsZS5leHRlbmQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImdpdGxpbmUtaWRlbnRpdHlcIikpO1xyXG5cdFx0ZWwuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgdHlwZSk7XHJcblx0XHRlbC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIGlkLm5hbWUpO1xyXG5cdFx0dmFyIGZ1bGxuYW1lID0gaWQubmFtZSArIFwiICZsdDtcIitpZC5lbWFpbC50b0xvd2VyQ2FzZSgpK1wiJmd0O1wiO1xyXG5cdFx0ZWwuc2V0QXR0cmlidXRlKFwidGl0bGVcIiwgZnVsbG5hbWUpO1xyXG5cdFx0XHJcblx0XHRlbC5zdHlsZS5iYWNrZ3JvdW5kID0gdGhpcy5jb25maWcuYXZhdGFycy5tYXAoZiA9PiB7cmV0dXJuIFwidXJsKFwiK2YoaWQuZW1haWwpK1wiKSBuby1yZXBlYXRcIn0pLmpvaW4oXCIsIFwiKTtcclxuXHRcdGVsLndoZW5GdWxsKGZ1bGxuYW1lKTtcclxuXHRcdGVsLndoZW5TaG9ydChcIiBcIik7XHJcblx0XHRyZXR1cm4gZWw7XHJcblx0fVxyXG5cclxuXHQvKlxyXG5cdFx0QmFzZWQgb24gdGhlIHNwZWNpZml0eSBhc3NpZ24gdGhlIGJyYW5jaGVzIHRvIHRoZSBjb21taXRzLiBpZiBpbiBkb3VidCB0aGUgY29tbWl0IHdpbGwgYmUgb24gdGhlIG1vc3Qgc3BlY2lmaWMgYnJhbmNoIFxyXG5cdCovXHJcblx0cHVibGljIGluaXRCcmFuY2hlcygpICAge1xyXG5cclxuXHRcdHZhciBoZWFkcyA9IE9iamVjdC5rZXlzKHRoaXMuaGVhZHNNYXApO1xyXG5cdFx0XHJcblx0XHQvKiBzZXQgdGhlIGluZGV4IHRvIHRoZSBoZWFkIG9iamVjdCAqL1xyXG5cdFx0Zm9yKHZhciBpID0wOyBpPCBoZWFkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaGVhZE5hbWUgPSBoZWFkc1tpXTtcclxuXHRcdFx0dmFyIGhlYWQgPSB0aGlzLmhlYWRzTWFwW2hlYWROYW1lXTtcclxuXHRcdFx0aGVhZC5jb21taXQuaW5pdERlZmF1bHRCcmFuY2goKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0LyogU29ydCB0aGUgYnJhbmNoZXMgYnkgc3BlY2lmaXR5ICovXHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRoZWFkcy5zb3J0KGZ1bmN0aW9uKGwsIHIpIHtcclxuXHRcdFx0dmFyIGxIZWFkOiBDb21taXQgPSBzZWxmLmhlYWRzTWFwW2xdLmNvbW1pdDtcclxuXHRcdFx0dmFyIHJIZWFkOiBDb21taXQgPSBzZWxmLmhlYWRzTWFwW3JdLmNvbW1pdDtcclxuXHRcdFx0XHJcblx0XHRcdGlmKGxIZWFkID09PSBySGVhZCkge1xyXG5cdFx0XHRcdHJldHVybiAwO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRpZihsSGVhZC5icmFuY2guY2F0ZWdvcnkgPT09IHJIZWFkLmJyYW5jaC5jYXRlZ29yeSkge1xyXG5cdFx0XHRcdHJldHVybiBsSGVhZC5icmFuY2guc3BlY2lmaXR5IC0gckhlYWQuYnJhbmNoLnNwZWNpZml0eTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gbEhlYWQuYnJhbmNoLmNhdGVnb3J5Lmxlbmd0aCAtIHJIZWFkLmJyYW5jaC5jYXRlZ29yeS5sZW5ndGg7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHJcblxyXG5cdFx0Lyogc2V0IHRoZSBpbmRleCB0byB0aGUgaGVhZCBvYmplY3QgKi9cclxuXHRcdHZhciBtYXhMYW5lID0gMDtcclxuXHRcdGZvcih2YXIgaSA9MDsgaTwgaGVhZHMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGhlYWROYW1lID0gaGVhZHNbaV07XHJcblx0XHRcdHZhciBoZWFkID0gdGhpcy5oZWFkc01hcFtoZWFkTmFtZV07XHJcblx0XHRcdHZhciB0aXA6IENvbW1pdCA9IGhlYWQuY29tbWl0O1xyXG5cdFx0XHRcclxuXHRcdFx0aWYodGlwLmJyYW5jaCA9PT0gaGVhZCkge1xyXG5cdFx0XHRcdGhlYWQubGFuZSA9IG1heExhbmU7XHJcblx0XHRcdFx0Ly9oZWFkLmluZGV4ID0gbWF4TGFuZTtcclxuXHRcdFx0XHRtYXhMYW5lICsrO1xyXG5cclxuXHRcdFx0XHQvLyBDYW4gd2UgZGlzcGxheSB0aGlzIGhlYWQgYSBsaXR0bGUgbW9yZSB0byB0aGUgbGVmdD9cclxuXHRcdFx0XHRmb3IodmFyIGw9MDsgbDwgaGVhZHMubGVuZ3RoOyBsKyspIHtcclxuXHJcblx0XHRcdFx0XHR2YXIgY2FuVXNlTGFuZSA6IGJvb2xlYW4gPSB0cnVlO1xyXG5cdFx0XHRcdFx0Zm9yKHZhciBqPTA7IGo8IGhlYWRzLmxlbmd0aDsgaisrKSB7XHJcblx0XHRcdFx0XHRcdHZhciBqaGVhZE5hbWUgPSBoZWFkc1tqXTtcclxuXHRcdFx0XHRcdFx0dmFyIGhlYWRPbkxhbmU6IENvbW1pdCA9IHRoaXMuaGVhZHNNYXBbamhlYWROYW1lXS5jb21taXQ7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRpZihoZWFkT25MYW5lID09PSB1bmRlZmluZWQgfHwgaGVhZE9uTGFuZS5icmFuY2ggIT0gaGVhZCAmJiBoZWFkT25MYW5lLmJyYW5jaC5sYW5lID09PSBsICYmICh0aXAuaW50ZXJzZWN0cyhoZWFkT25MYW5lKSB8fCB0aXAuYnJhbmNoLmNhdGVnb3J5ICE9IGhlYWRPbkxhbmUuYnJhbmNoLmNhdGVnb3J5KSkge1xyXG5cdFx0XHRcdFx0XHRcdGNhblVzZUxhbmUgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYoY2FuVXNlTGFuZSkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0TG9nZ2VyLmRlYnVnKFwiTk8gSU5URVJTRUNUUzogXCIsdGlwLmJyYW5jaC5yZWYsXCIgLSBcIixoZWFkT25MYW5lLmJyYW5jaC5yZWYpO1xyXG5cdFx0XHRcdFx0XHRoZWFkLmxhbmUgPSBsO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dGhpcy5tYXhYID0gTWF0aC5tYXgodGhpcy5tYXhYLCBoZWFkLmxhbmUpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fVxyXG5cdFx0XHJcblx0fVxyXG5cclxuXHQvLyBMYXVuY2hpbmdcclxuXHRwdWJsaWMgZnJvbUpTT04oanNvbkZpbGU6IHN0cmluZyk6IEdpdGxpbmUge1xyXG5cdFx0cmV0dXJuIHRoaXMuZnJvbVByb3ZpZGVyKG5ldyBMb2NhbEdpdDJKc29uUHJvdmlkZXIoanNvbkZpbGUpKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGZyb21Qcm92aWRlcihjb21taXRQcm92aWRlcjogQ29tbWl0UHJvdmlkZXIpOiBHaXRsaW5lIHtcclxuXHRcdHRoaXMuY29tbWl0UHJvdmlkZXIgPSBjb21taXRQcm92aWRlcjtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRwcml2YXRlIHJlbmRlclRvKHBhbmVsOiBIVE1MRWxlbWVudCk6IEdpdGxpbmUge1xyXG5cdFx0aWYodGhpcy5oZWFkZXJQYW5lbCAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHBhbmVsLmFwcGVuZENoaWxkKHRoaXMuaGVhZGVyUGFuZWwpO1xyXG5cdFx0fVxyXG5cdFx0cGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5sb2FkaW5nUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZ2l0bGluZS1sb2FkaW5ncGFuZWxcIikpO1xyXG5cdFx0cGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50UGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZ2l0bGluZS1jb250ZW50cGFuZWxcIikpO1xyXG5cdFx0dGhpcy5jb250ZW50UGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5ncmFwaGljYWxQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJnaXRsaW5lLWdyYXBoaWNhbHBhbmVsXCIpKTtcclxuXHRcdHRoaXMuY29udGVudFBhbmVsLmFwcGVuZENoaWxkKHRoaXMudGV4dFBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImdpdGxpbmUtdGV4dHBhbmVsXCIpKTtcclxuXHRcdHRoaXMuYWwgPSBuZXcgQXN5bmNMb2FkZXIodGhpcy5sb2FkaW5nUGFuZWwpO1xyXG5cdFx0XHJcblx0XHR0aGlzLnJlbmRlcigpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyB3aXRoSGVhZGVyKGhlYWRlcjogc3RyaW5nKTogR2l0bGluZTtcclxuXHRwdWJsaWMgd2l0aEhlYWRlcihoZWFkZXI6IEhUTUxFbGVtZW50KTogR2l0bGluZTtcclxuXHJcblx0cHVibGljIHdpdGhIZWFkZXIoaGVhZGVyOiBhbnkpIHtcclxuXHRcdGlmKHR5cGVvZiBoZWFkZXIgPT09IFwic3RyaW5nXCIpIHtcclxuXHRcdFx0dGhpcy5oZWFkZXJQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJnaXRsaW5lLWhlYWRlcnBhbmVsXCIpO1xyXG5cdFx0XHR0aGlzLmhlYWRlclBhbmVsLmlubmVySFRNTCA9IGhlYWRlcjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuaGVhZGVyUGFuZWwgPSBoZWFkZXI7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgc3RhdGljIGRpc3BsYXlGYXRhbEVycm9yKG1lc3NhZ2U6IHN0cmluZykge1xyXG5cdFx0YWxlcnQobWVzc2FnZSk7XHJcblx0fVx0XHJcbn1cclxuIiwiLyoqXHJcbiAqIGJhc2ljIHN1cHBvcnQgZm9yIGpzZ2wgc2hhcGVzXHJcbiAqL1xyXG5jbGFzcyBTaGFwZSB7XHJcblx0cHJvdGVjdGVkIGVsZW1lbnQ6IGFueTsgLy8ganNnbCBlbGVtZW50XHJcblx0cHJpdmF0ZSByZW5kZXJlZFRvOiBIVE1MRWxlbWVudDsgLy8ganNnbCBjYW52YXMgKGFueSBodG1sKVxyXG5cdHByb3RlY3RlZCBjYW52YXM6IGFueTtcclxuXHRwcml2YXRlIGRlcGVuZGVuY2llcyA6IFNoYXBlW10gPSBbXTtcclxuXHRwdWJsaWMgY29uc3RydWN0b3IoY2FudmFzOiBhbnksIGVsZW1lbnQ6IGFueSkge1xyXG5cdFx0dGhpcy5jYW52YXMgPSBjYW52YXM7XHJcblx0XHR0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG5cdH1cclxuXHJcblx0cHVibGljIGFkZElmTWlzc2luZygpIHtcclxuXHRcdGlmKHRoaXMuZWxlbWVudCAhPT0gdW5kZWZpbmVkICYmIHRoaXMucmVuZGVyZWRUbyA9PSBudWxsKSB7XHJcblx0XHRcdHRoaXMuYWRkRWxlbWVudHMoKTtcclxuXHRcdFx0dGhpcy5yZW5kZXJlZFRvID0gdGhpcy5jYW52YXM7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBhZGRFbGVtZW50cygpIHtcclxuXHRcdHRoaXMuY2FudmFzLmFkZEVsZW1lbnQodGhpcy5lbGVtZW50KTtcdFxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgdXBkYXRlKCkge1xyXG5cdFx0dGhpcy5kZXBlbmRlbmNpZXMuZm9yRWFjaChkZXAgPT4ge1xyXG5cdFx0XHRkZXAudXBkYXRlKCk7XHJcblx0XHR9KVxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZGVwZW5kc09uKG9uOiBTaGFwZSkge1xyXG5cdFx0b24uZGVwZW5kZW5jaWVzLnB1c2godGhpcyk7XHJcblx0fVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNoYXBlLnRzXCIvPlxyXG4vKipcclxuICogTmV3IHR5cGVzY3JpcHQgZmlsZVxyXG4gKi9cclxuXHJcbmNsYXNzIERvdCBleHRlbmRzIFNoYXBlIHtcclxuXHRcclxuXHR4OiBudW1iZXI7XHJcblx0eTogbnVtYmVyO1xyXG5cdHdpZHRoOiBudW1iZXI7XHJcblx0aGVpZ2h0OiBudW1iZXI7XHJcblx0XHJcblx0Y29uc3RydWN0b3IoY2FudmFzOiBhbnkpIHtcclxuXHRcdHN1cGVyKGNhbnZhcywgY2FudmFzLmNyZWF0ZVJlY3RhbmdsZSgpKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHNpemUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpOiBEb3Qge1xyXG5cdFx0dGhpcy53aWR0aCA9IHdpZHRoO1xyXG5cdFx0dGhpcy5oZWlnaHQgPSBoZWlnaHQ7XHJcblx0XHRcclxuXHRcdHRoaXMuZWxlbWVudC5zZXRXaWR0aCh3aWR0aCk7XHJcblx0XHR0aGlzLmVsZW1lbnQuc2V0SGVpZ2h0KGhlaWdodCk7XHJcblx0XHR0aGlzLmVsZW1lbnQuc2V0WFJhZGl1cyh3aWR0aCAvNCk7XHJcblx0XHR0aGlzLmVsZW1lbnQuc2V0WVJhZGl1cyh3aWR0aCAvNCk7XHJcblx0XHRcclxuXHRcdHRoaXMudXBkYXRlKCk7XHJcblx0XHR0aGlzLmFkZElmTWlzc2luZygpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBhdCh4OiBudW1iZXIsIHk6IG51bWJlcik6IERvdCAge1xyXG5cdFx0dGhpcy54ID0geDtcclxuXHRcdHRoaXMueSA9IHk7XHJcblx0XHRcclxuXHRcdHRoaXMudXBkYXRlKCk7XHJcblx0XHR0aGlzLmFkZElmTWlzc2luZygpO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBjb2xvcihzdHJva2VDb2xvcjogc3RyaW5nLCBmaWxsQ29sb3I6IHN0cmluZyk6IERvdCB7XHJcblx0XHR0aGlzLmVsZW1lbnQuZ2V0U3Ryb2tlKCkuc2V0V2VpZ2h0KDEpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldENvbG9yKHN0cm9rZUNvbG9yKTtcclxuXHRcdHRoaXMuZWxlbWVudC5nZXRGaWxsKCkuc2V0Q29sb3IoZmlsbENvbG9yKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgdXBkYXRlKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LnNldExvY2F0aW9uWFkodGhpcy54IC0gdGhpcy53aWR0aCAvIDIsIHRoaXMueSAtIHRoaXMuaGVpZ2h0IC8gMik7XHJcblx0XHRzdXBlci51cGRhdGUoKTtcclxuXHR9XHJcblx0XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiU2hhcGUudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJEb3QudHNcIi8+XHJcbi8qKlxyXG4gKiBTaGFwZSB0aGF0IGxpbmtzIHR3byBkb3RzXHJcbiAqL1xyXG5cclxuY2xhc3MgQmFzZUxpbmsgZXh0ZW5kcyBTaGFwZSB7XHJcblx0XHJcblx0cGFyZW50RG90OiBEb3Q7XHJcblx0Y2hpbGREb3Q6IERvdDtcclxuXHRcclxuXHRsaW5lQ29sb3I6IHN0cmluZztcclxuXHRcclxuXHRjb25zdHJ1Y3RvcihjYW52YXM6IGFueSwgZWxlbWVudDogYW55KSB7XHJcblx0XHRzdXBlcihjYW52YXMsIGVsZW1lbnQpO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZnJvbShmcm9tOiBEb3QpOiBCYXNlTGluayAge1xyXG5cdFx0dGhpcy5kZXBlbmRzT24oZnJvbSk7XHJcblx0XHR0aGlzLnBhcmVudERvdCA9IGZyb207XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHRvKHRvOiBEb3QpOiBCYXNlTGluayB7XHJcblx0XHQvL3RoaXMuZGVwZW5kc09uKHRvKTtcclxuXHRcdHRoaXMuY2hpbGREb3QgPSB0bztcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgY29sb3IobGluZUNvbG9yOiBzdHJpbmcpOiBCYXNlTGluayB7XHJcblx0XHR0aGlzLmVsZW1lbnQuZ2V0U3Ryb2tlKCkuc2V0V2VpZ2h0KDEpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldENvbG9yKGxpbmVDb2xvcik7XHJcblx0XHR0aGlzLmxpbmVDb2xvciA9IGxpbmVDb2xvcjtcclxuXHRcdHRoaXMuYWRkSWZNaXNzaW5nKCk7XHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkJhc2VMaW5rLnRzXCIvPlxyXG4vKipcclxuICogTmV3IHR5cGVzY3JpcHQgZmlsZVxyXG4gKi9cclxuZGVjbGFyZSB2YXIganNnbDogYW55O1xyXG4gXHJcbmNsYXNzIEN1cnZlIGV4dGVuZHMgQmFzZUxpbmsge1xyXG5cdFxyXG5cdHByaXZhdGUgYXJyb3c7XHJcblx0XHJcblx0Y29uc3RydWN0b3IoY2FudmFzOiBhbnkpIHtcclxuXHRcdHN1cGVyKGNhbnZhcywgY2FudmFzLmNyZWF0ZUN1cnZlKCkpO1xyXG5cdFx0dGhpcy5hcnJvdyA9IHRoaXMuY2FudmFzLmNyZWF0ZVBvbHlnb24oKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGFkZEVsZW1lbnRzKCkge1xyXG5cdFx0c3VwZXIuYWRkRWxlbWVudHMoKTtcclxuXHRcdFxyXG5cdFx0Ly8gMm5kIGVsZW1lbnRcclxuXHRcdHRoaXMuY2FudmFzLmFkZEVsZW1lbnQodGhpcy5hcnJvdyk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyB1cGRhdGUoKSB7XHJcblx0XHR2YXIgeDogbnVtYmVyID0gdGhpcy5jaGlsZERvdC54O1xyXG5cdFx0dmFyIHk6IG51bWJlciA9IHRoaXMuY2hpbGREb3QueTtcclxuXHRcdHZhciBwYXJlbnRYOiBudW1iZXIgPSB0aGlzLnBhcmVudERvdC54O1xyXG5cdFx0dmFyIHBhcmVudFk6IG51bWJlciA9IHRoaXMucGFyZW50RG90Lnk7XHJcblx0XHR2YXIgY29sb3I6IHN0cmluZyA9IHRoaXMubGluZUNvbG9yO1xyXG5cclxuXHRcdHZhciBkaXJlY3Rpb24gPSB4IDwgcGFyZW50WCA/IDEgOiAtMTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQuc2V0U3RhcnRQb2ludFhZKHBhcmVudFgsIHBhcmVudFkgLSB0aGlzLnBhcmVudERvdC5oZWlnaHQgLyAyKVxyXG5cdFx0dGhpcy5lbGVtZW50LnNldEVuZFBvaW50WFkoeCt0aGlzLmNoaWxkRG90LndpZHRoIC8gMipkaXJlY3Rpb24sIHkpO1xyXG5cdFx0dGhpcy5lbGVtZW50LnNldENvbnRyb2wyUG9pbnRYWShwYXJlbnRYLCB5KTtcclxuXHRcdHRoaXMuZWxlbWVudC5zZXRDb250cm9sMVBvaW50WFkocGFyZW50WCwgeSk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldFdlaWdodCgxKTtcclxuXHRcdHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRDb2xvcihjb2xvcik7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0dGhpcy5hcnJvdy5nZXRTdHJva2UoKS5zZXRXZWlnaHQoMClcclxuXHRcdHRoaXMuYXJyb3cuZ2V0RmlsbCgpLnNldENvbG9yKGNvbG9yKVxyXG5cdFx0XHJcblx0XHR0aGlzLmFycm93LmNsZWFyUG9pbnRzKCk7XHJcblx0XHR0aGlzLmFycm93LmFkZFBvaW50WFkoMCwwKTtcclxuXHRcdHRoaXMuYXJyb3cuYWRkUG9pbnRYWSg2LC00KVxyXG5cdFx0dGhpcy5hcnJvdy5hZGRQb2ludFhZKDYsNClcclxuXHRcdFxyXG5cdFx0Ly8gTW92ZVx0XHRcdFx0XHRcclxuXHRcdGZvcih2YXIgaT0wO2k8dGhpcy5hcnJvdy5nZXRQb2ludHNDb3VudCgpOyBpKyspIHtcclxuXHRcdFx0dmFyIHB4ID0gdGhpcy5hcnJvdy5nZXRQb2ludEF0KGkpLlg7XHJcblx0XHRcdHZhciBweSA9IHRoaXMuYXJyb3cuZ2V0UG9pbnRBdChpKS5ZO1xyXG5cdFx0XHQvL3RoaXMuYXJyb3cuc2V0UG9pbnRYWUF0KHB4LCBweSArIHksIGkpO1xyXG5cdFx0XHR0aGlzLmFycm93LnNldFBvaW50WFlBdChweCpkaXJlY3Rpb24gKyB4ICsgdGhpcy5jaGlsZERvdC53aWR0aCAvIDIqZGlyZWN0aW9uLCBweSArIHksIGkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJCYXNlTGluay50c1wiLz5cclxuLyoqXHJcbiAqIE5ldyB0eXBlc2NyaXB0IGZpbGVcclxuICovXHJcblxyXG5jbGFzcyBTdHJhaWdodCBleHRlbmRzIEJhc2VMaW5rIHtcclxuXHRcclxuXHRjb25zdHJ1Y3RvcihjYW52YXM6IGFueSkge1xyXG5cdFx0c3VwZXIoY2FudmFzLCBjYW52YXMuY3JlYXRlTGluZSgpKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHVwZGF0ZSgpIHtcclxuXHRcdHN1cGVyLnVwZGF0ZSgpO1xyXG5cdFx0dGhpcy5lbGVtZW50LnNldFN0YXJ0UG9pbnRYWSh0aGlzLnBhcmVudERvdC54LCB0aGlzLnBhcmVudERvdC55IC0gdGhpcy5wYXJlbnREb3QuaGVpZ2h0IC8gMik7XHJcblx0XHR0aGlzLmVsZW1lbnQuc2V0RW5kUG9pbnRYWSh0aGlzLmNoaWxkRG90LngsIHRoaXMuY2hpbGREb3QueSArIHRoaXMuY2hpbGREb3QuaGVpZ2h0IC8gMik7XHJcblx0fVxyXG5cdFxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNoYXBlLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiRG90LnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiU3RyYWlnaHQudHNcIi8+XHJcbi8qKlxyXG4gKiBOZXcgdHlwZXNjcmlwdCBmaWxlXHJcbiAqL1xyXG5kZWNsYXJlIHZhciBqc2dsOiBhbnk7XHJcblxyXG5jbGFzcyBDcmVhdGlvbiBleHRlbmRzIEJhc2VMaW5rIHtcclxuXHRcclxuXHRzZWNvbmRMaW5lO1xyXG5cdFxyXG5cdGNvbnN0cnVjdG9yKGNhbnZhczogYW55KSB7XHJcblx0XHRzdXBlcihjYW52YXMsIGNhbnZhcy5jcmVhdGVMaW5lKCkpO1xyXG5cdFx0dGhpcy5zZWNvbmRMaW5lID0gY2FudmFzLmNyZWF0ZUxpbmUoKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGFkZEVsZW1lbnRzKCkge1xyXG5cdFx0c3VwZXIuYWRkRWxlbWVudHMoKTtcclxuXHRcdFxyXG5cdFx0Ly8gMm5kIGVsZW1lbnRcclxuXHRcdHRoaXMuY2FudmFzLmFkZEVsZW1lbnQodGhpcy5zZWNvbmRMaW5lKTsgLy8gVE9EOiBhZGQgbGF0ZXI/XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyB1cGRhdGUoKSB7XHJcblx0XHRzdXBlci51cGRhdGUoKTtcclxuXHRcdFxyXG5cdFx0Ly8gSG9yaXpvbnRhbCBkb3R0ZWQgbGluZVxyXG5cdFx0aWYodGhpcy5wYXJlbnREb3QueCA8IHRoaXMuY2hpbGREb3QueCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuc2V0U3RhcnRQb2ludFhZKHRoaXMucGFyZW50RG90LnggKyB0aGlzLnBhcmVudERvdC53aWR0aCAvIDIsIHRoaXMucGFyZW50RG90LnkpXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuc2V0U3RhcnRQb2ludFhZKHRoaXMucGFyZW50RG90LnggLSB0aGlzLnBhcmVudERvdC53aWR0aCAvIDIsIHRoaXMucGFyZW50RG90LnkpXHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHRoaXMuZWxlbWVudC5zZXRFbmRQb2ludFhZKHRoaXMuY2hpbGREb3QueCwgdGhpcy5wYXJlbnREb3QueSk7XHJcblx0XHR0aGlzLmVsZW1lbnQuZ2V0U3Ryb2tlKCkuc2V0V2VpZ2h0KDEpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldERhc2hTdHlsZShqc2dsLkRhc2hTdHlsZXMuREFTSCk7IFxyXG5cdFx0dGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldENvbG9yKHRoaXMubGluZUNvbG9yKTtcclxuXHRcdFxyXG5cdFx0Ly8gVmVydGljYWwgbGluZVxyXG5cdFx0dGhpcy5zZWNvbmRMaW5lLnNldFN0YXJ0UG9pbnRYWSh0aGlzLmNoaWxkRG90LngsIHRoaXMucGFyZW50RG90LnkpXHJcblx0XHR0aGlzLnNlY29uZExpbmUuc2V0RW5kUG9pbnRYWSh0aGlzLmNoaWxkRG90LngsIHRoaXMuY2hpbGREb3QueSArIHRoaXMuY2hpbGREb3QuaGVpZ2h0IC8gMik7XHJcblx0XHR0aGlzLnNlY29uZExpbmUuZ2V0U3Ryb2tlKCkuc2V0V2VpZ2h0KDEpXHJcblx0XHR0aGlzLnNlY29uZExpbmUuZ2V0U3Ryb2tlKCkuc2V0Q29sb3IodGhpcy5saW5lQ29sb3IpO1xyXG5cdH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb25maWcudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21taXQudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJyZW5kZXJpbmcvQ3VydmUudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJyZW5kZXJpbmcvRG90LnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicmVuZGVyaW5nL1N0cmFpZ2h0LnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicmVuZGVyaW5nL0NyZWF0aW9uLnRzXCIvPlxyXG4vKipcclxuICogVmlldyBvZiB0aGUgQ29tbWl0XHJcbiAqL1xyXG4gXHJcbiBjbGFzcyBDb21taXRWaWV3IHtcclxuIFx0XHJcbiBcdHB1YmxpYyBjb21taXQgOiBDb21taXQ7XHJcbiBcdHB1YmxpYyBsYWJlbCA6IEhUTUxFbGVtZW50O1xyXG4gXHRwdWJsaWMgY2FudmFzOiBhbnk7IC8vIGpzZ2xcclxuIFx0cHVibGljIGNvbmZpZyA6IEdpdGxpbmVDb25maWc7XHJcblxyXG4gXHRwdWJsaWMgZG90IDogRG90O1xyXG4gXHRwdWJsaWMgbGluZXMgOiBTaGFwZVtdID0gW107XHJcbiBcdFxyXG4gXHRjb25zdHJ1Y3RvcihjYW52YXMsIGNvbmZpZzogR2l0bGluZUNvbmZpZywgY29tbWl0OiBDb21taXQpIHtcclxuIFx0XHR0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuIFx0XHR0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuIFx0XHR0aGlzLmNvbW1pdCA9IGNvbW1pdDtcclxuIFx0XHRcclxuIFx0XHR0aGlzLmRvdCA9IG5ldyBEb3QodGhpcy5jYW52YXMpO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgYWRkUmVsYXRpb25zKCkge1xyXG5cclxuXHRcdC8vIERpcmVjdCBwYXJlbnRcclxuXHRcdGlmKHRoaXMuY29tbWl0LmRpcmVjdHBhcmVudCAhPSBudWxsKSB7XHJcblx0XHRcdHZhciBkcGwgOiBTaGFwZTtcclxuXHRcdFx0aWYodGhpcy5jb21taXQuZ2V0TGFuZSgpID09IHRoaXMuY29tbWl0LmRpcmVjdHBhcmVudC5nZXRMYW5lKCkgfHwgdGhpcy5jb21taXQuZGlyZWN0cGFyZW50Lm91dE9mU2NvcGUpIHsgIFxyXG5cdFx0XHRcdC8vIGRpcmVjdCBwYXJlbnQgaXMgdGhlIHNhbWUgWC9sYW5lLCB0aGlzIG1lYW5zIGl0IGlzIGEgc3RhbmRhcmQgZm9yd2FyZCBjb21taXQgXHJcblx0XHRcdFx0ZHBsID0gbmV3IFN0cmFpZ2h0KHRoaXMuY2FudmFzKS5mcm9tKHRoaXMuY29tbWl0LmRpcmVjdHBhcmVudC52aWV3LmRvdCkudG8odGhpcy5kb3QpLmNvbG9yKHRoaXMuY29tbWl0LmdldENvbG9yKDIwKSk7XHJcblx0XHRcdH0gZWxzZSB7IFxyXG5cdFx0XHRcdC8vIGRpcmVjdCBwYXJlbnQgaXMgb24gYSBkaWZmZXJlbnQgbGFuZSwgdGhpcyBpcyBtb3N0IGNlcnRhaW5seSBhIG5ldyBicmFuY2ggXHJcblx0XHRcdFx0ZHBsID0gbmV3IENyZWF0aW9uKHRoaXMuY2FudmFzKS5mcm9tKHRoaXMuY29tbWl0LmRpcmVjdHBhcmVudC52aWV3LmRvdCkudG8odGhpcy5kb3QpLmNvbG9yKHRoaXMuY29tbWl0LmdldENvbG9yKDMwKSk7XHJcblx0XHRcdH0gXHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLmxpbmVzLnB1c2goZHBsKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dmFyIGFsbG1lcmdlcyA9IHRoaXMuY29tbWl0Lm1lcmdlcy5zdGFuZGFyZC5jb25jYXQodGhpcy5jb21taXQubWVyZ2VzLmFub255bW91cyk7XHJcblx0XHRhbGxtZXJnZXMuZm9yRWFjaChtZXJnZSA9PiB7XHJcblx0XHRcdHRoaXMubGluZXMucHVzaChcclxuXHRcdFx0XHRuZXcgQ3VydmUodGhpcy5jYW52YXMpXHJcblx0XHRcdFx0LmZyb20obWVyZ2Uuc291cmNlLnZpZXcuZG90KVxyXG5cdFx0XHRcdC50byh0aGlzLmRvdClcclxuXHRcdFx0XHQuY29sb3IobWVyZ2Uuc291cmNlLmdldENvbG9yKDM1KSkpXHJcblx0XHRcdFx0O1x0XHRcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcbiBcdC8qKiBjYWxjdWxhdGUgdGhlIHBvc2l0aW9ucyBiYXNlZCBvbiBtb2RlbCBhbmQgdXBkYXRlIHRoZSBzaGFwZXMgKi9cclxuIFx0cHVibGljIHJlZHJhdygpIHtcclxuIFx0XHR0aGlzLmRvdFxyXG4gXHRcdFx0LmF0KHRoaXMuY29tbWl0LmdldFgoKSwgdGhpcy5jb21taXQuZ2V0WSgpKVxyXG4gXHRcdFx0LnNpemUodGhpcy5jb25maWcuZG90V2lkdGgsIHRoaXMuY29uZmlnLmRvdEhlaWdodClcclxuIFx0XHRcdC5jb2xvcih0aGlzLmNvbW1pdC5nZXRDb2xvcigyMCksIHRoaXMuY29tbWl0LmdldENvbG9yKDgwKSk7XHJcbiBcdH1cclxuIFx0XHJcblx0IFxyXG4gfVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiQnJhbmNoLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiR2l0bGluZS50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbW1pdFZpZXcudHNcIi8+XHJcblxyXG4vKiogY29tbWl0dGVyIG9yIGF1dGhvciAqL1xyXG5jbGFzcyBJZGVudGl0eSB7XHJcblx0cHVibGljIGltYWdlOiBzdHJpbmc7IC8vIG9wdGlvbmFsXHJcblx0XHJcblx0cHVibGljIGNvbnN0cnVjdG9yIChwdWJsaWMgbmFtZTogc3RyaW5nLCBwdWJsaWMgZW1haWw6IHN0cmluZywgcHVibGljIGRhdGU6bnVtYmVyKSB7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBDb21taXQge1xyXG5cdHByaXZhdGUgY29udGFpbmVyOiBHaXRsaW5lO1xyXG5cclxuXHRwcml2YXRlIHdhcm5pbmdzOiBhbnlbXSA9IFtdO1xyXG5cdHByaXZhdGUgaW5IZWFkc1JlZjogQ29tbWl0W10gPSBbXTtcclxuXHRwcml2YXRlIHBhcmVudHM6IENvbW1pdFtdID0gW107XHJcblx0cHJpdmF0ZSBjaGlsZHM6IENvbW1pdFtdID0gW107XHJcblx0cHJpdmF0ZSBzaWJsaW5nczogQ29tbWl0W10gPSBbXTtcclxuXHRwdWJsaWMgb3V0T2ZTY29wZTogYm9vbGVhbiA9IGZhbHNlOyAvLyBUaGlzIGNvbW1pdCB3YXMgbm90IHBhcnQgb2YgdGhlIGxvZ3Mgc2NvcGUsIGJ1dCBpcyByZWZlcmVuY2VkIGJ5IGFub3RoZXIgY29tbWl0LlxyXG5cdHB1YmxpYyBtZXJnZXMgPSB7IHN0YW5kYXJkOiBbXSwgYW5vbnltb3VzOiBbXX07XHJcblx0cHJpdmF0ZSBzaGE6IHN0cmluZztcclxuXHRwcml2YXRlIHNzaGE6IHN0cmluZzsgLy8gQWJicmV2aWF0ZWQgaGFzaFxyXG5cdHB1YmxpYyBzdWJqZWN0OiBzdHJpbmc7XHJcblx0cHJpdmF0ZSBkYXRhOiBhbnk7XHJcblx0cHJpdmF0ZSBpbmRleFk6IG51bWJlcjtcclxuXHJcblx0cHJpdmF0ZSBtYXhTcGVjaWZpdHk6IG51bWJlcjtcclxuXHRwdWJsaWMgYnJhbmNoOiBCcmFuY2g7XHJcblx0cHVibGljIGRpcmVjdHBhcmVudDogQ29tbWl0O1xyXG5cdHB1YmxpYyBkaXJlY3RjaGlsZDogQ29tbWl0O1xyXG5cdFxyXG5cdHB1YmxpYyB2aWV3IDogQ29tbWl0VmlldztcclxuXHRcclxuXHRwdWJsaWMgY29tbWl0dGVyOiBJZGVudGl0eTtcclxuXHRwdWJsaWMgYXV0aG9yOiBJZGVudGl0eTtcclxuXHRcclxuXHRjb25zdHJ1Y3Rvcihjb250YWluZXI6IEdpdGxpbmUsIGRhdGEpIHtcclxuXHRcdHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG5cdFx0dGhpcy5kYXRhID0gZGF0YTtcclxuXHRcdFxyXG5cdFx0Ly8gcmVmZXJlbmNlIHRoZSBkYXRhIGJhY2sgdG8gdGhlIG9iamVjdFxyXG5cdFx0dGhpcy5kYXRhLm9iaiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdGlmKGRhdGEuaW5IZWFkcyA9PSBudWxsKSBkYXRhLmluSGVhZHMgPSBbXTtcclxuXHRcdGlmKGRhdGEucGFyZW50aGFzaGVzID09IG51bGwpIGRhdGEucGFyZW50aGFzaGVzID0gW107XHJcblx0XHRpZihkYXRhLnJlZm5hbWVzID09IG51bGwpIGRhdGEucmVmbmFtZXMgPSBbXTtcclxuXHRcclxuXHRcdHRoaXMuc2hhID0gZGF0YS5zaGE7XHJcblx0XHR0aGlzLnNzaGEgPSBkYXRhLnNzaGE7XHJcblx0XHR0aGlzLnN1YmplY3QgPSBkYXRhLnN1YmplY3Q7XHJcblx0XHR0aGlzLmluZGV4WSA9IGNvbnRhaW5lci5tYXhJbmRleFkgKys7XHJcblx0XHRcclxuXHRcdHRoaXMuY29tbWl0dGVyID0gbmV3IElkZW50aXR5KHRoaXMuZGF0YS5jb21taXR0ZXJuYW1lLCB0aGlzLmRhdGEuY29tbWl0dGVyZW1haWwsIG5ldyBEYXRlKHRoaXMuZGF0YS5jb21taXR0ZXJkYXRlKS5nZXRUaW1lKCkpO1xyXG5cdFx0dGhpcy5hdXRob3IgPSBuZXcgSWRlbnRpdHkodGhpcy5kYXRhLmF1dGhvcm5hbWUsIHRoaXMuZGF0YS5hdXRob3JlbWFpbCwgbmV3IERhdGUodGhpcy5kYXRhLmF1dGhvcmRhdGUpLmdldFRpbWUoKSk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBnZXRTaG9ydFNoYSgpIDogc3RyaW5nIHtcclxuXHRcdHJldHVybiB0aGlzLnNzaGE7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBnZXRGdWxsU2hhKCkgOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIHRoaXMuc2hhO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgaW5pdFJlbGF0aW9ucygpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFxyXG5cdFx0dGhpcy5kYXRhLnBhcmVudGhhc2hlcy5mb3JFYWNoKCBoYXNoID0+IHtcclxuXHRcdFx0dmFyIHBhcmVudENvbW1pdCA9IHRoaXMuY29udGFpbmVyLmNvbW1pdHNbaGFzaF07XHJcblxyXG5cdFx0XHQvLyBDcmVhdGUgYSB2aXJ0dWFsIGNvbW1pdFxyXG5cdFx0XHRpZihwYXJlbnRDb21taXQgPT0gbnVsbCkge1xyXG5cdFx0XHRcdHBhcmVudENvbW1pdCA9IG5ldyBDb21taXQodGhpcy5jb250YWluZXIsICB7c2hhOiBoYXNoK01hdGgucmFuZG9tKCl9KTtcclxuXHRcdFx0XHRwYXJlbnRDb21taXQub3V0T2ZTY29wZSA9IHRydWU7XHJcblx0XHRcdFx0c2VsZi5jb250YWluZXIuYWRkQ29tbWl0KHBhcmVudENvbW1pdCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMucGFyZW50cy5wdXNoKHBhcmVudENvbW1pdCk7XHJcblx0XHRcdHBhcmVudENvbW1pdC5jaGlsZHMucHVzaCh0aGlzKTtcclxuXHRcdFx0dGhpcy5zaWJsaW5ncyA9IHBhcmVudENvbW1pdC5jaGlsZHM7IC8vIHRoaXMgd2lsbCBiZSBvdmVyd2l0dGVuIGFzIG5ldyBjaGlsZHMgYXJlIGZvdW5kXHJcblx0XHRcdFxyXG5cdFx0XHRpZih0aGlzLnBhcmVudHMubGVuZ3RoID4gMCkge1xyXG5cdFx0XHRcdHZhciBkcCA9IHRoaXMucGFyZW50c1swXTtcclxuXHRcdFx0XHR0aGlzLmRpcmVjdHBhcmVudCA9IGRwO1xyXG5cdFx0XHRcdGRwLmRpcmVjdGNoaWxkID0gdGhpcztcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHRoaXMuZGF0YS5pbkhlYWRzLmZvckVhY2goaGVhZHNoYSA9PiB7XHJcblx0XHRcdHZhciBjb21taXQgPSB0aGlzLmNvbnRhaW5lci5jb21taXRzW2hlYWRzaGFdO1xyXG5cdFx0XHRpZih0aGlzLmluSGVhZHNSZWYuaW5kZXhPZihjb21taXQpID09PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHR0aGlzLmluSGVhZHNSZWYucHVzaChjb21taXQpXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBpbml0RGVmYXVsdEJyYW5jaCgpIHtcclxuXHRcdHZhciBjb21taXQ6IENvbW1pdCA9IHRoaXM7XHJcblx0XHRcdFxyXG5cdFx0d2hpbGUoY29tbWl0ICE9IG51bGwpIHtcclxuXHRcdFx0XHRcclxuXHRcdFx0Ly8gR1VFU1NJTkc6IFRoZSBjb3JyZWN0IGJyYW5jaCBpcyB1c3VhbGx5IHRoZSBvbmUgd2l0aCB0aGUgbGVhc3Qgc3BlY2lmaWMgbmFtZVxyXG5cdFx0XHRpZihjb21taXQuYnJhbmNoID09IG51bGwgfHwgY29tbWl0LmJyYW5jaC5zcGVjaWZpdHkgPiB0aGlzLmJyYW5jaC5zcGVjaWZpdHkpIHtcclxuXHRcdFx0XHRjb21taXQuYnJhbmNoID0gdGhpcy5icmFuY2g7XHJcblx0XHRcdFx0Ly9jb21taXQuZGVidWcoXCJhc3NpZ25pbmcgXCIrdGhpcy5icmFuY2gucmVmKVxyXG5cdFx0XHR9XHJcblx0XHRcdGNvbW1pdC5icmFuY2guc3RhcnQgPSBjb21taXQ7IC8vIHRoaXMgZnVuY3Rpb24gd2lsbCB0cmF2ZXJzZSB0aGUgcGFyZW50cywgc28gdGhlIGxhc3Qgb25lIHdpbGwgYmUgdGhlIGZpcnN0IGNvbW1pdFxyXG5cdFx0XHRjb21taXQuYnJhbmNoLm9yaWdpbiA9IGNvbW1pdC5kaXJlY3RwYXJlbnQ7IC8vIHRoaXMgY291bGQgYmUgbnVsbCAtPiBpdCBpcyBvdXRzaWRlIG9mIHRoZSBoaXN0b3J5LlxyXG5cdFx0XHRjb21taXQgPSBjb21taXQuZGlyZWN0cGFyZW50O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRwdWJsaWMgaW5pdEhlYWRTcGVjaWZpdHkoKSB7XHJcblx0XHRmb3IgKHZhciBpPTA7IGk8dGhpcy5kYXRhLnJlZm5hbWVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciByZWZuYW1lID0gdGhpcy5kYXRhLnJlZm5hbWVzW2ldO1xyXG5cdFxyXG5cdFx0XHRpZighdGhpcy5jb250YWluZXIuY29uZmlnLnJlbW90ZU9ubHkgfHwgcmVmbmFtZS5pbmRleE9mKFwib3JpZ2luL1wiKSA9PSAwKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYodGhpcy5jb250YWluZXIuY29uZmlnLnJlbW90ZU9ubHkpIHtcclxuXHRcdFx0XHRcdHJlZm5hbWUgPSByZWZuYW1lLnJlcGxhY2UoL15vcmlnaW4uLywgJycpO1x0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHZhciBzcGVjaWZpdHkgPSByZWZuYW1lLnJlcGxhY2UoL1teXFwvLV0vZywgJycpLmxlbmd0aCoxMDAwO1xyXG5cdFx0XHRcdHNwZWNpZml0eSArPSByZWZuYW1lLnJlcGxhY2UoL1teYS16QS1aMC05LV0vLCAnJykubGVuZ3RoO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRoaXMuY29udGFpbmVyLmFkZEJyYW5jaChyZWZuYW1lLCB0aGlzLCBzcGVjaWZpdHkpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8qIGFzc2lnbiB0aGUgbW9zdCBzcGVjaWZpYyBoZWFkIG9uIHRoaXMgdGlwIGNvbW1pdCAqL1xyXG5cdFx0XHRcdGlmICh0aGlzLm1heFNwZWNpZml0eSA9PSBudWxsIHx8IHNwZWNpZml0eSA8IHRoaXMubWF4U3BlY2lmaXR5KSB7XHJcblx0XHRcdFx0XHRMb2dnZXIuZGVidWcoXCJhc3NpZ25pbmcgYnJhbmNoXCIsIHJlZm5hbWUsIHRoaXMuc2hhLCB0aGlzLm1heFNwZWNpZml0eSwgc3BlY2lmaXR5KVxyXG5cdFx0XHRcdFx0dGhpcy5tYXhTcGVjaWZpdHkgPSBzcGVjaWZpdHk7XHJcblx0XHRcdFx0XHR0aGlzLmJyYW5jaCA9IHRoaXMuY29udGFpbmVyLmhlYWRzTWFwW3JlZm5hbWVdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdHRoaXMuaW5pdERlZmF1bHRCcmFuY2goKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgaW5pdE1lcmdlcygpIHtcclxuXHJcblx0XHR0aGlzLm1lcmdlcyA9IHsgc3RhbmRhcmQ6IFtdLCBhbm9ueW1vdXM6IFtdfTtcclxuXHRcdHRoaXMud2FybmluZ3MgPSBbXTtcclxuXHRcdFxyXG5cdFx0Ly8gRGV0ZWN0IGEgbWVyZ2UgKG9jdG9wdXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQpXHJcblxyXG5cdFx0aWYodGhpcy5wYXJlbnRzLmxlbmd0aCA9PSAxKSB7XHJcblx0XHRcdHZhciBkcCA9IHRoaXMucGFyZW50c1swXTtcclxuXHRcdFx0dGhpcy5kaXJlY3RwYXJlbnQgPSBkcDtcclxuXHRcdFx0ZHAuZGlyZWN0Y2hpbGQgPSB0aGlzO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZih0aGlzLnBhcmVudHMubGVuZ3RoID49IDIpIHtcclxuXHRcdFx0dmFyIGRwID0gdGhpcy5wYXJlbnRzWzBdO1xyXG5cdFx0XHR0aGlzLmRpcmVjdHBhcmVudCA9IGRwO1xyXG5cdFx0XHRkcC5kaXJlY3RjaGlsZCA9IHRoaXM7XHJcblxyXG5cdFx0XHRmb3IodmFyIGkgPSAxIDsgaTx0aGlzLnBhcmVudHMubGVuZ3RoIDsgaSsrKSB7XHRcdFx0XHJcblx0XHRcdHZhciBtcCA9IHRoaXMucGFyZW50c1tpXTtcclxuXHRcclxuXHRcdFx0XHRpZihtcCAhPSBudWxsKSB7XHJcblx0XHJcblx0XHRcdFx0XHQvLyBDbHVlcyBpZiB0aGlzIGlzIGEgc3RhbmRhcmQgb3IgYW5vbnltb3VzIG1lcmdlXHJcblx0XHRcdFx0XHRpZihtcC5kYXRhLnJlZm5hbWVzLmxlbmd0aCA+IDAgLy8gVGhpcyBpcyBzdGFuZGFyZCBtZXJnZSB3aXRoIG1wcyBoZWFkXHJcblx0XHRcdFx0XHRcdHx8IG1wLmluSGVhZHNSZWYubGVuZ3RoICE9IGRwLmluSGVhZHNSZWYubGVuZ3RoIC8vIFRoZSBoZWFkcyBvZiBib3RoIGFyZSBkaWZmZXJlbnRcclxuXHRcdFx0XHRcdCkge1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dGhpcy5tZXJnZXMuc3RhbmRhcmQucHVzaCh7c291cmNlOiBtcH0pO1xyXG5cdFx0XHRcdFx0fSBlbHNlICB7XHJcblx0XHRcdFx0XHRcdC8vIFRoaXMgaXMgYSBhbm9ueW1vdXMgKGF1dG9tYXRpYykgbWVyZ2Ugb24gdGhlIHNhbWUgYnJhbmNoXHJcblx0XHRcdFx0XHRcdHRoaXMubWVyZ2VzLmFub255bW91cy5wdXNoKHtzb3VyY2U6IG1wfSlcclxuXHRcdFx0XHRcdFx0dGhpcy5pbml0QW5vbnltb3VzKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBpbml0QW5vbnltb3VzKCkge1xyXG5cdFx0Ly8gQ3JlYXRlIGEgZHVtbXkgYnJhbmNoIGZvciBhbm9ueW1vdXMgbWVyZ2VzLCB3aGljaCBpcyBhcyBzcGVjaWZpYyBhcyB0aGUgb3JpZ2luYWwgYnJhbmNoLiBcclxuXHRcdC8vIHRyeSBmaW5kaW5nIHRoZSBvcmlnaW5hbCBicmFuY2ggYnkgZ29pbmcgdXAgZGlyZWN0IGNoaWxkcywgd2hpY2ggd2lsbCBnZXQgdGhlIG9yaWdpbmFsXHJcblx0XHRcclxuXHRcdHZhciBzZWxmOiBDb21taXQgPSB0aGlzO1xyXG5cdFx0dGhpcy5tZXJnZXMuYW5vbnltb3VzLmZvckVhY2goX21lcmdlID0+IHtcclxuXHRcdFx0dmFyIG1lcmdlOiBDb21taXQgPSBfbWVyZ2Uuc291cmNlXHJcblx0XHRcdHZhciBjaGlsZCA9IHRoaXM7XHJcblx0XHRcdFxyXG5cdFx0XHR3aGlsZShjaGlsZCAhPSBudWxsICYmIGNoaWxkLmJyYW5jaCA9PSBudWxsKSB7XHJcblx0XHRcdFx0Y2hpbGQgPSBjaGlsZC5kaXJlY3RjaGlsZDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHQvKiB0aGlzIGlzIG9ubHkgYW4gYW5vbnltb3VzIGJyYW5jaCBoZWFkLCBpZiB0aGVyZSBpcyBvbmx5IG9uZSBjaGlsZCAodGhlIG1lcmdlKSBcclxuXHRcdFx0ICAgVE9ETzogaWYgdGhlcmUgYXJlIG11bHRpcGxlLCBpdCBtaWdodCByZXN1bHQgaW4gd3JvbmdseSBhc3NpZ25lZCBicmFuY2hlcyAqLyBcclxuXHRcdFx0aWYoY2hpbGQgIT0gbnVsbCAmJiBtZXJnZS5icmFuY2ggPT0gbnVsbCkge1xyXG5cdFx0XHRcdG1lcmdlLmJyYW5jaCA9IG5ldyBCcmFuY2goY2hpbGQuYnJhbmNoLnJlZitcIi9hbm9ueW1vdXNcIittZXJnZS5zaGErTWF0aC5yYW5kb20oKSwgbWVyZ2UsIGNoaWxkLmJyYW5jaC5zcGVjaWZpdHkrMSk7XHJcblx0XHRcdFx0bWVyZ2UuYnJhbmNoLmFub255bW91cyA9IHRydWU7XHJcblx0XHRcdFx0bWVyZ2UuYnJhbmNoLnBhcmVudCA9IGNoaWxkLmJyYW5jaDtcclxuXHRcdFx0XHRtZXJnZS5icmFuY2guc3RhcnQgPWNoaWxkO1xyXG5cdFx0XHRcdG1lcmdlLmJyYW5jaC5jYXRlZ29yeSA9IGNoaWxkLmJyYW5jaC5jYXRlZ29yeTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lci5oZWFkc01hcFttZXJnZS5icmFuY2gucmVmXSA9IG1lcmdlLmJyYW5jaDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZ2V0Q29sb3IobGlnaHRuZXNzOiBudW1iZXIpOiBzdHJpbmcge1xyXG5cdFx0aWYodGhpcy5icmFuY2ggPT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLndhcm4oXCJObyBCcmFuY2ggc2V0XCIpXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2YXIgYiA9IHRoaXMuYnJhbmNoO1xyXG5cdFx0XHRpZih0aGlzLmJyYW5jaC5hbm9ueW1vdXMpIHtcclxuXHRcdFx0XHRiID0gdGhpcy5icmFuY2gucGFyZW50O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHR2YXIgaHVlID0gYi5sYW5lICogMzAwL3RoaXMuY29udGFpbmVyLm1heFg7XHJcblx0XHRcdHJldHVybiBcImhzbChcIitodWUrXCIsIDEwMCUsIFwiK2xpZ2h0bmVzcytcIiUpXCI7XHJcblx0XHR9XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBoYXNNZXJnZXMoKTogYm9vbGVhbiB7XHJcblx0XHRyZXR1cm4gdGhpcy5tZXJnZXMuc3RhbmRhcmQubGVuZ3RoID4gMCB8fCB0aGlzLm1lcmdlcy5hbm9ueW1vdXMubGVuZ3RoID4gMDtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGdldFgoKSB7XHJcblx0XHRyZXR1cm4gaW5kZXhUb1godGhpcy5nZXRMYW5lKCkpOyBcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGdldFkoKSB7XHJcblx0XHRpZih0aGlzLm91dE9mU2NvcGUpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuY29udGFpbmVyLnJvb3RMYWJlbC5vZmZzZXRUb3AgKyAyMDtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLnZpZXcubGFiZWwub2Zmc2V0VG9wIC0gdGhpcy5jb250YWluZXIuZmlyc3RDb21taXQudmlldy5sYWJlbC5vZmZzZXRUb3AgKyB0aGlzLnZpZXcubGFiZWwub2Zmc2V0SGVpZ2h0IC8yO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZ2V0T3JpZ2luSW5kZXhZKCk6IG51bWJlciB7XHJcblx0XHRpZih0aGlzLmJyYW5jaC5vcmlnaW4gIT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmJyYW5jaC5vcmlnaW4uZ2V0SW5kZXhZKCk7XHJcblx0XHR9IGVsc2UgaWYodGhpcy5icmFuY2guc3RhcnQub3V0T2ZTY29wZSl7XHJcblx0XHRcdHJldHVybiB0aGlzLmNvbnRhaW5lci5tYXhJbmRleFk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5icmFuY2guc3RhcnQuaW5kZXhZO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgaW50ZXJzZWN0cyhvdGhlcjogQ29tbWl0KTogYm9vbGVhbiB7XHJcblx0XHR2YXIgb3RoZXJZPTk5OTk5OTksIHRoaXNZPTk5OTk5OTtcclxuXHRcdGlmKHRoaXMub3V0T2ZTY29wZSB8fCBvdGhlci5vdXRPZlNjb3BlKSByZXR1cm4gdHJ1ZTtcclxuXHRcdFxyXG5cdFx0aWYob3RoZXIuZGlyZWN0Y2hpbGQgIT0gbnVsbCkge1xyXG5cdFx0XHRvdGhlclkgPSBvdGhlci5kaXJlY3RjaGlsZC5pbmRleFk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmKHRoaXMuZGlyZWN0Y2hpbGQgIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzWSA9IHRoaXMuZGlyZWN0Y2hpbGQuaW5kZXhZO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdGhpcy5nZXRPcmlnaW5JbmRleFkoKSA+PSBNYXRoLm1pbihvdGhlci5pbmRleFksIG90aGVyWSkgJiYgTWF0aC5taW4odGhpc1ksIHRoaXMuaW5kZXhZKSA8PSBvdGhlci5nZXRPcmlnaW5JbmRleFkoKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGdldEluZGV4KCk6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gdGhpcy5kYXRhLmluZGV4O1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZ2V0SW5kZXhZKCk6IG51bWJlciB7XHJcblx0XHRyZXR1cm4gdGhpcy5pbmRleFk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyB3YXJuKHdhcm5pbmc6IHN0cmluZykge1xyXG5cdFx0dGhpcy53YXJuaW5ncy5wdXNoKHdhcm5pbmcpO1xyXG5cdFx0dGhpcy5kZWJ1Zyh3YXJuaW5nKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGRlYnVnKHdhcm5pbmc6IHN0cmluZykge1xyXG5cdFx0aWYoY29uc29sZSkge1xyXG5cdFx0XHRMb2dnZXIuZGVidWcod2FybmluZywgdGhpcyk7XHJcblx0XHR9XHJcblx0fVxyXG5cdFx0XHJcblx0cHVibGljIGdldExhbmUoKSB7XHJcblx0XHRpZih0aGlzLmJyYW5jaCAhPSBudWxsKSB7IC8vIFRPRE86IGFub255bW91cyBicmFuY2hlcyB3aWxsIGdldCB0aGVpciBpbmRleCBmcm9tIHBhcmVudCBvbmVzXHJcblx0XHRcdHJldHVybiB0aGlzLmJyYW5jaC5jb21taXQuYnJhbmNoLmxhbmU7XHJcblx0XHR9XHRcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHRcclxuXHJcblx0XHJcbn1cclxuXHRcclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbW1pdC50c1wiLz5cclxuXHJcbmNsYXNzIEJyYW5jaCB7XHJcblx0cHVibGljIHNwZWNpZml0eTogbnVtYmVyO1xyXG5cdHB1YmxpYyBzdGFydDogQ29tbWl0O1xyXG5cdHB1YmxpYyBvcmlnaW46IENvbW1pdDtcclxuXHRwdWJsaWMgY2F0ZWdvcnk6IHN0cmluZztcclxuXHRwdWJsaWMgY29tbWl0OiBDb21taXQ7IC8vIEhlYWQgY29tbWl0XHJcblx0cHVibGljIHJlZjogc3RyaW5nOyAvLyBOYW1lIG9mIHRoZSBicmFuY2hcclxuXHRwdWJsaWMgc2hvcnRuYW1lOiBzdHJpbmcgLy8gbmFtZSB3aXRob3V0IHJlcG8gXHJcblx0cHVibGljIGxhbmU6IG51bWJlcjtcclxuXHRwdWJsaWMgcGFyZW50OiBCcmFuY2g7XHJcblx0cHVibGljIGFub255bW91czogYm9vbGVhbjtcclxuXHRcclxuXHJcblx0Y29uc3RydWN0b3IocmVmbmFtZTogc3RyaW5nLCBjb21taXQ6IENvbW1pdCwgc3BlY2lmaXR5OiBudW1iZXIpIHtcclxuXHRcdHRoaXMucmVmID0gcmVmbmFtZTtcclxuXHRcdHRoaXMuY29tbWl0ID0gY29tbWl0O1xyXG5cdFx0dGhpcy5zcGVjaWZpdHkgPSBzcGVjaWZpdHk7XHJcblx0XHR0aGlzLnNob3J0bmFtZSA9IHJlZm5hbWUuc3BsaXQoXCJAXCIpWzBdO1xyXG5cdFx0dGhpcy5jYXRlZ29yeSA9IHRoaXMuc2hvcnRuYW1lLnN1YnN0cmluZygwLCB0aGlzLnNob3J0bmFtZS5sYXN0SW5kZXhPZihcIi9cIikpO1xyXG5cdH1cclxufSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
