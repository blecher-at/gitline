function indexToX(t){return 20*t+12}var AsyncLoadingItem=function(){function t(t,e,i,n,o){this.label=t,this.data=e,this.callback=i,this.index=n,this.of=o}return t}(),AsyncLoader=function(){function t(t){this.items=[],this.suspended=!1,this.element=t}return t.prototype.then=function(t,e,i){var n=this;return this.thenSingle(t,function(){for(var o=e(),r=o.length-1;r>=0;r--)n.items.unshift(new AsyncLoadingItem(t,o[r],i,r,o.length))}),this},t.prototype.thenSingle=function(t,e){return this.items.push(new AsyncLoadingItem(t,null,e,0,1)),this},t.prototype.start=function(t){void 0===t&&(t=!0),t&&(this.element.hidden=!1),this.next()},t.prototype.next=function(){var t=this,e=this.items.shift();void 0!==e?e.index%50===0?(this.showStatus(e),window.setTimeout(function(){Logger.debug("executing "+e.label+" ("+e.index+"/"+e.of+")"),t.execute(e)},0)):this.execute(e):this.element.hidden=!0},t.prototype.suspend=function(){this.suspended=!0},t.prototype.resume=function(){this.suspended=!1,this.next()},t.prototype.showStatus=function(t){this.element.innerHTML=t.label},t.prototype.execute=function(t){try{t.callback(t.data),this.suspended||this.next()}catch(e){this.error(e)}},t.prototype.error=function(t){Logger.error(t),this.element.innerHTML=t,this.suspend()},t}(),GitlineConfig=function(){function t(){this.dotHeight=6,this.dotWidth=8,this.remoteOnly=!1,this.avatars=[this.avatar_gravatar]}return t.prototype.avatar_gravatar=function(t){return"http://www.gravatar.com/avatar/"+CryptoJS.MD5(t.toLowerCase())+"?s=16&d=404"},t}(),Expandable=function(){function t(){}return t.extend=function(t){var e=t;return t.classList.add("gitline-expandable"),e.whenFull=function(i){e.onclick=function(n){2==n.detail&&(e.innerHTML=i,n.cancelBubble=!0,t.classList.add("gitline-expandable-expanded"))}},e.whenShort=function(i){e.innerHTML=i,e.onmouseout=function(n){e.innerHTML=i+" ",t.classList.remove("gitline-expandable-expanded")}},e},t}(),CommitProvider=function(){function t(t){this.url=t}return t.prototype.whenDone=function(t){this.callback(t)},t.prototype.withErrorCallback=function(t){this.errorCallback=t},t.prototype.withCallback=function(t){this.callback=t},t.prototype.onRequested=function(t){throw new Error("onRequested not implemented on "+this)},t.prototype.request=function(){this.onRequested(this.url)},t.prototype.error=function(t){this.errorCallback(t)},t}(),__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},LocalGit2JsonProvider=function(t){function e(){t.apply(this,arguments)}return __extends(e,t),e.prototype.onRequested=function(t){var e=this;jQuery.getJSON(t,{},function(t){e.whenDone(t)}).error(function(){e.error("Error loading git data from "+t+" create it using git2json")})},e}(CommitProvider),GithubCommitProvider=function(t){function e(e,i,n){t.call(this,e),this.forks=[],this.baseBranches=[],this.data={},this.done=!1,this.accessToken=n,this.limit=i,Logger.debug("github provider initialized")}return __extends(e,t),e.prototype.gitURL=function(t,e,i){void 0===i&&(i=""),Logger.debug("github getURL requested"),-1==t.indexOf("api.github.com")&&(t=t.replace(/.*github.com/,"https://api.github.com/repos/").replace(/\/\//g,"/"));var n=t+"/"+e+"?access_token="+this.accessToken+"&per_page="+this.limit+"&"+i+"&callback=?";return Logger.debug("URL : ",n),n},e.prototype.onRequested=function(t){Logger.debug("github provider requested"),this.loadForks(t)},e.prototype.loadForks=function(t){var e=this;jQuery.when(jQuery.getJSON(this.gitURL(t,"forks")),jQuery.getJSON(this.gitURL(t,"branches"))).then(function(i,n){Logger.debug("github provider forks loaded"),e.processBranches(t,n[0].data),e.forks=i[0].data,e.loadBranches()})},e.prototype.processBranches=function(t,e){var i=this;void 0!==e.message&&this.error(e.message),e.forEach(function(e){e.repo=void 0!==t.url?t.url:t,void 0!==t.full_name&&(e.name=e.name+"@"+t.full_name),i.baseBranches.push(e)})},e.prototype.loadBranches=function(){var t=this,e=this.forks.map(function(e){return jQuery.getJSON(t.gitURL(e.url,"branches"),function(i){Logger.debug("loaded branches for "+e.name),t.processBranches(e,i.data)})});jQuery.when.apply(jQuery,e).done(function(){Logger.debug("all branches loaded"),t.loadCommits()})},e.prototype.loadCommits=function(){var t=this,e=[];this.baseBranches.forEach(function(i){var n=t.data[i.commit.sha];void 0==n&&e.push(jQuery.getJSON(t.gitURL(i.repo,"commits","sha="+i.commit.sha),function(e){Logger.debug("loaded commits for "+i.name),t.processCommits(e.data)}))}),jQuery.when.apply(jQuery,e).done(function(){t.process()})},e.prototype.processCommits=function(t){var e=this;t.map(function(t){var e={};return e.sha=t.sha,e.ssha=t.sha.substring(0,8),e.parenthashes=t.parents.map(function(t){return t.sha}),e.authorname=t.commit.author.name,e.authoremail=t.commit.author.email,e.authordate=t.commit.author.date,e.authortimestamp=new Date(t.commit.author.date).getTime(),e.committername=t.commit.committer.name,e.committeremail=t.commit.committer.email,e.committerdate=t.commit.committer.date,e.committertimestamp=new Date(t.commit.committer.date).getTime(),e.subject=t.commit.message,e.body="",e.refnames=[],e.inHeads=[],e}).forEach(function(t){e.data[t.sha]=t})},e.prototype.process=function(){var t=this;this.baseBranches.forEach(function(e){var i=t.data[e.commit.sha];void 0==i||(e.assigned=!0,i.refnames.push(e.name),t.assignHeads(i))});var e={};Object.keys(this.data).sort(function(e,i){return t.data[i].committertimestamp-t.data[e].committertimestamp}).forEach(function(i){e[i]=t.data[i]}),this.whenDone(e)},e.prototype.assignHeads=function(t){var e=this;for(t.parents1=t.parenthashes.map(function(t){return t});t.parents1.length>0;){var i=[];t.parents1.forEach(function(n){var o=e.data[n];void 0!=o&&(o.inHeads.push(t.sha),o.parenthashes.forEach(function(t){-1===i.indexOf(t)&&i.push(t)}))}),t.parents1=i}},e}(CommitProvider),Gitline=function(){function t(){this.self=this,this.maxX=0,this.maxIndexY=0,this.commits={},this.headsMap={},this.config=new GitlineConfig}return t.prototype.addCommit=function(t){this.commits[t.getFullSha()]=t,void 0===this.firstCommit&&(this.firstCommit=t)},t.prototype.addBranch=function(t,e,i){var n=new Branch(t,e,i);this.headsMap[t]=n},t.prototype.render=function(){var t=this;this.canvas=new jsgl.Panel(this.graphicalPanel),this.al.thenSingle("Loading Data",function(){t.al.suspend(),t.commitProvider.withErrorCallback(function(e){t.al.error(e)}),t.commitProvider.withCallback(function(e){t.data=e,t.al.resume()}),t.commitProvider.request()}).then("Loading Commits",function(){return Object.keys(t.data)},function(e){var i=new Commit(t,t.data[e]);t.addCommit(i)}).thenSingle("Building Graph",function(){t.buildGraph()}).then("Drawing Labels",function(){return Object.keys(t.commits)},function(e){var i=t.commits[e];t.drawCommit(i)}).thenSingle("Creating Legend",function(){t.rootLabel=document.createElement("div"),t.rootLabel.className="commit-legend",t.textPanel.appendChild(t.rootLabel)}).then("Drawing Merges",function(){return Object.keys(t.commits)},function(e){var i=t.commits[e];t.drawReferences(i)}).thenSingle("Resizing",function(){t.graphicalPanel.style.width=indexToX(t.maxX+1)+"px",t.graphicalPanel.style.height=t.getHeight()+"px"}).start(),window.onresize=function(e){t.al.then("Redrawing",function(){return Object.keys(t.commits)},function(e){var i=t.commits[e];i.view.redraw()}).thenSingle("Resizing",function(){t.graphicalPanel.style.width=indexToX(t.maxX+1)+"px",t.graphicalPanel.style.height=t.getHeight()+"px"}).start(!1)}},t.prototype.getHeight=function(){return this.rootLabel.offsetTop-this.firstCommit.view.label.offsetTop},t.prototype.buildGraph=function(){var t=this,e=Object.keys(this.commits);e.forEach(function(e){var i=t.commits[e];i.initRelations()}),e.forEach(function(e){var i=t.commits[e];i.initHeadSpecifity(),i.initMerges()}),this.initBranches()},t.prototype.drawCommit=function(t){t.view=new CommitView(this.canvas,this.config,t),t.outOfScope===!1&&(t.view.label=this.drawLabel(t),t.view.label.onclick=function(){console&&Logger.debug(t)},this.textPanel.appendChild(t.view.label),t.view.label.style["padding-left"]=indexToX(this.maxX+1)+"px")},t.prototype.drawReferences=function(t){t.view.addRelations(),t.view.redraw()},t.prototype.drawLabel=function(t){var e=document.createElement("div");e.className="commit-legend";var i=t.getShortSha(),n=t.getFullSha(),o=Expandable.extend(document.createElement("span"));if(o.whenShort(i+" "),o.whenFull(n),o.style.fontFamily="Courier",e.appendChild(o),e.appendChild(this.drawIdentity("author",t.author)),t.author.email!=t.committer.email&&e.appendChild(this.drawIdentity("committer",t.committer)),t.branch&&t.branch.commit===t&&!t.branch.anonymous){var r=document.createElement("span");r.className="head-label",r.style.backgroundColor=t.getColor(40),r.style.color="white",r.style.paddingLeft=r.style.paddingRight="2px",r.innerHTML=t.branch.ref,e.appendChild(r)}var a=document.createElement("span");return a.innerHTML=" "+t.subject,a.style.color=t.hasMerges()?"grey":"black",e.appendChild(a),e.style.position="relative",e},t.prototype.drawIdentity=function(t,e){var i=Expandable.extend(document.createElement("gitline-identity"));i.setAttribute("class",t),i.setAttribute("name",e.name);var n=e.name+" &lt;"+e.email.toLowerCase()+"&gt;";return i.setAttribute("title",n),i.style.background=this.config.avatars.map(function(t){return"url("+t(e.email)+") no-repeat"}).join(", "),i.whenFull(n),i.whenShort(" "),i},t.prototype.initBranches=function(){for(var t=Object.keys(this.headsMap),e=0;e<t.length;e++){var i=t[e],n=this.headsMap[i];n.commit.initDefaultBranch()}var o=this;t.sort(function(t,e){var i=o.headsMap[t].commit,n=o.headsMap[e].commit;return i===n?0:i.branch.category===n.branch.category?i.branch.specifity-n.branch.specifity:i.branch.category.length-n.branch.category.length});for(var r=0,e=0;e<t.length;e++){var i=t[e],n=this.headsMap[i],a=n.commit;if(a.branch===n){n.lane=r,r++;for(var s=0;s<t.length;s++){for(var h=!0,c=0;c<t.length;c++){var d=t[c],l=this.headsMap[d].commit;(void 0===l||l.branch!=n&&l.branch.lane===s&&(a.intersects(l)||a.branch.category!=l.branch.category))&&(h=!1)}if(h){Logger.debug("NO INTERSECTS: ",a.branch.ref," - ",l.branch.ref),n.lane=s;break}}this.maxX=Math.max(this.maxX,n.lane)}}},t.prototype.fromJSON=function(t){return this.fromProvider(new LocalGit2JsonProvider(t))},t.prototype.fromProvider=function(t){return this.commitProvider=t,this},t.prototype.renderTo=function(t){return void 0!==this.headerPanel&&t.appendChild(this.headerPanel),t.appendChild(this.loadingPanel=document.createElement("gitline-loadingpanel")),t.appendChild(this.contentPanel=document.createElement("gitline-contentpanel")),this.contentPanel.appendChild(this.graphicalPanel=document.createElement("gitline-graphicalpanel")),this.contentPanel.appendChild(this.textPanel=document.createElement("gitline-textpanel")),this.al=new AsyncLoader(this.loadingPanel),this.render(),this},t.prototype.withHeader=function(t){return"string"==typeof t?(this.headerPanel=document.createElement("gitline-headerpanel"),this.headerPanel.innerHTML=t):this.headerPanel=t,this},t}(),Shape=function(){function t(t,e){this.dependencies=[],this.canvas=t,this.element=e}return t.prototype.addIfMissing=function(){void 0!==this.element&&null==this.renderedTo&&(this.addElements(),this.renderedTo=this.canvas)},t.prototype.addElements=function(){this.canvas.addElement(this.element)},t.prototype.update=function(){this.dependencies.forEach(function(t){t.update()})},t.prototype.dependsOn=function(t){t.dependencies.push(this)},t}(),Dot=function(t){function e(e){t.call(this,e,e.createRectangle())}return __extends(e,t),e.prototype.size=function(t,e){return this.width=t,this.height=e,this.element.setWidth(t),this.element.setHeight(e),this.element.setXRadius(t/4),this.element.setYRadius(t/4),this.update(),this.addIfMissing(),this},e.prototype.at=function(t,e){return this.x=t,this.y=e,this.update(),this.addIfMissing(),this},e.prototype.color=function(t,e){return this.element.getStroke().setWeight(1),this.element.getStroke().setColor(t),this.element.getFill().setColor(e),this},e.prototype.update=function(){this.element.setLocationXY(this.x-this.width/2,this.y-this.height/2),t.prototype.update.call(this)},e}(Shape),BaseLink=function(t){function e(e,i){t.call(this,e,i)}return __extends(e,t),e.prototype.from=function(t){return this.dependsOn(t),this.parentDot=t,this},e.prototype.to=function(t){return this.childDot=t,this},e.prototype.color=function(t){return this.element.getStroke().setWeight(1),this.element.getStroke().setColor(t),this.lineColor=t,this.addIfMissing(),this},e}(Shape),Curve=function(t){function e(e){t.call(this,e,e.createCurve()),this.arrow=this.canvas.createPolygon()}return __extends(e,t),e.prototype.addElements=function(){t.prototype.addElements.call(this),this.canvas.addElement(this.arrow)},e.prototype.update=function(){var t=this.childDot.x,e=this.childDot.y,i=this.parentDot.x,n=this.parentDot.y,o=this.lineColor,r=i>t?1:-1;this.element.setStartPointXY(i,n-this.parentDot.height/2),this.element.setEndPointXY(t+this.childDot.width/2*r,e),this.element.setControl2PointXY(i,e),this.element.setControl1PointXY(i,e),this.element.getStroke().setWeight(1),this.element.getStroke().setColor(o),this.arrow.getStroke().setWeight(0),this.arrow.getFill().setColor(o),this.arrow.clearPoints(),this.arrow.addPointXY(0,0),this.arrow.addPointXY(6,-4),this.arrow.addPointXY(6,4);for(var a=0;a<this.arrow.getPointsCount();a++){var s=this.arrow.getPointAt(a).X,h=this.arrow.getPointAt(a).Y;this.arrow.setPointXYAt(s*r+t+this.childDot.width/2*r,h+e,a)}},e}(BaseLink),Straight=function(t){function e(e){t.call(this,e,e.createLine())}return __extends(e,t),e.prototype.update=function(){t.prototype.update.call(this),this.element.setStartPointXY(this.parentDot.x,this.parentDot.y-this.parentDot.height/2),this.element.setEndPointXY(this.childDot.x,this.childDot.y+this.childDot.height/2)},e}(BaseLink),Creation=function(t){function e(e){t.call(this,e,e.createLine()),this.secondLine=e.createLine()}return __extends(e,t),e.prototype.addElements=function(){t.prototype.addElements.call(this),this.canvas.addElement(this.secondLine)},e.prototype.update=function(){t.prototype.update.call(this),this.parentDot.x<this.childDot.x?this.element.setStartPointXY(this.parentDot.x+this.parentDot.width/2,this.parentDot.y):this.element.setStartPointXY(this.parentDot.x-this.parentDot.width/2,this.parentDot.y),this.element.setEndPointXY(this.childDot.x,this.parentDot.y),this.element.getStroke().setWeight(1),this.element.getStroke().setDashStyle(jsgl.DashStyles.DASH),this.element.getStroke().setColor(this.lineColor),this.secondLine.setStartPointXY(this.childDot.x,this.parentDot.y),this.secondLine.setEndPointXY(this.childDot.x,this.childDot.y+this.childDot.height/2),this.secondLine.getStroke().setWeight(1),this.secondLine.getStroke().setColor(this.lineColor)},e}(BaseLink),CommitView=function(){function t(t,e,i){this.lines=[],this.canvas=t,this.config=e,this.commit=i,this.dot=new Dot(this.canvas)}return t.prototype.addRelations=function(){var t=this;if(null!=this.commit.directparent){var e;e=this.commit.getLane()==this.commit.directparent.getLane()||this.commit.directparent.outOfScope?new Straight(this.canvas).from(this.commit.directparent.view.dot).to(this.dot).color(this.commit.getColor(20)):new Creation(this.canvas).from(this.commit.directparent.view.dot).to(this.dot).color(this.commit.getColor(30)),this.lines.push(e)}var i=this.commit.merges.standard.concat(this.commit.merges.anonymous);i.forEach(function(e){t.lines.push(new Curve(t.canvas).from(e.source.view.dot).to(t.dot).color(e.source.getColor(35)))})},t.prototype.redraw=function(){this.dot.at(this.commit.getX(),this.commit.getY()).size(this.config.dotWidth,this.config.dotHeight).color(this.commit.getColor(20),this.commit.getColor(80))},t}(),Identity=function(){function t(t,e,i){this.name=t,this.email=e,this.date=i}return t}(),Commit=function(){function t(t,e){this.warnings=[],this.inHeadsRef=[],this.parents=[],this.childs=[],this.siblings=[],this.outOfScope=!1,this.merges={standard:[],anonymous:[]},this.container=t,this.data=e,this.data.obj=this,null==e.inHeads&&(e.inHeads=[]),null==e.parenthashes&&(e.parenthashes=[]),null==e.refnames&&(e.refnames=[]),this.sha=e.sha,this.ssha=e.ssha,this.subject=e.subject,this.indexY=t.maxIndexY++,this.committer=new Identity(this.data.committername,this.data.committeremail,new Date(this.data.committerdate).getTime()),this.author=new Identity(this.data.authorname,this.data.authoremail,new Date(this.data.authordate).getTime())}return t.prototype.getShortSha=function(){return this.ssha},t.prototype.getFullSha=function(){return this.sha},t.prototype.initRelations=function(){var e=this,i=this;this.data.parenthashes.forEach(function(n){var o=e.container.commits[n];if(null==o&&(o=new t(e.container,{sha:n+Math.random()}),o.outOfScope=!0,i.container.addCommit(o)),e.parents.push(o),o.childs.push(e),e.siblings=o.childs,e.parents.length>0){var r=e.parents[0];e.directparent=r,r.directchild=e}}),this.data.inHeads.forEach(function(t){var i=e.container.commits[t];void 0===e.inHeadsRef.indexOf(i)&&e.inHeadsRef.push(i)})},t.prototype.initDefaultBranch=function(){for(var t=this;null!=t;)(null==t.branch||t.branch.specifity>this.branch.specifity)&&(t.branch=this.branch),t.branch.start=t,t.branch.origin=t.directparent,t=t.directparent},t.prototype.initHeadSpecifity=function(){for(var t=0;t<this.data.refnames.length;t++){var e=this.data.refnames[t];if(!this.container.config.remoteOnly||0==e.indexOf("origin/")){this.container.config.remoteOnly&&(e=e.replace(/^origin./,""));var i=1e3*e.replace(/[^\/-]/g,"").length;i+=e.replace(/[^a-zA-Z0-9-]/,"").length,this.container.addBranch(e,this,i),(null==this.maxSpecifity||i<this.maxSpecifity)&&(Logger.debug("assigning branch",e,this.sha,this.maxSpecifity,i),this.maxSpecifity=i,this.branch=this.container.headsMap[e]),this.initDefaultBranch()}}},t.prototype.initMerges=function(){if(this.merges={standard:[],anonymous:[]},this.warnings=[],1==this.parents.length){var t=this.parents[0];this.directparent=t,t.directchild=this}if(this.parents.length>=2){var t=this.parents[0];this.directparent=t,t.directchild=this;for(var e=1;e<this.parents.length;e++){var i=this.parents[e];null!=i&&(i.data.refnames.length>0||i.inHeadsRef.length!=t.inHeadsRef.length?this.merges.standard.push({source:i}):(this.merges.anonymous.push({source:i}),this.initAnonymous()))}}},t.prototype.initAnonymous=function(){var t=this;this.merges.anonymous.forEach(function(e){for(var i=e.source,n=t;null!=n&&null==n.branch;)n=n.directchild;null!=n&&null==i.branch&&(i.branch=new Branch(n.branch.ref+"/anonymous"+i.sha+Math.random(),i,n.branch.specifity+1),i.branch.anonymous=!0,i.branch.parent=n.branch,i.branch.start=n,i.branch.category=n.branch.category,t.container.headsMap[i.branch.ref]=i.branch)})},t.prototype.getColor=function(t){if(null!=this.branch){var e=this.branch;this.branch.anonymous&&(e=this.branch.parent);var i=300*e.lane/this.container.maxX;return"hsl("+i+", 100%, "+t+"%)"}this.warn("No Branch set")},t.prototype.hasMerges=function(){return this.merges.standard.length>0||this.merges.anonymous.length>0},t.prototype.getX=function(){return indexToX(this.getLane())},t.prototype.getY=function(){return this.outOfScope?this.container.rootLabel.offsetTop+20:this.view.label.offsetTop-this.container.firstCommit.view.label.offsetTop+this.view.label.offsetHeight/2},t.prototype.getOriginIndexY=function(){return void 0!=this.branch.origin?this.branch.origin.getIndexY():this.branch.start.outOfScope?this.container.maxIndexY:this.branch.start.indexY},t.prototype.intersects=function(t){var e=9999999,i=999999;return this.outOfScope||t.outOfScope?!0:(null!=t.directchild&&(e=t.directchild.indexY),null!=this.directchild&&(i=this.directchild.indexY),this.getOriginIndexY()>=Math.min(t.indexY,e)&&Math.min(i,this.indexY)<=t.getOriginIndexY())},t.prototype.getIndex=function(){return this.data.index},t.prototype.getIndexY=function(){return this.indexY},t.prototype.warn=function(t){this.warnings.push(t),this.debug(t)},t.prototype.debug=function(t){console&&Logger.debug(t,this)},t.prototype.getLane=function(){return null!=this.branch?this.branch.commit.branch.lane:null},t}(),Branch=function(){function t(t,e,i){this.ref=t,this.commit=e,this.specifity=i,this.shortname=t.split("@")[0],this.category=this.shortname.substring(0,this.shortname.lastIndexOf("/"))}return t}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9zb3VyY2UvQ29uZmlnLnRzIiwiL3NvdXJjZS9Bc3luY0xvYWRlci50cyIsIi9zb3VyY2UvRXhwYW5kYWJsZS50cyIsIi9zb3VyY2UvQ29tbWl0UHJvdmlkZXIudHMiLCJnaXRsaW5lLmpzIiwiL3NvdXJjZS9wbHVnaW5zL0xvY2FsR2l0Mkpzb25Qcm92aWRlci50cyIsIi9zb3VyY2UvcGx1Z2lucy9naXRodWIudHMiLCIvc291cmNlL0dpdGxpbmUudHMiLCIvc291cmNlL3JlbmRlcmluZy9TaGFwZS50cyIsIi9zb3VyY2UvcmVuZGVyaW5nL0RvdC50cyIsIi9zb3VyY2UvcmVuZGVyaW5nL0Jhc2VMaW5rLnRzIiwiL3NvdXJjZS9yZW5kZXJpbmcvQ3VydmUudHMiLCIvc291cmNlL3JlbmRlcmluZy9TdHJhaWdodC50cyIsIi9zb3VyY2UvcmVuZGVyaW5nL0NyZWF0aW9uLnRzIiwiL3NvdXJjZS9Db21taXRWaWV3LnRzIiwiL3NvdXJjZS9Db21taXQudHMiLCIvc291cmNlL0JyYW5jaC50cyJdLCJuYW1lcyI6WyJpbmRleFRvWCIsImluZGV4IiwiQXN5bmNMb2FkaW5nSXRlbSIsIkFzeW5jTG9hZGluZ0l0ZW0uY29uc3RydWN0b3IiLCJBc3luY0xvYWRlciIsIkFzeW5jTG9hZGVyLmNvbnN0cnVjdG9yIiwiQXN5bmNMb2FkZXIudGhlbiIsIkFzeW5jTG9hZGVyLnRoZW5TaW5nbGUiLCJBc3luY0xvYWRlci5zdGFydCIsIkFzeW5jTG9hZGVyLm5leHQiLCJBc3luY0xvYWRlci5zdXNwZW5kIiwiQXN5bmNMb2FkZXIucmVzdW1lIiwiQXN5bmNMb2FkZXIuc2hvd1N0YXR1cyIsIkFzeW5jTG9hZGVyLmV4ZWN1dGUiLCJBc3luY0xvYWRlci5lcnJvciIsIkdpdGxpbmVDb25maWciLCJHaXRsaW5lQ29uZmlnLmNvbnN0cnVjdG9yIiwiR2l0bGluZUNvbmZpZy5hdmF0YXJfZ3JhdmF0YXIiLCJFeHBhbmRhYmxlIiwiRXhwYW5kYWJsZS5leHRlbmQiLCJDb21taXRQcm92aWRlciIsIkNvbW1pdFByb3ZpZGVyLmNvbnN0cnVjdG9yIiwiQ29tbWl0UHJvdmlkZXIud2hlbkRvbmUiLCJDb21taXRQcm92aWRlci53aXRoRXJyb3JDYWxsYmFjayIsIkNvbW1pdFByb3ZpZGVyLndpdGhDYWxsYmFjayIsIkNvbW1pdFByb3ZpZGVyLm9uUmVxdWVzdGVkIiwiQ29tbWl0UHJvdmlkZXIucmVxdWVzdCIsIkNvbW1pdFByb3ZpZGVyLmVycm9yIiwiX19leHRlbmRzIiwidGhpcyIsImQiLCJiIiwiX18iLCJjb25zdHJ1Y3RvciIsInAiLCJoYXNPd25Qcm9wZXJ0eSIsInByb3RvdHlwZSIsIk9iamVjdCIsImNyZWF0ZSIsIkxvY2FsR2l0Mkpzb25Qcm92aWRlciIsIl9zdXBlciIsIkxvY2FsR2l0Mkpzb25Qcm92aWRlci5jb25zdHJ1Y3RvciIsIkxvY2FsR2l0Mkpzb25Qcm92aWRlci5vblJlcXVlc3RlZCIsIkdpdGh1YkNvbW1pdFByb3ZpZGVyIiwiR2l0aHViQ29tbWl0UHJvdmlkZXIuY29uc3RydWN0b3IiLCJHaXRodWJDb21taXRQcm92aWRlci5naXRVUkwiLCJHaXRodWJDb21taXRQcm92aWRlci5vblJlcXVlc3RlZCIsIkdpdGh1YkNvbW1pdFByb3ZpZGVyLmxvYWRGb3JrcyIsIkdpdGh1YkNvbW1pdFByb3ZpZGVyLnByb2Nlc3NCcmFuY2hlcyIsIkdpdGh1YkNvbW1pdFByb3ZpZGVyLmxvYWRCcmFuY2hlcyIsIkdpdGh1YkNvbW1pdFByb3ZpZGVyLmxvYWRDb21taXRzIiwiR2l0aHViQ29tbWl0UHJvdmlkZXIucHJvY2Vzc0NvbW1pdHMiLCJHaXRodWJDb21taXRQcm92aWRlci5wcm9jZXNzIiwiR2l0aHViQ29tbWl0UHJvdmlkZXIuYXNzaWduSGVhZHMiLCJHaXRsaW5lIiwiR2l0bGluZS5jb25zdHJ1Y3RvciIsIkdpdGxpbmUuYWRkQ29tbWl0IiwiR2l0bGluZS5hZGRCcmFuY2giLCJHaXRsaW5lLnJlbmRlciIsIkdpdGxpbmUuZ2V0SGVpZ2h0IiwiR2l0bGluZS5idWlsZEdyYXBoIiwiR2l0bGluZS5kcmF3Q29tbWl0IiwiY29uc29sZSIsIkxvZ2dlciIsImRlYnVnIiwiY29tbWl0IiwiR2l0bGluZS5kcmF3UmVmZXJlbmNlcyIsIkdpdGxpbmUuZHJhd0xhYmVsIiwiR2l0bGluZS5kcmF3SWRlbnRpdHkiLCJHaXRsaW5lLmluaXRCcmFuY2hlcyIsImxIZWFkIiwic2VsZiIsImhlYWRzTWFwIiwibCIsInJIZWFkIiwiciIsImJyYW5jaCIsImNhdGVnb3J5Iiwic3BlY2lmaXR5IiwibGVuZ3RoIiwiR2l0bGluZS5mcm9tSlNPTiIsIkdpdGxpbmUuZnJvbVByb3ZpZGVyIiwiR2l0bGluZS5yZW5kZXJUbyIsIkdpdGxpbmUud2l0aEhlYWRlciIsIlNoYXBlIiwiU2hhcGUuY29uc3RydWN0b3IiLCJTaGFwZS5hZGRJZk1pc3NpbmciLCJTaGFwZS5hZGRFbGVtZW50cyIsIlNoYXBlLnVwZGF0ZSIsIlNoYXBlLmRlcGVuZHNPbiIsIkRvdCIsIkRvdC5jb25zdHJ1Y3RvciIsIkRvdC5zaXplIiwiRG90LmF0IiwiRG90LmNvbG9yIiwiRG90LnVwZGF0ZSIsIkJhc2VMaW5rIiwiQmFzZUxpbmsuY29uc3RydWN0b3IiLCJCYXNlTGluay5mcm9tIiwiQmFzZUxpbmsudG8iLCJCYXNlTGluay5jb2xvciIsIkN1cnZlIiwiQ3VydmUuY29uc3RydWN0b3IiLCJDdXJ2ZS5hZGRFbGVtZW50cyIsIkN1cnZlLnVwZGF0ZSIsIlN0cmFpZ2h0IiwiU3RyYWlnaHQuY29uc3RydWN0b3IiLCJTdHJhaWdodC51cGRhdGUiLCJDcmVhdGlvbiIsIkNyZWF0aW9uLmNvbnN0cnVjdG9yIiwiQ3JlYXRpb24uYWRkRWxlbWVudHMiLCJDcmVhdGlvbi51cGRhdGUiLCJDb21taXRWaWV3IiwiQ29tbWl0Vmlldy5jb25zdHJ1Y3RvciIsIkNvbW1pdFZpZXcuYWRkUmVsYXRpb25zIiwiQ29tbWl0Vmlldy5yZWRyYXciLCJJZGVudGl0eSIsIklkZW50aXR5LmNvbnN0cnVjdG9yIiwiQ29tbWl0IiwiQ29tbWl0LmNvbnN0cnVjdG9yIiwiQ29tbWl0LmdldFNob3J0U2hhIiwiQ29tbWl0LmdldEZ1bGxTaGEiLCJDb21taXQuaW5pdFJlbGF0aW9ucyIsIkNvbW1pdC5pbml0RGVmYXVsdEJyYW5jaCIsIkNvbW1pdC5pbml0SGVhZFNwZWNpZml0eSIsIkNvbW1pdC5pbml0TWVyZ2VzIiwiQ29tbWl0LmluaXRBbm9ueW1vdXMiLCJDb21taXQuZ2V0Q29sb3IiLCJDb21taXQuaGFzTWVyZ2VzIiwiQ29tbWl0LmdldFgiLCJDb21taXQuZ2V0WSIsIkNvbW1pdC5nZXRPcmlnaW5JbmRleFkiLCJDb21taXQuaW50ZXJzZWN0cyIsIkNvbW1pdC5nZXRJbmRleCIsIkNvbW1pdC5nZXRJbmRleFkiLCJDb21taXQud2FybiIsIkNvbW1pdC5kZWJ1ZyIsIkNvbW1pdC5nZXRMYW5lIiwiQnJhbmNoIiwiQnJhbmNoLmNvbnN0cnVjdG9yIl0sIm1hcHBpbmdzIjoiQUFRQSxRQUFBQSxVQUFrQkMsR0FDakJELE1BQWNBLElBQVBBLEVBQVlBLEdDUnBCLEdBQUFFLGtCQUFBLFdBT0NBLFFBQUFBLEdBQWFBLEVBQWVBLEVBQVdBLEVBQW9CQSxFQUFlQSxHQUN6RUMsS0FBS0EsTUFBUUEsRUFDYkEsS0FBS0EsS0FBT0EsRUFDWkEsS0FBS0EsU0FBV0EsRUFDaEJBLEtBQUtBLE1BQVFBLEVBQ2JBLEtBQUtBLEdBQUtBLEVBRVpELE1BQUFBLE1BRUFFLFlBQUEsV0FNQ0EsUUFBQUEsR0FBYUEsR0FITEMsS0FBQUEsU0FDQUEsS0FBQUEsV0FBcUJBLEVBRzVCQSxLQUFLQSxRQUFVQSxFQTBFakJELE1BdEVRQSxHQUFBQSxVQUFBQSxLQUFQQSxTQUFZQSxFQUFlQSxFQUF3QkEsR0FBbkRFLEdBQUFBLEdBQUFBLElBUUNBLE9BUEFBLE1BQUtBLFdBQVdBLEVBQU9BLFdBR3RCQSxJQUFJQSxHQURBQSxHQUFjQSxJQUNWQSxFQUFJQSxFQUFLQSxPQUFPQSxFQUFHQSxHQUFJQSxFQUFHQSxJQUNqQ0EsRUFBS0EsTUFBTUEsUUFBUUEsR0FBSUEsa0JBQWlC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TUFBTUEsS0FBS0EsR0FDcENBLEtBQUtBLFNBQVdBLEtBQUtBLFVBQVVBLFVBQVVBLEVBQUdBLEtBQUtBLFVBQVVBLFlBQVlBLE1BRXpFRCxNQUFBQSIsImZpbGUiOiJnaXRsaW5lLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJCcmFuY2gudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tbWl0LnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkdpdGxpbmUudHNcIi8+XG4vKiBnbG9iYWxzICovXG5kZWNsYXJlIHZhciBqc2dsOiBhbnk7XG5kZWNsYXJlIHZhciBDcnlwdG9KUzogYW55O1xuZGVjbGFyZSB2YXIgTG9nZ2VyOiBhbnk7XG5cbmZ1bmN0aW9uIGluZGV4VG9YKGluZGV4KSB7XG5cdHJldHVybiBpbmRleCAqMjAgKyAxMjtcbn1cblxuY2xhc3MgR2l0bGluZUNvbmZpZyB7XG5cdHB1YmxpYyBkb3RIZWlnaHQgPSA2O1xuXHRwdWJsaWMgZG90V2lkdGggPSA4O1xuXG5cdHB1YmxpYyByZW1vdGVPbmx5OiBib29sZWFuID0gZmFsc2U7XG5cblx0cHJpdmF0ZSBhdmF0YXJfZ3JhdmF0YXIgKGVtYWlsKSB7XG5cdFx0cmV0dXJuIFwiaHR0cDovL3d3dy5ncmF2YXRhci5jb20vYXZhdGFyL1wiK0NyeXB0b0pTLk1ENShlbWFpbC50b0xvd2VyQ2FzZSgpKStcIj9zPTE2JmQ9NDA0XCI7XG5cdH1cblxuXHRwdWJsaWMgYXZhdGFycyA6IEZ1bmN0aW9uW10gPSBbdGhpcy5hdmF0YXJfZ3JhdmF0YXJdO1xufVxuXG4iLCJcclxuY2xhc3MgQXN5bmNMb2FkaW5nSXRlbSB7XHJcblx0cHVibGljIGxhYmVsOiBzdHJpbmc7XHJcblx0cHVibGljIGRhdGE6IGFueTtcclxuXHRwdWJsaWMgY2FsbGJhY2s6IEZ1bmN0aW9uO1xyXG5cdHB1YmxpYyBpbmRleDogbnVtYmVyO1xyXG5cdHB1YmxpYyBvZiA6IG51bWJlcjtcclxuXHRcclxuXHRjb25zdHJ1Y3RvciAobGFiZWw6IHN0cmluZywgZGF0YTogYW55LCBjYWxsYmFjazogRnVuY3Rpb24sIGluZGV4OiBudW1iZXIsIG9mOiBudW1iZXIpIHtcclxuXHRcdHRoaXMubGFiZWwgPSBsYWJlbDtcclxuXHRcdHRoaXMuZGF0YSA9IGRhdGE7XHJcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XHJcblx0XHR0aGlzLmluZGV4ID0gaW5kZXg7XHJcblx0XHR0aGlzLm9mID0gb2Y7XHJcblx0fVxyXG59XHJcblxyXG5jbGFzcyBBc3luY0xvYWRlciB7XHJcblx0XHJcblx0cHJpdmF0ZSBlbGVtZW50OiBIVE1MRWxlbWVudDtcclxuXHRwcml2YXRlIGl0ZW1zOiBBc3luY0xvYWRpbmdJdGVtW10gPSBbXTtcclxuXHRwcml2YXRlIHN1c3BlbmRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHRjb25zdHJ1Y3RvciAoZWxlbWVudDogSFRNTEVsZW1lbnQpIHtcclxuXHRcdHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcblx0fVxyXG5cdFxyXG5cdC8qKiBkbyB0aGlzIGFzeW5jLCBkaXNwbGF5IHRoZSBsYWJlbCBhbmQgdGhlIGRhdGEgKi9cclxuXHRwdWJsaWMgdGhlbihsYWJlbDogc3RyaW5nLCBkYXRhY2FsbGJhY2s6IEZ1bmN0aW9uLCBjYWxsYmFjazogRnVuY3Rpb24pOiBBc3luY0xvYWRlciB7XHJcblx0XHR0aGlzLnRoZW5TaW5nbGUobGFiZWwsICgpID0+IHtcclxuXHRcdFx0Ly8gYWRkIGl0IHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHF1ZXVlXHJcblx0XHRcdHZhciBkYXRhOiBhbnlbXSA9IGRhdGFjYWxsYmFjaygpO1xyXG5cdFx0XHRmb3IodmFyIGkgPSBkYXRhLmxlbmd0aC0xOyBpPj0gMDsgaS0tKSB7XHJcblx0XHRcdFx0dGhpcy5pdGVtcy51bnNoaWZ0KG5ldyBBc3luY0xvYWRpbmdJdGVtKGxhYmVsLCBkYXRhW2ldLCBjYWxsYmFjaywgaSwgZGF0YS5sZW5ndGgpKTtcdFxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgdGhlblNpbmdsZShsYWJlbDogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pOiBBc3luY0xvYWRlciB7XHJcblx0XHR0aGlzLml0ZW1zLnB1c2gobmV3IEFzeW5jTG9hZGluZ0l0ZW0obGFiZWwsIG51bGwsIGNhbGxiYWNrLCAwLCAxKSk7XHJcblx0XHRyZXR1cm4gdGhpcztcdFxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgc3RhcnQoc2hpZWxkOiBib29sZWFuID0gdHJ1ZSkge1xyXG5cdFx0aWYoc2hpZWxkKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcdFxyXG5cdFx0fVxyXG5cdFx0dGhpcy5uZXh0KCk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBuZXh0KCkge1xyXG5cdFx0dmFyIG5leHRJdGVtOiBBc3luY0xvYWRpbmdJdGVtID0gdGhpcy5pdGVtcy5zaGlmdCgpO1xyXG5cdFx0aWYobmV4dEl0ZW0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAvLyBhdm9pZCB5aWVsZGluZyBjb250cm9sIHVubmVjZXNzYXJpbHksIGJ1dCBsaW1pdCBzdGFjayBkZXB0aCBhdCB0aGUgc2FtZSB0aW1lXHJcblx0XHRcdGlmICgobmV4dEl0ZW0uaW5kZXggJSA1MCkgPT09IDApIHtcclxuXHRcdFx0XHR0aGlzLnNob3dTdGF0dXMobmV4dEl0ZW0pO1xyXG5cdCAgICBcdFx0d2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5kZWJ1ZyhcImV4ZWN1dGluZyBcIituZXh0SXRlbS5sYWJlbCsgXCIgKFwiK25leHRJdGVtLmluZGV4K1wiL1wiK25leHRJdGVtLm9mK1wiKVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUobmV4dEl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUobmV4dEl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cHVibGljIHN1c3BlbmQoKSB7XHJcblx0XHR0aGlzLnN1c3BlbmRlZCA9IHRydWU7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyByZXN1bWUoKSB7XHJcblx0XHR0aGlzLnN1c3BlbmRlZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5uZXh0KCk7XHJcblx0fVxyXG5cdHB1YmxpYyBzaG93U3RhdHVzKGl0ZW06IEFzeW5jTG9hZGluZ0l0ZW0pIHtcclxuXHRcdHRoaXMuZWxlbWVudC5pbm5lckhUTUwgPSBpdGVtLmxhYmVsOyAvLyArIFwiIChcIitpdGVtLmluZGV4ICsgXCIvXCIraXRlbS5vZitcIilcIjtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGV4ZWN1dGUoaXRlbTogQXN5bmNMb2FkaW5nSXRlbSkge1xyXG5cdFx0dHJ5IHtcclxuXHRcdFx0aXRlbS5jYWxsYmFjayhpdGVtLmRhdGEpO1xyXG5cdFx0XHRpZighdGhpcy5zdXNwZW5kZWQpIHtcclxuXHRcdFx0XHR0aGlzLm5leHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBjYXRjaCAoZSkge1xyXG5cdFx0XHR0aGlzLmVycm9yKGUpO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcblx0XHJcblx0cHVibGljIGVycm9yKGU6IGFueSkge1xyXG5cdFx0TG9nZ2VyLmVycm9yKGUpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGU7XHJcblx0XHR0aGlzLnN1c3BlbmQoKTtcclxuXHR9XHJcbn1cclxuIiwiLyoqXHJcbiAqIEVsZW1lbnRzIHdpdGggdHdvIGNvbnRlbnRzLCB0aGF0IGV4cGFuZCBvbiBkb3VibGUgY2xpY2tcclxuICovXHJcbiBcclxuXHRpbnRlcmZhY2UgSFRNTEV4cGFuZGFibGVFbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xyXG5cdFx0d2hlblNob3J0KGlubmVySFRNTDogc3RyaW5nKTogdm9pZDtcclxuXHRcdHdoZW5GdWxsKGlubmVySFRNTDogc3RyaW5nKTogdm9pZDtcclxuXHR9XHJcblx0XHJcblx0Y2xhc3MgRXhwYW5kYWJsZSB7XHJcblx0XHRwdWJsaWMgc3RhdGljIGV4dGVuZChlbGVtZW50OiBIVE1MRWxlbWVudCk6IEhUTUxFeHBhbmRhYmxlRWxlbWVudCB7XHJcblx0XHRcdHZhciBleHRlbmRlZDogSFRNTEV4cGFuZGFibGVFbGVtZW50ID0gPEhUTUxFeHBhbmRhYmxlRWxlbWVudD4gZWxlbWVudDtcclxuXHRcdFx0ZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2l0bGluZS1leHBhbmRhYmxlXCIpO1xyXG5cdFx0XHRcclxuXHRcdFx0ZXh0ZW5kZWQud2hlbkZ1bGwgPSAoaW5uZXJIVE1MOiBzdHJpbmcpID0+IHtcclxuXHRcdFx0XHRleHRlbmRlZC5vbmNsaWNrID0gKGV2ZW50KSA9PiB7XHJcblx0XHRcdFx0XHRpZihldmVudC5kZXRhaWwgPT0gMikge1xyXG5cdFx0XHRcdFx0XHRleHRlbmRlZC5pbm5lckhUTUwgPSBpbm5lckhUTUw7XHJcblx0XHRcdFx0XHRcdGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcblx0XHRcdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImdpdGxpbmUtZXhwYW5kYWJsZS1leHBhbmRlZFwiKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRleHRlbmRlZC53aGVuU2hvcnQgPSAgKGlubmVySFRNTDogc3RyaW5nKSA9PiB7XHJcblx0XHRcdFx0ZXh0ZW5kZWQuaW5uZXJIVE1MID0gaW5uZXJIVE1MO1xyXG5cdFx0XHRcdFx0ZXh0ZW5kZWQub25tb3VzZW91dCA9IChldmVudCkgPT4ge1xyXG5cdFx0XHRcdFx0ZXh0ZW5kZWQuaW5uZXJIVE1MID0gaW5uZXJIVE1MKyBcIiBcIjtcclxuXHRcdFx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImdpdGxpbmUtZXhwYW5kYWJsZS1leHBhbmRlZFwiKTtcclxuXHRcdFx0XHR9O1x0XHJcblx0XHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZXh0ZW5kZWQ7XHJcblx0XHR9XHRcdFxyXG5cdH1cclxuXHRcclxuIiwiLyoqXHJcbiAqIE5ldyB0eXBlc2NyaXB0IGZpbGVcclxuICovXHJcblxyXG5jbGFzcyBDb21taXRQcm92aWRlciB7XHJcbiBcdHByaXZhdGUgdXJsO1xyXG4gXHRwcml2YXRlIGNhbGxiYWNrOiBGdW5jdGlvbjtcclxuIFx0cHJpdmF0ZSBlcnJvckNhbGxiYWNrOiBGdW5jdGlvbjtcclxuIFx0XHJcblx0Y29uc3RydWN0b3IgKHVybDogc3RyaW5nKSB7XHJcblx0XHR0aGlzLnVybCA9IHVybDtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHdoZW5Eb25lKGRhdGE6IGFueSkge1xyXG5cdFx0dGhpcy5jYWxsYmFjayhkYXRhKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHdpdGhFcnJvckNhbGxiYWNrKGNhbGxiYWNrRm46IEZ1bmN0aW9uKSB7XHJcblx0XHR0aGlzLmVycm9yQ2FsbGJhY2sgPSBjYWxsYmFja0ZuO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgd2l0aENhbGxiYWNrKGNhbGxiYWNrRm46IEZ1bmN0aW9uKSB7XHJcblx0XHR0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2tGbjtcclxuXHR9XHJcblx0XHJcblx0LyoqIHRoaXMgbWV0aG9kIHNob3VsZCBiZSBvdmVyd3JpdHRlbi4gaXQgbXVzdCBjYWxsIHdoZW5Eb25lKGRhdGEpIHdoZW4gYWxsIGRhdGEgd2FzIGxvYWRlZC4gKi9cclxuXHRwdWJsaWMgb25SZXF1ZXN0ZWQodXJsOiBzdHJpbmcpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIm9uUmVxdWVzdGVkIG5vdCBpbXBsZW1lbnRlZCBvbiBcIit0aGlzKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHJlcXVlc3QoKSB7XHJcblx0XHR0aGlzLm9uUmVxdWVzdGVkKHRoaXMudXJsKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGVycm9yKGU6IGFueSkge1xyXG5cdFx0dGhpcy5lcnJvckNhbGxiYWNrKGUpO1xyXG5cdH1cclxufVxyXG5cdCIsInZhciBBc3luY0xvYWRpbmdJdGVtID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBc3luY0xvYWRpbmdJdGVtKGxhYmVsLCBkYXRhLCBjYWxsYmFjaywgaW5kZXgsIG9mKSB7XG4gICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbDtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIHRoaXMub2YgPSBvZjtcbiAgICB9XG4gICAgcmV0dXJuIEFzeW5jTG9hZGluZ0l0ZW07XG59KSgpO1xudmFyIEFzeW5jTG9hZGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBc3luY0xvYWRlcihlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5zdXNwZW5kZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB9XG4gICAgLyoqIGRvIHRoaXMgYXN5bmMsIGRpc3BsYXkgdGhlIGxhYmVsIGFuZCB0aGUgZGF0YSAqL1xuICAgIEFzeW5jTG9hZGVyLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKGxhYmVsLCBkYXRhY2FsbGJhY2ssIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMudGhlblNpbmdsZShsYWJlbCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gYWRkIGl0IHRvIHRoZSBiZWdpbm5pbmcgb2YgdGhlIHF1ZXVlXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGRhdGFjYWxsYmFjaygpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGRhdGEubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5pdGVtcy51bnNoaWZ0KG5ldyBBc3luY0xvYWRpbmdJdGVtKGxhYmVsLCBkYXRhW2ldLCBjYWxsYmFjaywgaSwgZGF0YS5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgQXN5bmNMb2FkZXIucHJvdG90eXBlLnRoZW5TaW5nbGUgPSBmdW5jdGlvbiAobGFiZWwsIGNhbGxiYWNrKSB7XG4gICAgICAgIHRoaXMuaXRlbXMucHVzaChuZXcgQXN5bmNMb2FkaW5nSXRlbShsYWJlbCwgbnVsbCwgY2FsbGJhY2ssIDAsIDEpKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBBc3luY0xvYWRlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiAoc2hpZWxkKSB7XG4gICAgICAgIGlmIChzaGllbGQgPT09IHZvaWQgMCkgeyBzaGllbGQgPSB0cnVlOyB9XG4gICAgICAgIGlmIChzaGllbGQpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5leHQoKTtcbiAgICB9O1xuICAgIEFzeW5jTG9hZGVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgbmV4dEl0ZW0gPSB0aGlzLml0ZW1zLnNoaWZ0KCk7XG4gICAgICAgIGlmIChuZXh0SXRlbSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBhdm9pZCB5aWVsZGluZyBjb250cm9sIHVubmVjZXNzYXJpbHksIGJ1dCBsaW1pdCBzdGFjayBkZXB0aCBhdCB0aGUgc2FtZSB0aW1lXG4gICAgICAgICAgICBpZiAoKG5leHRJdGVtLmluZGV4ICUgNTApID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U3RhdHVzKG5leHRJdGVtKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5kZWJ1ZyhcImV4ZWN1dGluZyBcIiArIG5leHRJdGVtLmxhYmVsICsgXCIgKFwiICsgbmV4dEl0ZW0uaW5kZXggKyBcIi9cIiArIG5leHRJdGVtLm9mICsgXCIpXCIpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5leGVjdXRlKG5leHRJdGVtKTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZShuZXh0SXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQXN5bmNMb2FkZXIucHJvdG90eXBlLnN1c3BlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3VzcGVuZGVkID0gdHJ1ZTtcbiAgICB9O1xuICAgIEFzeW5jTG9hZGVyLnByb3RvdHlwZS5yZXN1bWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3VzcGVuZGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubmV4dCgpO1xuICAgIH07XG4gICAgQXN5bmNMb2FkZXIucHJvdG90eXBlLnNob3dTdGF0dXMgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICB0aGlzLmVsZW1lbnQuaW5uZXJIVE1MID0gaXRlbS5sYWJlbDsgLy8gKyBcIiAoXCIraXRlbS5pbmRleCArIFwiL1wiK2l0ZW0ub2YrXCIpXCI7XG4gICAgfTtcbiAgICBBc3luY0xvYWRlci5wcm90b3R5cGUuZXhlY3V0ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpdGVtLmNhbGxiYWNrKGl0ZW0uZGF0YSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuc3VzcGVuZGVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFzeW5jTG9hZGVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIExvZ2dlci5lcnJvcihlKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmlubmVySFRNTCA9IGU7XG4gICAgICAgIHRoaXMuc3VzcGVuZCgpO1xuICAgIH07XG4gICAgcmV0dXJuIEFzeW5jTG9hZGVyO1xufSkoKTtcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJCcmFuY2gudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tbWl0LnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkdpdGxpbmUudHNcIi8+XG5mdW5jdGlvbiBpbmRleFRvWChpbmRleCkge1xuICAgIHJldHVybiBpbmRleCAqIDIwICsgMTI7XG59XG52YXIgR2l0bGluZUNvbmZpZyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gR2l0bGluZUNvbmZpZygpIHtcbiAgICAgICAgdGhpcy5kb3RIZWlnaHQgPSA2O1xuICAgICAgICB0aGlzLmRvdFdpZHRoID0gODtcbiAgICAgICAgdGhpcy5yZW1vdGVPbmx5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYXZhdGFycyA9IFt0aGlzLmF2YXRhcl9ncmF2YXRhcl07XG4gICAgfVxuICAgIEdpdGxpbmVDb25maWcucHJvdG90eXBlLmF2YXRhcl9ncmF2YXRhciA9IGZ1bmN0aW9uIChlbWFpbCkge1xuICAgICAgICByZXR1cm4gXCJodHRwOi8vd3d3LmdyYXZhdGFyLmNvbS9hdmF0YXIvXCIgKyBDcnlwdG9KUy5NRDUoZW1haWwudG9Mb3dlckNhc2UoKSkgKyBcIj9zPTE2JmQ9NDA0XCI7XG4gICAgfTtcbiAgICByZXR1cm4gR2l0bGluZUNvbmZpZztcbn0pKCk7XG4vKipcbiAqIEVsZW1lbnRzIHdpdGggdHdvIGNvbnRlbnRzLCB0aGF0IGV4cGFuZCBvbiBkb3VibGUgY2xpY2tcbiAqL1xudmFyIEV4cGFuZGFibGUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEV4cGFuZGFibGUoKSB7XG4gICAgfVxuICAgIEV4cGFuZGFibGUuZXh0ZW5kID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIGV4dGVuZGVkID0gZWxlbWVudDtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZ2l0bGluZS1leHBhbmRhYmxlXCIpO1xuICAgICAgICBleHRlbmRlZC53aGVuRnVsbCA9IGZ1bmN0aW9uIChpbm5lckhUTUwpIHtcbiAgICAgICAgICAgIGV4dGVuZGVkLm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGV0YWlsID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXh0ZW5kZWQuaW5uZXJIVE1MID0gaW5uZXJIVE1MO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJnaXRsaW5lLWV4cGFuZGFibGUtZXhwYW5kZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgZXh0ZW5kZWQud2hlblNob3J0ID0gZnVuY3Rpb24gKGlubmVySFRNTCkge1xuICAgICAgICAgICAgZXh0ZW5kZWQuaW5uZXJIVE1MID0gaW5uZXJIVE1MO1xuICAgICAgICAgICAgZXh0ZW5kZWQub25tb3VzZW91dCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV4dGVuZGVkLmlubmVySFRNTCA9IGlubmVySFRNTCArIFwiIFwiO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImdpdGxpbmUtZXhwYW5kYWJsZS1leHBhbmRlZFwiKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBleHRlbmRlZDtcbiAgICB9O1xuICAgIHJldHVybiBFeHBhbmRhYmxlO1xufSkoKTtcbi8qKlxuICogTmV3IHR5cGVzY3JpcHQgZmlsZVxuICovXG52YXIgQ29tbWl0UHJvdmlkZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIENvbW1pdFByb3ZpZGVyKHVybCkge1xuICAgICAgICB0aGlzLnVybCA9IHVybDtcbiAgICB9XG4gICAgQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLndoZW5Eb25lID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjayhkYXRhKTtcbiAgICB9O1xuICAgIENvbW1pdFByb3ZpZGVyLnByb3RvdHlwZS53aXRoRXJyb3JDYWxsYmFjayA9IGZ1bmN0aW9uIChjYWxsYmFja0ZuKSB7XG4gICAgICAgIHRoaXMuZXJyb3JDYWxsYmFjayA9IGNhbGxiYWNrRm47XG4gICAgfTtcbiAgICBDb21taXRQcm92aWRlci5wcm90b3R5cGUud2l0aENhbGxiYWNrID0gZnVuY3Rpb24gKGNhbGxiYWNrRm4pIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrRm47XG4gICAgfTtcbiAgICAvKiogdGhpcyBtZXRob2Qgc2hvdWxkIGJlIG92ZXJ3cml0dGVuLiBpdCBtdXN0IGNhbGwgd2hlbkRvbmUoZGF0YSkgd2hlbiBhbGwgZGF0YSB3YXMgbG9hZGVkLiAqL1xuICAgIENvbW1pdFByb3ZpZGVyLnByb3RvdHlwZS5vblJlcXVlc3RlZCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwib25SZXF1ZXN0ZWQgbm90IGltcGxlbWVudGVkIG9uIFwiICsgdGhpcyk7XG4gICAgfTtcbiAgICBDb21taXRQcm92aWRlci5wcm90b3R5cGUucmVxdWVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vblJlcXVlc3RlZCh0aGlzLnVybCk7XG4gICAgfTtcbiAgICBDb21taXRQcm92aWRlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB0aGlzLmVycm9yQ2FsbGJhY2soZSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tbWl0UHJvdmlkZXI7XG59KSgpO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbn07XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vQ29tbWl0UHJvdmlkZXIudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vR2l0bGluZS50c1wiLz5cbnZhciBMb2NhbEdpdDJKc29uUHJvdmlkZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhMb2NhbEdpdDJKc29uUHJvdmlkZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gTG9jYWxHaXQySnNvblByb3ZpZGVyKCkge1xuICAgICAgICBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgTG9jYWxHaXQySnNvblByb3ZpZGVyLnByb3RvdHlwZS5vblJlcXVlc3RlZCA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgalF1ZXJ5LmdldEpTT04odXJsLCB7fSwgZnVuY3Rpb24gKGpzb24pIHtcbiAgICAgICAgICAgIF90aGlzLndoZW5Eb25lKGpzb24pO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5lcnJvcihcIkVycm9yIGxvYWRpbmcgZ2l0IGRhdGEgZnJvbSBcIiArIHVybCArIFwiIGNyZWF0ZSBpdCB1c2luZyBnaXQyanNvblwiKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICByZXR1cm4gTG9jYWxHaXQySnNvblByb3ZpZGVyO1xufSkoQ29tbWl0UHJvdmlkZXIpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0NvbW1pdFByb3ZpZGVyLnRzXCIvPlxudmFyIEdpdGh1YkNvbW1pdFByb3ZpZGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoR2l0aHViQ29tbWl0UHJvdmlkZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gR2l0aHViQ29tbWl0UHJvdmlkZXIodXJsLCBsaW1pdCwgYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgdXJsKTtcbiAgICAgICAgdGhpcy5mb3JrcyA9IFtdO1xuICAgICAgICB0aGlzLmJhc2VCcmFuY2hlcyA9IFtdO1xuICAgICAgICB0aGlzLmRhdGEgPSB7fTtcbiAgICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbjtcbiAgICAgICAgdGhpcy5saW1pdCA9IGxpbWl0O1xuICAgICAgICBMb2dnZXIuZGVidWcoXCJnaXRodWIgcHJvdmlkZXIgaW5pdGlhbGl6ZWRcIik7XG4gICAgfVxuICAgIEdpdGh1YkNvbW1pdFByb3ZpZGVyLnByb3RvdHlwZS5naXRVUkwgPSBmdW5jdGlvbiAodXJsLCBhcGksIHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zID09PSB2b2lkIDApIHsgcGFyYW1zID0gXCJcIjsgfVxuICAgICAgICBMb2dnZXIuZGVidWcoXCJnaXRodWIgZ2V0VVJMIHJlcXVlc3RlZFwiKTtcbiAgICAgICAgLy8gY29udmVydCB0byBhcGkgdXJsIGFuZCByZW1vdmUgdHJhaWxpbmcgL1xuICAgICAgICBpZiAodXJsLmluZGV4T2YoXCJhcGkuZ2l0aHViLmNvbVwiKSA9PSAtMSkge1xuICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoLy4qZ2l0aHViLmNvbS8sIFwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy9cIikucmVwbGFjZSgvXFwvXFwvL2csIFwiL1wiKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZnVsbFVybCA9IHVybCArIFwiL1wiICsgYXBpICsgXCI/YWNjZXNzX3Rva2VuPVwiICsgdGhpcy5hY2Nlc3NUb2tlbiArIFwiJnBlcl9wYWdlPVwiICsgdGhpcy5saW1pdCArIFwiJlwiICsgcGFyYW1zICsgXCImY2FsbGJhY2s9P1wiO1xuICAgICAgICBMb2dnZXIuZGVidWcoXCJVUkwgOiBcIiwgZnVsbFVybCk7XG4gICAgICAgIHJldHVybiBmdWxsVXJsO1xuICAgIH07XG4gICAgR2l0aHViQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLm9uUmVxdWVzdGVkID0gZnVuY3Rpb24gKHVybCkge1xuICAgICAgICBMb2dnZXIuZGVidWcoXCJnaXRodWIgcHJvdmlkZXIgcmVxdWVzdGVkXCIpO1xuICAgICAgICB0aGlzLmxvYWRGb3Jrcyh1cmwpO1xuICAgIH07XG4gICAgR2l0aHViQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLmxvYWRGb3JrcyA9IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgalF1ZXJ5LndoZW4oalF1ZXJ5LmdldEpTT04odGhpcy5naXRVUkwodXJsLCBcImZvcmtzXCIpKSwgalF1ZXJ5LmdldEpTT04odGhpcy5naXRVUkwodXJsLCBcImJyYW5jaGVzXCIpKSkudGhlbihmdW5jdGlvbiAoZm9ya3MsIGJyYW5jaGVzKSB7XG4gICAgICAgICAgICBMb2dnZXIuZGVidWcoXCJnaXRodWIgcHJvdmlkZXIgZm9ya3MgbG9hZGVkXCIpO1xuICAgICAgICAgICAgLy90aGlzLmJhc2VDb21taXRzID0gY29tbWl0c1swXS5kYXRhO1xuICAgICAgICAgICAgX3RoaXMucHJvY2Vzc0JyYW5jaGVzKHVybCwgYnJhbmNoZXNbMF0uZGF0YSk7XG4gICAgICAgICAgICBfdGhpcy5mb3JrcyA9IGZvcmtzWzBdLmRhdGE7XG4gICAgICAgICAgICBfdGhpcy5sb2FkQnJhbmNoZXMoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBHaXRodWJDb21taXRQcm92aWRlci5wcm90b3R5cGUucHJvY2Vzc0JyYW5jaGVzID0gZnVuY3Rpb24gKGZvcmssIGRhdGEpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKGRhdGEubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGRhdGEubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChicmFuY2gpIHtcbiAgICAgICAgICAgIGJyYW5jaC5yZXBvID0gZm9yay51cmwgIT09IHVuZGVmaW5lZCA/IGZvcmsudXJsIDogZm9yaztcbiAgICAgICAgICAgIGlmIChmb3JrLmZ1bGxfbmFtZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYnJhbmNoLm5hbWUgPSBicmFuY2gubmFtZSArIFwiQFwiICsgZm9yay5mdWxsX25hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfdGhpcy5iYXNlQnJhbmNoZXMucHVzaChicmFuY2gpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEdpdGh1YkNvbW1pdFByb3ZpZGVyLnByb3RvdHlwZS5sb2FkQnJhbmNoZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBmb3JrUmVxdWVzdHMgPSB0aGlzLmZvcmtzLm1hcChmdW5jdGlvbiAoZm9yaykge1xuICAgICAgICAgICAgcmV0dXJuIGpRdWVyeS5nZXRKU09OKF90aGlzLmdpdFVSTChmb3JrLnVybCwgXCJicmFuY2hlc1wiKSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBMb2dnZXIuZGVidWcoXCJsb2FkZWQgYnJhbmNoZXMgZm9yIFwiICsgZm9yay5uYW1lKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzQnJhbmNoZXMoZm9yaywgZGF0YS5kYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgalF1ZXJ5LndoZW4uYXBwbHkoalF1ZXJ5LCBmb3JrUmVxdWVzdHMpLmRvbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgTG9nZ2VyLmRlYnVnKFwiYWxsIGJyYW5jaGVzIGxvYWRlZFwiKTtcbiAgICAgICAgICAgIF90aGlzLmxvYWRDb21taXRzKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgR2l0aHViQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLmxvYWRDb21taXRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgY29tbWl0UmVxdWVzdHMgPSBbXTtcbiAgICAgICAgdGhpcy5iYXNlQnJhbmNoZXMuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgICAgICAgdmFyIGNvbW1pdCA9IF90aGlzLmRhdGFbYi5jb21taXQuc2hhXTtcbiAgICAgICAgICAgIGlmIChjb21taXQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29tbWl0UmVxdWVzdHMucHVzaChqUXVlcnkuZ2V0SlNPTihfdGhpcy5naXRVUkwoYi5yZXBvLCBcImNvbW1pdHNcIiwgXCJzaGE9XCIgKyBiLmNvbW1pdC5zaGEpLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBMb2dnZXIuZGVidWcoXCJsb2FkZWQgY29tbWl0cyBmb3IgXCIgKyBiLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5wcm9jZXNzQ29tbWl0cyhkYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGpRdWVyeS53aGVuLmFwcGx5KGpRdWVyeSwgY29tbWl0UmVxdWVzdHMpLmRvbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucHJvY2VzcygpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIEdpdGh1YkNvbW1pdFByb3ZpZGVyLnByb3RvdHlwZS5wcm9jZXNzQ29tbWl0cyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGRhdGEubWFwKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICB2YXIgYyA9IHt9O1xuICAgICAgICAgICAgYy5zaGEgPSBkYXRhLnNoYTtcbiAgICAgICAgICAgIGMuc3NoYSA9IGRhdGEuc2hhLnN1YnN0cmluZygwLCA4KTtcbiAgICAgICAgICAgIGMucGFyZW50aGFzaGVzID0gZGF0YS5wYXJlbnRzLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5zaGE7IH0pO1xuICAgICAgICAgICAgYy5hdXRob3JuYW1lID0gZGF0YS5jb21taXQuYXV0aG9yLm5hbWU7XG4gICAgICAgICAgICBjLmF1dGhvcmVtYWlsID0gZGF0YS5jb21taXQuYXV0aG9yLmVtYWlsO1xuICAgICAgICAgICAgYy5hdXRob3JkYXRlID0gZGF0YS5jb21taXQuYXV0aG9yLmRhdGU7XG4gICAgICAgICAgICBjLmF1dGhvcnRpbWVzdGFtcCA9IG5ldyBEYXRlKGRhdGEuY29tbWl0LmF1dGhvci5kYXRlKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICBjLmNvbW1pdHRlcm5hbWUgPSBkYXRhLmNvbW1pdC5jb21taXR0ZXIubmFtZTtcbiAgICAgICAgICAgIGMuY29tbWl0dGVyZW1haWwgPSBkYXRhLmNvbW1pdC5jb21taXR0ZXIuZW1haWw7XG4gICAgICAgICAgICBjLmNvbW1pdHRlcmRhdGUgPSBkYXRhLmNvbW1pdC5jb21taXR0ZXIuZGF0ZTtcbiAgICAgICAgICAgIGMuY29tbWl0dGVydGltZXN0YW1wID0gbmV3IERhdGUoZGF0YS5jb21taXQuY29tbWl0dGVyLmRhdGUpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIGMuc3ViamVjdCA9IGRhdGEuY29tbWl0Lm1lc3NhZ2U7XG4gICAgICAgICAgICBjLmJvZHkgPSBcIlwiOyAvLyBUb2RvOiB3aGVyZSB0byBnZXQgdGhpcz9cbiAgICAgICAgICAgIGMucmVmbmFtZXMgPSBbXTsgLy8gc2V0IHdoZW4gcGFyc2luZyBicmFuY2hlc1xuICAgICAgICAgICAgYy5pbkhlYWRzID0gW107IC8vIHNldCB3aGVuIHBhcnNpbmcgYnJhbmNoZXNcbiAgICAgICAgICAgIHJldHVybiBjO1xuICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChjb21taXQpIHtcbiAgICAgICAgICAgIF90aGlzLmRhdGFbY29tbWl0LnNoYV0gPSBjb21taXQ7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgR2l0aHViQ29tbWl0UHJvdmlkZXIucHJvdG90eXBlLnByb2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHRoaXMuYmFzZUJyYW5jaGVzLmZvckVhY2goZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICAgIHZhciBjb21taXQgPSBfdGhpcy5kYXRhW2IuY29tbWl0LnNoYV07XG4gICAgICAgICAgICBpZiAoY29tbWl0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYi5hc3NpZ25lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29tbWl0LnJlZm5hbWVzLnB1c2goYi5uYW1lKTtcbiAgICAgICAgICAgICAgICBfdGhpcy5hc3NpZ25IZWFkcyhjb21taXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gU29ydFxuICAgICAgICB2YXIgbmV3ZGF0YSA9IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmRhdGEpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5kYXRhW2JdLmNvbW1pdHRlcnRpbWVzdGFtcCAtIF90aGlzLmRhdGFbYV0uY29tbWl0dGVydGltZXN0YW1wO1xuICAgICAgICB9KS5mb3JFYWNoKGZ1bmN0aW9uIChzaGEpIHtcbiAgICAgICAgICAgIG5ld2RhdGFbc2hhXSA9IF90aGlzLmRhdGFbc2hhXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMud2hlbkRvbmUobmV3ZGF0YSk7XG4gICAgfTtcbiAgICBHaXRodWJDb21taXRQcm92aWRlci5wcm90b3R5cGUuYXNzaWduSGVhZHMgPSBmdW5jdGlvbiAoY29tbWl0KSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGNvbW1pdC5wYXJlbnRzMSA9IGNvbW1pdC5wYXJlbnRoYXNoZXMubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTsgLy8gY29weSBhcnJheVxuICAgICAgICB3aGlsZSAoY29tbWl0LnBhcmVudHMxLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBuZXdQYXJlbnRzID0gW107XG4gICAgICAgICAgICBjb21taXQucGFyZW50czEuZm9yRWFjaChmdW5jdGlvbiAocGFyZW50SGFzaCkge1xuICAgICAgICAgICAgICAgIHZhciBwID0gX3RoaXMuZGF0YVtwYXJlbnRIYXNoXTtcbiAgICAgICAgICAgICAgICBpZiAocCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcC5pbkhlYWRzLnB1c2goY29tbWl0LnNoYSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGFkZCBhbGwgZ3JhbmRwYXJlbnRzIHRvIHRoZSBuZXdwYXJlbnRzXG4gICAgICAgICAgICAgICAgICAgIHAucGFyZW50aGFzaGVzLmZvckVhY2goZnVuY3Rpb24gKGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuZXdQYXJlbnRzLmluZGV4T2YoaCkgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFyZW50cy5wdXNoKGgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbW1pdC5wYXJlbnRzMSA9IG5ld1BhcmVudHM7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBHaXRodWJDb21taXRQcm92aWRlcjtcbn0pKENvbW1pdFByb3ZpZGVyKTtcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJCcmFuY2gudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tbWl0LnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbmZpZy50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJBc3luY0xvYWRlci50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJFeHBhbmRhYmxlLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbW1pdFByb3ZpZGVyLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInBsdWdpbnMvTG9jYWxHaXQySnNvblByb3ZpZGVyLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInBsdWdpbnMvZ2l0aHViLnRzXCIvPlxudmFyIEdpdGxpbmUgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEdpdGxpbmUoKSB7XG4gICAgICAgIHRoaXMuc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMubWF4WCA9IDA7XG4gICAgICAgIHRoaXMubWF4SW5kZXhZID0gMDtcbiAgICAgICAgdGhpcy5jb21taXRzID0ge307XG4gICAgICAgIHRoaXMuaGVhZHNNYXAgPSB7fTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBuZXcgR2l0bGluZUNvbmZpZygpO1xuICAgIH1cbiAgICBHaXRsaW5lLnByb3RvdHlwZS5hZGRDb21taXQgPSBmdW5jdGlvbiAoY29tbWl0KSB7XG4gICAgICAgIHRoaXMuY29tbWl0c1tjb21taXQuZ2V0RnVsbFNoYSgpXSA9IGNvbW1pdDtcbiAgICAgICAgLy8gZmlyc3QgY29tbWl0IG5lZWRlZCBieSByZW5kZXJpbmdcbiAgICAgICAgaWYgKHRoaXMuZmlyc3RDb21taXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5maXJzdENvbW1pdCA9IGNvbW1pdDtcbiAgICAgICAgfVxuICAgIH07XG4gICAgR2l0bGluZS5wcm90b3R5cGUuYWRkQnJhbmNoID0gZnVuY3Rpb24gKHJlZm5hbWUsIGNvbW1pdCwgc3BlY2lmaXR5KSB7XG4gICAgICAgIHZhciBicmFuY2ggPSBuZXcgQnJhbmNoKHJlZm5hbWUsIGNvbW1pdCwgc3BlY2lmaXR5KTtcbiAgICAgICAgdGhpcy5oZWFkc01hcFtyZWZuYW1lXSA9IGJyYW5jaDtcbiAgICB9O1xuICAgIEdpdGxpbmUucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5jYW52YXMgPSBuZXcganNnbC5QYW5lbCh0aGlzLmdyYXBoaWNhbFBhbmVsKTtcbiAgICAgICAgdGhpcy5hbC50aGVuU2luZ2xlKFwiTG9hZGluZyBEYXRhXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLmFsLnN1c3BlbmQoKTtcbiAgICAgICAgICAgIF90aGlzLmNvbW1pdFByb3ZpZGVyLndpdGhFcnJvckNhbGxiYWNrKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIF90aGlzLmFsLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX3RoaXMuY29tbWl0UHJvdmlkZXIud2l0aENhbGxiYWNrKGZ1bmN0aW9uIChqc29uKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZGF0YSA9IGpzb247XG4gICAgICAgICAgICAgICAgX3RoaXMuYWwucmVzdW1lKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzLmNvbW1pdFByb3ZpZGVyLnJlcXVlc3QoKTtcbiAgICAgICAgfSkudGhlbihcIkxvYWRpbmcgQ29tbWl0c1wiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBPYmplY3Qua2V5cyhfdGhpcy5kYXRhKTsgfSwgZnVuY3Rpb24gKHNoYSkge1xuICAgICAgICAgICAgdmFyIGNvbW1pdCA9IG5ldyBDb21taXQoX3RoaXMsIF90aGlzLmRhdGFbc2hhXSk7XG4gICAgICAgICAgICBfdGhpcy5hZGRDb21taXQoY29tbWl0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuU2luZ2xlKFwiQnVpbGRpbmcgR3JhcGhcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuYnVpbGRHcmFwaCgpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oXCJEcmF3aW5nIExhYmVsc1wiLCBmdW5jdGlvbiAoKSB7IHJldHVybiBPYmplY3Qua2V5cyhfdGhpcy5jb21taXRzKTsgfSwgZnVuY3Rpb24gKHNoYSkge1xuICAgICAgICAgICAgdmFyIGNvbW1pdCA9IF90aGlzLmNvbW1pdHNbc2hhXTtcbiAgICAgICAgICAgIF90aGlzLmRyYXdDb21taXQoY29tbWl0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuU2luZ2xlKFwiQ3JlYXRpbmcgTGVnZW5kXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzLnJvb3RMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgX3RoaXMucm9vdExhYmVsLmNsYXNzTmFtZSA9IFwiY29tbWl0LWxlZ2VuZFwiO1xuICAgICAgICAgICAgX3RoaXMudGV4dFBhbmVsLmFwcGVuZENoaWxkKF90aGlzLnJvb3RMYWJlbCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihcIkRyYXdpbmcgTWVyZ2VzXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIE9iamVjdC5rZXlzKF90aGlzLmNvbW1pdHMpOyB9LCBmdW5jdGlvbiAoc2hhKSB7XG4gICAgICAgICAgICB2YXIgY29tbWl0ID0gX3RoaXMuY29tbWl0c1tzaGFdO1xuICAgICAgICAgICAgX3RoaXMuZHJhd1JlZmVyZW5jZXMoY29tbWl0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuU2luZ2xlKFwiUmVzaXppbmdcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMuZ3JhcGhpY2FsUGFuZWwuc3R5bGUud2lkdGggPSBpbmRleFRvWChfdGhpcy5tYXhYICsgMSkgKyBcInB4XCI7XG4gICAgICAgICAgICBfdGhpcy5ncmFwaGljYWxQYW5lbC5zdHlsZS5oZWlnaHQgPSBfdGhpcy5nZXRIZWlnaHQoKSArIFwicHhcIjtcbiAgICAgICAgfSkuc3RhcnQoKTtcbiAgICAgICAgd2luZG93Lm9ucmVzaXplID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBfdGhpcy5hbC50aGVuKFwiUmVkcmF3aW5nXCIsIGZ1bmN0aW9uICgpIHsgcmV0dXJuIE9iamVjdC5rZXlzKF90aGlzLmNvbW1pdHMpOyB9LCBmdW5jdGlvbiAoc2hhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbW1pdCA9IF90aGlzLmNvbW1pdHNbc2hhXTtcbiAgICAgICAgICAgICAgICBjb21taXQudmlldy5yZWRyYXcoKTtcbiAgICAgICAgICAgIH0pLnRoZW5TaW5nbGUoXCJSZXNpemluZ1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuZ3JhcGhpY2FsUGFuZWwuc3R5bGUud2lkdGggPSBpbmRleFRvWChfdGhpcy5tYXhYICsgMSkgKyBcInB4XCI7XG4gICAgICAgICAgICAgICAgX3RoaXMuZ3JhcGhpY2FsUGFuZWwuc3R5bGUuaGVpZ2h0ID0gX3RoaXMuZ2V0SGVpZ2h0KCkgKyBcInB4XCI7XG4gICAgICAgICAgICB9KS5zdGFydChmYWxzZSk7XG4gICAgICAgIH07XG4gICAgfTtcbiAgICBHaXRsaW5lLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3RMYWJlbC5vZmZzZXRUb3AgLSB0aGlzLmZpcnN0Q29tbWl0LnZpZXcubGFiZWwub2Zmc2V0VG9wO1xuICAgIH07XG4gICAgR2l0bGluZS5wcm90b3R5cGUuYnVpbGRHcmFwaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIHNoYXMgPSBPYmplY3Qua2V5cyh0aGlzLmNvbW1pdHMpO1xuICAgICAgICBzaGFzLmZvckVhY2goZnVuY3Rpb24gKHNoYSkge1xuICAgICAgICAgICAgdmFyIGNvbW1pdCA9IF90aGlzLmNvbW1pdHNbc2hhXTtcbiAgICAgICAgICAgIGNvbW1pdC5pbml0UmVsYXRpb25zKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBzaGFzLmZvckVhY2goZnVuY3Rpb24gKHNoYSkge1xuICAgICAgICAgICAgdmFyIGNvbW1pdCA9IF90aGlzLmNvbW1pdHNbc2hhXTtcbiAgICAgICAgICAgIGNvbW1pdC5pbml0SGVhZFNwZWNpZml0eSgpO1xuICAgICAgICAgICAgY29tbWl0LmluaXRNZXJnZXMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5pdEJyYW5jaGVzKCk7XG4gICAgfTtcbiAgICBHaXRsaW5lLnByb3RvdHlwZS5kcmF3Q29tbWl0ID0gZnVuY3Rpb24gKGNvbW1pdCkge1xuICAgICAgICAvLyBMYWJlbFxuICAgICAgICBjb21taXQudmlldyA9IG5ldyBDb21taXRWaWV3KHRoaXMuY2FudmFzLCB0aGlzLmNvbmZpZywgY29tbWl0KTtcbiAgICAgICAgaWYgKGNvbW1pdC5vdXRPZlNjb3BlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29tbWl0LnZpZXcubGFiZWwgPSB0aGlzLmRyYXdMYWJlbChjb21taXQpO1xuICAgICAgICAgICAgY29tbWl0LnZpZXcubGFiZWwub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY29uc29sZSkge1xuICAgICAgICAgICAgICAgICAgICBMb2dnZXIuZGVidWcoY29tbWl0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy50ZXh0UGFuZWwuYXBwZW5kQ2hpbGQoY29tbWl0LnZpZXcubGFiZWwpO1xuICAgICAgICAgICAgY29tbWl0LnZpZXcubGFiZWwuc3R5bGVbJ3BhZGRpbmctbGVmdCddID0gaW5kZXhUb1godGhpcy5tYXhYICsgMSkgKyBcInB4XCI7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEdpdGxpbmUucHJvdG90eXBlLmRyYXdSZWZlcmVuY2VzID0gZnVuY3Rpb24gKGNvbW1pdCkge1xuICAgICAgICBjb21taXQudmlldy5hZGRSZWxhdGlvbnMoKTtcbiAgICAgICAgY29tbWl0LnZpZXcucmVkcmF3KCk7XG4gICAgfTtcbiAgICBHaXRsaW5lLnByb3RvdHlwZS5kcmF3TGFiZWwgPSBmdW5jdGlvbiAoY29tbWl0KSB7XG4gICAgICAgIHZhciBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSBcImNvbW1pdC1sZWdlbmRcIjtcbiAgICAgICAgLy8gU0hBIEhhc2ggXG4gICAgICAgIHZhciBzaG9ydFNoYSA9IGNvbW1pdC5nZXRTaG9ydFNoYSgpO1xuICAgICAgICB2YXIgZnVsbFNoYSA9IGNvbW1pdC5nZXRGdWxsU2hhKCk7XG4gICAgICAgIHZhciBzaGEgPSBFeHBhbmRhYmxlLmV4dGVuZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSk7XG4gICAgICAgIHNoYS53aGVuU2hvcnQoc2hvcnRTaGEgKyBcIiBcIik7XG4gICAgICAgIHNoYS53aGVuRnVsbChmdWxsU2hhKTtcbiAgICAgICAgc2hhLnN0eWxlLmZvbnRGYW1pbHkgPSBcIkNvdXJpZXJcIjtcbiAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQoc2hhKTtcbiAgICAgICAgLy8gQXV0aG9yIGFuZCBjb21taXR0ZXJcbiAgICAgICAgbGFiZWwuYXBwZW5kQ2hpbGQodGhpcy5kcmF3SWRlbnRpdHkoXCJhdXRob3JcIiwgY29tbWl0LmF1dGhvcikpO1xuICAgICAgICBpZiAoY29tbWl0LmF1dGhvci5lbWFpbCAhPSBjb21taXQuY29tbWl0dGVyLmVtYWlsKSB7XG4gICAgICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZCh0aGlzLmRyYXdJZGVudGl0eShcImNvbW1pdHRlclwiLCBjb21taXQuY29tbWl0dGVyKSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnJhbmNoIC0gVE9ETzogVGFncyBhbmQgb3RoZXIgYnJhbmNoZXNcdFx0XG4gICAgICAgIGlmIChjb21taXQuYnJhbmNoICYmIGNvbW1pdC5icmFuY2guY29tbWl0ID09PSBjb21taXQgJiYgIWNvbW1pdC5icmFuY2guYW5vbnltb3VzKSB7XG4gICAgICAgICAgICB2YXIgaGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgaGVhZC5jbGFzc05hbWUgPSBcImhlYWQtbGFiZWxcIjtcbiAgICAgICAgICAgIGhlYWQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29tbWl0LmdldENvbG9yKDQwKTtcbiAgICAgICAgICAgIGhlYWQuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XG4gICAgICAgICAgICBoZWFkLnN0eWxlLnBhZGRpbmdMZWZ0ID0gaGVhZC5zdHlsZS5wYWRkaW5nUmlnaHQgPSBcIjJweFwiO1xuICAgICAgICAgICAgaGVhZC5pbm5lckhUTUwgPSBjb21taXQuYnJhbmNoLnJlZjtcbiAgICAgICAgICAgIGxhYmVsLmFwcGVuZENoaWxkKGhlYWQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFN1YmplY3RcdFx0XG4gICAgICAgIHZhciBzdWJqZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgICAgIHN1YmplY3QuaW5uZXJIVE1MID0gXCIgXCIgKyBjb21taXQuc3ViamVjdDtcbiAgICAgICAgc3ViamVjdC5zdHlsZS5jb2xvciA9IGNvbW1pdC5oYXNNZXJnZXMoKSA/IFwiZ3JleVwiIDogXCJibGFja1wiO1xuICAgICAgICBsYWJlbC5hcHBlbmRDaGlsZChzdWJqZWN0KTtcbiAgICAgICAgbGFiZWwuc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG4gICAgICAgIHJldHVybiBsYWJlbDtcbiAgICB9O1xuICAgIEdpdGxpbmUucHJvdG90eXBlLmRyYXdJZGVudGl0eSA9IGZ1bmN0aW9uICh0eXBlLCBpZCkge1xuICAgICAgICB2YXIgZWwgPSBFeHBhbmRhYmxlLmV4dGVuZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZ2l0bGluZS1pZGVudGl0eVwiKSk7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIHR5cGUpO1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsIGlkLm5hbWUpO1xuICAgICAgICB2YXIgZnVsbG5hbWUgPSBpZC5uYW1lICsgXCIgJmx0O1wiICsgaWQuZW1haWwudG9Mb3dlckNhc2UoKSArIFwiJmd0O1wiO1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBmdWxsbmFtZSk7XG4gICAgICAgIGVsLnN0eWxlLmJhY2tncm91bmQgPSB0aGlzLmNvbmZpZy5hdmF0YXJzLm1hcChmdW5jdGlvbiAoZikgeyByZXR1cm4gXCJ1cmwoXCIgKyBmKGlkLmVtYWlsKSArIFwiKSBuby1yZXBlYXRcIjsgfSkuam9pbihcIiwgXCIpO1xuICAgICAgICBlbC53aGVuRnVsbChmdWxsbmFtZSk7XG4gICAgICAgIGVsLndoZW5TaG9ydChcIiBcIik7XG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9O1xuICAgIC8qXG4gICAgICAgIEJhc2VkIG9uIHRoZSBzcGVjaWZpdHkgYXNzaWduIHRoZSBicmFuY2hlcyB0byB0aGUgY29tbWl0cy4gaWYgaW4gZG91YnQgdGhlIGNvbW1pdCB3aWxsIGJlIG9uIHRoZSBtb3N0IHNwZWNpZmljIGJyYW5jaFxuICAgICovXG4gICAgR2l0bGluZS5wcm90b3R5cGUuaW5pdEJyYW5jaGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaGVhZHMgPSBPYmplY3Qua2V5cyh0aGlzLmhlYWRzTWFwKTtcbiAgICAgICAgLyogc2V0IHRoZSBpbmRleCB0byB0aGUgaGVhZCBvYmplY3QgKi9cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGhlYWROYW1lID0gaGVhZHNbaV07XG4gICAgICAgICAgICB2YXIgaGVhZCA9IHRoaXMuaGVhZHNNYXBbaGVhZE5hbWVdO1xuICAgICAgICAgICAgaGVhZC5jb21taXQuaW5pdERlZmF1bHRCcmFuY2goKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBTb3J0IHRoZSBicmFuY2hlcyBieSBzcGVjaWZpdHkgKi9cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBoZWFkcy5zb3J0KGZ1bmN0aW9uIChsLCByKSB7XG4gICAgICAgICAgICB2YXIgbEhlYWQgPSBzZWxmLmhlYWRzTWFwW2xdLmNvbW1pdDtcbiAgICAgICAgICAgIHZhciBySGVhZCA9IHNlbGYuaGVhZHNNYXBbcl0uY29tbWl0O1xuICAgICAgICAgICAgaWYgKGxIZWFkID09PSBySGVhZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGxIZWFkLmJyYW5jaC5jYXRlZ29yeSA9PT0gckhlYWQuYnJhbmNoLmNhdGVnb3J5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxIZWFkLmJyYW5jaC5zcGVjaWZpdHkgLSBySGVhZC5icmFuY2guc3BlY2lmaXR5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxIZWFkLmJyYW5jaC5jYXRlZ29yeS5sZW5ndGggLSBySGVhZC5icmFuY2guY2F0ZWdvcnkubGVuZ3RoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLyogc2V0IHRoZSBpbmRleCB0byB0aGUgaGVhZCBvYmplY3QgKi9cbiAgICAgICAgdmFyIG1heExhbmUgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlYWRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaGVhZE5hbWUgPSBoZWFkc1tpXTtcbiAgICAgICAgICAgIHZhciBoZWFkID0gdGhpcy5oZWFkc01hcFtoZWFkTmFtZV07XG4gICAgICAgICAgICB2YXIgdGlwID0gaGVhZC5jb21taXQ7XG4gICAgICAgICAgICBpZiAodGlwLmJyYW5jaCA9PT0gaGVhZCkge1xuICAgICAgICAgICAgICAgIGhlYWQubGFuZSA9IG1heExhbmU7XG4gICAgICAgICAgICAgICAgLy9oZWFkLmluZGV4ID0gbWF4TGFuZTtcbiAgICAgICAgICAgICAgICBtYXhMYW5lKys7XG4gICAgICAgICAgICAgICAgLy8gQ2FuIHdlIGRpc3BsYXkgdGhpcyBoZWFkIGEgbGl0dGxlIG1vcmUgdG8gdGhlIGxlZnQ/XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCBoZWFkcy5sZW5ndGg7IGwrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2FuVXNlTGFuZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGVhZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqaGVhZE5hbWUgPSBoZWFkc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkT25MYW5lID0gdGhpcy5oZWFkc01hcFtqaGVhZE5hbWVdLmNvbW1pdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkT25MYW5lID09PSB1bmRlZmluZWQgfHwgaGVhZE9uTGFuZS5icmFuY2ggIT0gaGVhZCAmJiBoZWFkT25MYW5lLmJyYW5jaC5sYW5lID09PSBsICYmICh0aXAuaW50ZXJzZWN0cyhoZWFkT25MYW5lKSB8fCB0aXAuYnJhbmNoLmNhdGVnb3J5ICE9IGhlYWRPbkxhbmUuYnJhbmNoLmNhdGVnb3J5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhblVzZUxhbmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FuVXNlTGFuZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgTG9nZ2VyLmRlYnVnKFwiTk8gSU5URVJTRUNUUzogXCIsIHRpcC5icmFuY2gucmVmLCBcIiAtIFwiLCBoZWFkT25MYW5lLmJyYW5jaC5yZWYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZC5sYW5lID0gbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubWF4WCA9IE1hdGgubWF4KHRoaXMubWF4WCwgaGVhZC5sYW5lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gTGF1bmNoaW5nXG4gICAgR2l0bGluZS5wcm90b3R5cGUuZnJvbUpTT04gPSBmdW5jdGlvbiAoanNvbkZpbGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJvbVByb3ZpZGVyKG5ldyBMb2NhbEdpdDJKc29uUHJvdmlkZXIoanNvbkZpbGUpKTtcbiAgICB9O1xuICAgIEdpdGxpbmUucHJvdG90eXBlLmZyb21Qcm92aWRlciA9IGZ1bmN0aW9uIChjb21taXRQcm92aWRlcikge1xuICAgICAgICB0aGlzLmNvbW1pdFByb3ZpZGVyID0gY29tbWl0UHJvdmlkZXI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgR2l0bGluZS5wcm90b3R5cGUucmVuZGVyVG8gPSBmdW5jdGlvbiAocGFuZWwpIHtcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyUGFuZWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5oZWFkZXJQYW5lbCk7XG4gICAgICAgIH1cbiAgICAgICAgcGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5sb2FkaW5nUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZ2l0bGluZS1sb2FkaW5ncGFuZWxcIikpO1xuICAgICAgICBwYW5lbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJnaXRsaW5lLWNvbnRlbnRwYW5lbFwiKSk7XG4gICAgICAgIHRoaXMuY29udGVudFBhbmVsLmFwcGVuZENoaWxkKHRoaXMuZ3JhcGhpY2FsUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZ2l0bGluZS1ncmFwaGljYWxwYW5lbFwiKSk7XG4gICAgICAgIHRoaXMuY29udGVudFBhbmVsLmFwcGVuZENoaWxkKHRoaXMudGV4dFBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImdpdGxpbmUtdGV4dHBhbmVsXCIpKTtcbiAgICAgICAgdGhpcy5hbCA9IG5ldyBBc3luY0xvYWRlcih0aGlzLmxvYWRpbmdQYW5lbCk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgR2l0bGluZS5wcm90b3R5cGUud2l0aEhlYWRlciA9IGZ1bmN0aW9uIChoZWFkZXIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBoZWFkZXIgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZ2l0bGluZS1oZWFkZXJwYW5lbFwiKTtcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyUGFuZWwuaW5uZXJIVE1MID0gaGVhZGVyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oZWFkZXJQYW5lbCA9IGhlYWRlcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBHaXRsaW5lO1xufSkoKTtcbi8qKlxuICogYmFzaWMgc3VwcG9ydCBmb3IganNnbCBzaGFwZXNcbiAqL1xudmFyIFNoYXBlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTaGFwZShjYW52YXMsIGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBbXTtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgfVxuICAgIFNoYXBlLnByb3RvdHlwZS5hZGRJZk1pc3NpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJlbmRlcmVkVG8gPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5hZGRFbGVtZW50cygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlZFRvID0gdGhpcy5jYW52YXM7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNoYXBlLnByb3RvdHlwZS5hZGRFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRWxlbWVudCh0aGlzLmVsZW1lbnQpO1xuICAgIH07XG4gICAgU2hhcGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXBlbmRlbmNpZXMuZm9yRWFjaChmdW5jdGlvbiAoZGVwKSB7XG4gICAgICAgICAgICBkZXAudXBkYXRlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgU2hhcGUucHJvdG90eXBlLmRlcGVuZHNPbiA9IGZ1bmN0aW9uIChvbikge1xuICAgICAgICBvbi5kZXBlbmRlbmNpZXMucHVzaCh0aGlzKTtcbiAgICB9O1xuICAgIHJldHVybiBTaGFwZTtcbn0pKCk7XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiU2hhcGUudHNcIi8+XG4vKipcbiAqIE5ldyB0eXBlc2NyaXB0IGZpbGVcbiAqL1xudmFyIERvdCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKERvdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBEb3QoY2FudmFzKSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGNhbnZhcywgY2FudmFzLmNyZWF0ZVJlY3RhbmdsZSgpKTtcbiAgICB9XG4gICAgRG90LnByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldFdpZHRoKHdpZHRoKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEhlaWdodChoZWlnaHQpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0WFJhZGl1cyh3aWR0aCAvIDQpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0WVJhZGl1cyh3aWR0aCAvIDQpO1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLmFkZElmTWlzc2luZygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIERvdC5wcm90b3R5cGUuYXQgPSBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB0aGlzLmFkZElmTWlzc2luZygpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIERvdC5wcm90b3R5cGUuY29sb3IgPSBmdW5jdGlvbiAoc3Ryb2tlQ29sb3IsIGZpbGxDb2xvcikge1xuICAgICAgICB0aGlzLmVsZW1lbnQuZ2V0U3Ryb2tlKCkuc2V0V2VpZ2h0KDEpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuZ2V0U3Ryb2tlKCkuc2V0Q29sb3Ioc3Ryb2tlQ29sb3IpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuZ2V0RmlsbCgpLnNldENvbG9yKGZpbGxDb2xvcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgRG90LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRMb2NhdGlvblhZKHRoaXMueCAtIHRoaXMud2lkdGggLyAyLCB0aGlzLnkgLSB0aGlzLmhlaWdodCAvIDIpO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgcmV0dXJuIERvdDtcbn0pKFNoYXBlKTtcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJTaGFwZS50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJEb3QudHNcIi8+XG4vKipcbiAqIFNoYXBlIHRoYXQgbGlua3MgdHdvIGRvdHNcbiAqL1xudmFyIEJhc2VMaW5rID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQmFzZUxpbmssIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQmFzZUxpbmsoY2FudmFzLCBlbGVtZW50KSB7XG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIGNhbnZhcywgZWxlbWVudCk7XG4gICAgfVxuICAgIEJhc2VMaW5rLnByb3RvdHlwZS5mcm9tID0gZnVuY3Rpb24gKGZyb20pIHtcbiAgICAgICAgdGhpcy5kZXBlbmRzT24oZnJvbSk7XG4gICAgICAgIHRoaXMucGFyZW50RG90ID0gZnJvbTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBCYXNlTGluay5wcm90b3R5cGUudG8gPSBmdW5jdGlvbiAodG8pIHtcbiAgICAgICAgLy90aGlzLmRlcGVuZHNPbih0byk7XG4gICAgICAgIHRoaXMuY2hpbGREb3QgPSB0bztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBCYXNlTGluay5wcm90b3R5cGUuY29sb3IgPSBmdW5jdGlvbiAobGluZUNvbG9yKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRXZWlnaHQoMSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRDb2xvcihsaW5lQ29sb3IpO1xuICAgICAgICB0aGlzLmxpbmVDb2xvciA9IGxpbmVDb2xvcjtcbiAgICAgICAgdGhpcy5hZGRJZk1pc3NpbmcoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gQmFzZUxpbms7XG59KShTaGFwZSk7XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQmFzZUxpbmsudHNcIi8+XG52YXIgQ3VydmUgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDdXJ2ZSwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDdXJ2ZShjYW52YXMpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgY2FudmFzLCBjYW52YXMuY3JlYXRlQ3VydmUoKSk7XG4gICAgICAgIHRoaXMuYXJyb3cgPSB0aGlzLmNhbnZhcy5jcmVhdGVQb2x5Z29uKCk7XG4gICAgfVxuICAgIEN1cnZlLnByb3RvdHlwZS5hZGRFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5hZGRFbGVtZW50cy5jYWxsKHRoaXMpO1xuICAgICAgICAvLyAybmQgZWxlbWVudFxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFbGVtZW50KHRoaXMuYXJyb3cpO1xuICAgIH07XG4gICAgQ3VydmUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHggPSB0aGlzLmNoaWxkRG90Lng7XG4gICAgICAgIHZhciB5ID0gdGhpcy5jaGlsZERvdC55O1xuICAgICAgICB2YXIgcGFyZW50WCA9IHRoaXMucGFyZW50RG90Lng7XG4gICAgICAgIHZhciBwYXJlbnRZID0gdGhpcy5wYXJlbnREb3QueTtcbiAgICAgICAgdmFyIGNvbG9yID0gdGhpcy5saW5lQ29sb3I7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB4IDwgcGFyZW50WCA/IDEgOiAtMTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldFN0YXJ0UG9pbnRYWShwYXJlbnRYLCBwYXJlbnRZIC0gdGhpcy5wYXJlbnREb3QuaGVpZ2h0IC8gMik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRFbmRQb2ludFhZKHggKyB0aGlzLmNoaWxkRG90LndpZHRoIC8gMiAqIGRpcmVjdGlvbiwgeSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRDb250cm9sMlBvaW50WFkocGFyZW50WCwgeSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRDb250cm9sMVBvaW50WFkocGFyZW50WCwgeSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRXZWlnaHQoMSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRDb2xvcihjb2xvcik7XG4gICAgICAgIHRoaXMuYXJyb3cuZ2V0U3Ryb2tlKCkuc2V0V2VpZ2h0KDApO1xuICAgICAgICB0aGlzLmFycm93LmdldEZpbGwoKS5zZXRDb2xvcihjb2xvcik7XG4gICAgICAgIHRoaXMuYXJyb3cuY2xlYXJQb2ludHMoKTtcbiAgICAgICAgdGhpcy5hcnJvdy5hZGRQb2ludFhZKDAsIDApO1xuICAgICAgICB0aGlzLmFycm93LmFkZFBvaW50WFkoNiwgLTQpO1xuICAgICAgICB0aGlzLmFycm93LmFkZFBvaW50WFkoNiwgNCk7XG4gICAgICAgIC8vIE1vdmVcdFx0XHRcdFx0XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hcnJvdy5nZXRQb2ludHNDb3VudCgpOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBweCA9IHRoaXMuYXJyb3cuZ2V0UG9pbnRBdChpKS5YO1xuICAgICAgICAgICAgdmFyIHB5ID0gdGhpcy5hcnJvdy5nZXRQb2ludEF0KGkpLlk7XG4gICAgICAgICAgICAvL3RoaXMuYXJyb3cuc2V0UG9pbnRYWUF0KHB4LCBweSArIHksIGkpO1xuICAgICAgICAgICAgdGhpcy5hcnJvdy5zZXRQb2ludFhZQXQocHggKiBkaXJlY3Rpb24gKyB4ICsgdGhpcy5jaGlsZERvdC53aWR0aCAvIDIgKiBkaXJlY3Rpb24sIHB5ICsgeSwgaSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBDdXJ2ZTtcbn0pKEJhc2VMaW5rKTtcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJCYXNlTGluay50c1wiLz5cbi8qKlxuICogTmV3IHR5cGVzY3JpcHQgZmlsZVxuICovXG52YXIgU3RyYWlnaHQgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhTdHJhaWdodCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdHJhaWdodChjYW52YXMpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgY2FudmFzLCBjYW52YXMuY3JlYXRlTGluZSgpKTtcbiAgICB9XG4gICAgU3RyYWlnaHQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldFN0YXJ0UG9pbnRYWSh0aGlzLnBhcmVudERvdC54LCB0aGlzLnBhcmVudERvdC55IC0gdGhpcy5wYXJlbnREb3QuaGVpZ2h0IC8gMik7XG4gICAgICAgIHRoaXMuZWxlbWVudC5zZXRFbmRQb2ludFhZKHRoaXMuY2hpbGREb3QueCwgdGhpcy5jaGlsZERvdC55ICsgdGhpcy5jaGlsZERvdC5oZWlnaHQgLyAyKTtcbiAgICB9O1xuICAgIHJldHVybiBTdHJhaWdodDtcbn0pKEJhc2VMaW5rKTtcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJTaGFwZS50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJEb3QudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiU3RyYWlnaHQudHNcIi8+XG52YXIgQ3JlYXRpb24gPSAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDcmVhdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBDcmVhdGlvbihjYW52YXMpIHtcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgY2FudmFzLCBjYW52YXMuY3JlYXRlTGluZSgpKTtcbiAgICAgICAgdGhpcy5zZWNvbmRMaW5lID0gY2FudmFzLmNyZWF0ZUxpbmUoKTtcbiAgICB9XG4gICAgQ3JlYXRpb24ucHJvdG90eXBlLmFkZEVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLmFkZEVsZW1lbnRzLmNhbGwodGhpcyk7XG4gICAgICAgIC8vIDJuZCBlbGVtZW50XG4gICAgICAgIHRoaXMuY2FudmFzLmFkZEVsZW1lbnQodGhpcy5zZWNvbmRMaW5lKTsgLy8gVE9EOiBhZGQgbGF0ZXI/XG4gICAgfTtcbiAgICBDcmVhdGlvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMpO1xuICAgICAgICAvLyBIb3Jpem9udGFsIGRvdHRlZCBsaW5lXG4gICAgICAgIGlmICh0aGlzLnBhcmVudERvdC54IDwgdGhpcy5jaGlsZERvdC54KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuc2V0U3RhcnRQb2ludFhZKHRoaXMucGFyZW50RG90LnggKyB0aGlzLnBhcmVudERvdC53aWR0aCAvIDIsIHRoaXMucGFyZW50RG90LnkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldFN0YXJ0UG9pbnRYWSh0aGlzLnBhcmVudERvdC54IC0gdGhpcy5wYXJlbnREb3Qud2lkdGggLyAyLCB0aGlzLnBhcmVudERvdC55KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVsZW1lbnQuc2V0RW5kUG9pbnRYWSh0aGlzLmNoaWxkRG90LngsIHRoaXMucGFyZW50RG90LnkpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuZ2V0U3Ryb2tlKCkuc2V0V2VpZ2h0KDEpO1xuICAgICAgICB0aGlzLmVsZW1lbnQuZ2V0U3Ryb2tlKCkuc2V0RGFzaFN0eWxlKGpzZ2wuRGFzaFN0eWxlcy5EQVNIKTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldENvbG9yKHRoaXMubGluZUNvbG9yKTtcbiAgICAgICAgLy8gVmVydGljYWwgbGluZVxuICAgICAgICB0aGlzLnNlY29uZExpbmUuc2V0U3RhcnRQb2ludFhZKHRoaXMuY2hpbGREb3QueCwgdGhpcy5wYXJlbnREb3QueSk7XG4gICAgICAgIHRoaXMuc2Vjb25kTGluZS5zZXRFbmRQb2ludFhZKHRoaXMuY2hpbGREb3QueCwgdGhpcy5jaGlsZERvdC55ICsgdGhpcy5jaGlsZERvdC5oZWlnaHQgLyAyKTtcbiAgICAgICAgdGhpcy5zZWNvbmRMaW5lLmdldFN0cm9rZSgpLnNldFdlaWdodCgxKTtcbiAgICAgICAgdGhpcy5zZWNvbmRMaW5lLmdldFN0cm9rZSgpLnNldENvbG9yKHRoaXMubGluZUNvbG9yKTtcbiAgICB9O1xuICAgIHJldHVybiBDcmVhdGlvbjtcbn0pKEJhc2VMaW5rKTtcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb25maWcudHNcIi8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tbWl0LnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInJlbmRlcmluZy9DdXJ2ZS50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJyZW5kZXJpbmcvRG90LnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInJlbmRlcmluZy9TdHJhaWdodC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJyZW5kZXJpbmcvQ3JlYXRpb24udHNcIi8+XG4vKipcbiAqIFZpZXcgb2YgdGhlIENvbW1pdFxuICovXG52YXIgQ29tbWl0VmlldyA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29tbWl0VmlldyhjYW52YXMsIGNvbmZpZywgY29tbWl0KSB7XG4gICAgICAgIHRoaXMubGluZXMgPSBbXTtcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmNvbW1pdCA9IGNvbW1pdDtcbiAgICAgICAgdGhpcy5kb3QgPSBuZXcgRG90KHRoaXMuY2FudmFzKTtcbiAgICB9XG4gICAgQ29tbWl0Vmlldy5wcm90b3R5cGUuYWRkUmVsYXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAvLyBEaXJlY3QgcGFyZW50XG4gICAgICAgIGlmICh0aGlzLmNvbW1pdC5kaXJlY3RwYXJlbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGRwbDtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbW1pdC5nZXRMYW5lKCkgPT0gdGhpcy5jb21taXQuZGlyZWN0cGFyZW50LmdldExhbmUoKSB8fCB0aGlzLmNvbW1pdC5kaXJlY3RwYXJlbnQub3V0T2ZTY29wZSkge1xuICAgICAgICAgICAgICAgIC8vIGRpcmVjdCBwYXJlbnQgaXMgdGhlIHNhbWUgWC9sYW5lLCB0aGlzIG1lYW5zIGl0IGlzIGEgc3RhbmRhcmQgZm9yd2FyZCBjb21taXQgXG4gICAgICAgICAgICAgICAgZHBsID0gbmV3IFN0cmFpZ2h0KHRoaXMuY2FudmFzKS5mcm9tKHRoaXMuY29tbWl0LmRpcmVjdHBhcmVudC52aWV3LmRvdCkudG8odGhpcy5kb3QpLmNvbG9yKHRoaXMuY29tbWl0LmdldENvbG9yKDIwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBkaXJlY3QgcGFyZW50IGlzIG9uIGEgZGlmZmVyZW50IGxhbmUsIHRoaXMgaXMgbW9zdCBjZXJ0YWlubHkgYSBuZXcgYnJhbmNoIFxuICAgICAgICAgICAgICAgIGRwbCA9IG5ldyBDcmVhdGlvbih0aGlzLmNhbnZhcykuZnJvbSh0aGlzLmNvbW1pdC5kaXJlY3RwYXJlbnQudmlldy5kb3QpLnRvKHRoaXMuZG90KS5jb2xvcih0aGlzLmNvbW1pdC5nZXRDb2xvcigzMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5saW5lcy5wdXNoKGRwbCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGFsbG1lcmdlcyA9IHRoaXMuY29tbWl0Lm1lcmdlcy5zdGFuZGFyZC5jb25jYXQodGhpcy5jb21taXQubWVyZ2VzLmFub255bW91cyk7XG4gICAgICAgIGFsbG1lcmdlcy5mb3JFYWNoKGZ1bmN0aW9uIChtZXJnZSkge1xuICAgICAgICAgICAgX3RoaXMubGluZXMucHVzaChuZXcgQ3VydmUoX3RoaXMuY2FudmFzKVxuICAgICAgICAgICAgICAgIC5mcm9tKG1lcmdlLnNvdXJjZS52aWV3LmRvdClcbiAgICAgICAgICAgICAgICAudG8oX3RoaXMuZG90KVxuICAgICAgICAgICAgICAgIC5jb2xvcihtZXJnZS5zb3VyY2UuZ2V0Q29sb3IoMzUpKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgLyoqIGNhbGN1bGF0ZSB0aGUgcG9zaXRpb25zIGJhc2VkIG9uIG1vZGVsIGFuZCB1cGRhdGUgdGhlIHNoYXBlcyAqL1xuICAgIENvbW1pdFZpZXcucHJvdG90eXBlLnJlZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kb3RcbiAgICAgICAgICAgIC5hdCh0aGlzLmNvbW1pdC5nZXRYKCksIHRoaXMuY29tbWl0LmdldFkoKSlcbiAgICAgICAgICAgIC5zaXplKHRoaXMuY29uZmlnLmRvdFdpZHRoLCB0aGlzLmNvbmZpZy5kb3RIZWlnaHQpXG4gICAgICAgICAgICAuY29sb3IodGhpcy5jb21taXQuZ2V0Q29sb3IoMjApLCB0aGlzLmNvbW1pdC5nZXRDb2xvcig4MCkpO1xuICAgIH07XG4gICAgcmV0dXJuIENvbW1pdFZpZXc7XG59KSgpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkJyYW5jaC50c1wiLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJHaXRsaW5lLnRzXCIvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbW1pdFZpZXcudHNcIi8+XG4vKiogY29tbWl0dGVyIG9yIGF1dGhvciAqL1xudmFyIElkZW50aXR5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBJZGVudGl0eShuYW1lLCBlbWFpbCwgZGF0ZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLmVtYWlsID0gZW1haWw7XG4gICAgICAgIHRoaXMuZGF0ZSA9IGRhdGU7XG4gICAgfVxuICAgIHJldHVybiBJZGVudGl0eTtcbn0pKCk7XG52YXIgQ29tbWl0ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb21taXQoY29udGFpbmVyLCBkYXRhKSB7XG4gICAgICAgIHRoaXMud2FybmluZ3MgPSBbXTtcbiAgICAgICAgdGhpcy5pbkhlYWRzUmVmID0gW107XG4gICAgICAgIHRoaXMucGFyZW50cyA9IFtdO1xuICAgICAgICB0aGlzLmNoaWxkcyA9IFtdO1xuICAgICAgICB0aGlzLnNpYmxpbmdzID0gW107XG4gICAgICAgIHRoaXMub3V0T2ZTY29wZSA9IGZhbHNlOyAvLyBUaGlzIGNvbW1pdCB3YXMgbm90IHBhcnQgb2YgdGhlIGxvZ3Mgc2NvcGUsIGJ1dCBpcyByZWZlcmVuY2VkIGJ5IGFub3RoZXIgY29tbWl0LlxuICAgICAgICB0aGlzLm1lcmdlcyA9IHsgc3RhbmRhcmQ6IFtdLCBhbm9ueW1vdXM6IFtdIH07XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgICAgICAvLyByZWZlcmVuY2UgdGhlIGRhdGEgYmFjayB0byB0aGUgb2JqZWN0XG4gICAgICAgIHRoaXMuZGF0YS5vYmogPSB0aGlzO1xuICAgICAgICBpZiAoZGF0YS5pbkhlYWRzID09IG51bGwpXG4gICAgICAgICAgICBkYXRhLmluSGVhZHMgPSBbXTtcbiAgICAgICAgaWYgKGRhdGEucGFyZW50aGFzaGVzID09IG51bGwpXG4gICAgICAgICAgICBkYXRhLnBhcmVudGhhc2hlcyA9IFtdO1xuICAgICAgICBpZiAoZGF0YS5yZWZuYW1lcyA9PSBudWxsKVxuICAgICAgICAgICAgZGF0YS5yZWZuYW1lcyA9IFtdO1xuICAgICAgICB0aGlzLnNoYSA9IGRhdGEuc2hhO1xuICAgICAgICB0aGlzLnNzaGEgPSBkYXRhLnNzaGE7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IGRhdGEuc3ViamVjdDtcbiAgICAgICAgdGhpcy5pbmRleFkgPSBjb250YWluZXIubWF4SW5kZXhZKys7XG4gICAgICAgIHRoaXMuY29tbWl0dGVyID0gbmV3IElkZW50aXR5KHRoaXMuZGF0YS5jb21taXR0ZXJuYW1lLCB0aGlzLmRhdGEuY29tbWl0dGVyZW1haWwsIG5ldyBEYXRlKHRoaXMuZGF0YS5jb21taXR0ZXJkYXRlKS5nZXRUaW1lKCkpO1xuICAgICAgICB0aGlzLmF1dGhvciA9IG5ldyBJZGVudGl0eSh0aGlzLmRhdGEuYXV0aG9ybmFtZSwgdGhpcy5kYXRhLmF1dGhvcmVtYWlsLCBuZXcgRGF0ZSh0aGlzLmRhdGEuYXV0aG9yZGF0ZSkuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgQ29tbWl0LnByb3RvdHlwZS5nZXRTaG9ydFNoYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3NoYTtcbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuZ2V0RnVsbFNoYSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhO1xuICAgIH07XG4gICAgQ29tbWl0LnByb3RvdHlwZS5pbml0UmVsYXRpb25zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuZGF0YS5wYXJlbnRoYXNoZXMuZm9yRWFjaChmdW5jdGlvbiAoaGFzaCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudENvbW1pdCA9IF90aGlzLmNvbnRhaW5lci5jb21taXRzW2hhc2hdO1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgdmlydHVhbCBjb21taXRcbiAgICAgICAgICAgIGlmIChwYXJlbnRDb21taXQgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcmVudENvbW1pdCA9IG5ldyBDb21taXQoX3RoaXMuY29udGFpbmVyLCB7IHNoYTogaGFzaCArIE1hdGgucmFuZG9tKCkgfSk7XG4gICAgICAgICAgICAgICAgcGFyZW50Q29tbWl0Lm91dE9mU2NvcGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNlbGYuY29udGFpbmVyLmFkZENvbW1pdChwYXJlbnRDb21taXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXMucGFyZW50cy5wdXNoKHBhcmVudENvbW1pdCk7XG4gICAgICAgICAgICBwYXJlbnRDb21taXQuY2hpbGRzLnB1c2goX3RoaXMpO1xuICAgICAgICAgICAgX3RoaXMuc2libGluZ3MgPSBwYXJlbnRDb21taXQuY2hpbGRzOyAvLyB0aGlzIHdpbGwgYmUgb3ZlcndpdHRlbiBhcyBuZXcgY2hpbGRzIGFyZSBmb3VuZFxuICAgICAgICAgICAgaWYgKF90aGlzLnBhcmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBkcCA9IF90aGlzLnBhcmVudHNbMF07XG4gICAgICAgICAgICAgICAgX3RoaXMuZGlyZWN0cGFyZW50ID0gZHA7XG4gICAgICAgICAgICAgICAgZHAuZGlyZWN0Y2hpbGQgPSBfdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZGF0YS5pbkhlYWRzLmZvckVhY2goZnVuY3Rpb24gKGhlYWRzaGEpIHtcbiAgICAgICAgICAgIHZhciBjb21taXQgPSBfdGhpcy5jb250YWluZXIuY29tbWl0c1toZWFkc2hhXTtcbiAgICAgICAgICAgIGlmIChfdGhpcy5pbkhlYWRzUmVmLmluZGV4T2YoY29tbWl0KSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgX3RoaXMuaW5IZWFkc1JlZi5wdXNoKGNvbW1pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgQ29tbWl0LnByb3RvdHlwZS5pbml0RGVmYXVsdEJyYW5jaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNvbW1pdCA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChjb21taXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gR1VFU1NJTkc6IFRoZSBjb3JyZWN0IGJyYW5jaCBpcyB1c3VhbGx5IHRoZSBvbmUgd2l0aCB0aGUgbGVhc3Qgc3BlY2lmaWMgbmFtZVxuICAgICAgICAgICAgaWYgKGNvbW1pdC5icmFuY2ggPT0gbnVsbCB8fCBjb21taXQuYnJhbmNoLnNwZWNpZml0eSA+IHRoaXMuYnJhbmNoLnNwZWNpZml0eSkge1xuICAgICAgICAgICAgICAgIGNvbW1pdC5icmFuY2ggPSB0aGlzLmJyYW5jaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbW1pdC5icmFuY2guc3RhcnQgPSBjb21taXQ7IC8vIHRoaXMgZnVuY3Rpb24gd2lsbCB0cmF2ZXJzZSB0aGUgcGFyZW50cywgc28gdGhlIGxhc3Qgb25lIHdpbGwgYmUgdGhlIGZpcnN0IGNvbW1pdFxuICAgICAgICAgICAgY29tbWl0LmJyYW5jaC5vcmlnaW4gPSBjb21taXQuZGlyZWN0cGFyZW50OyAvLyB0aGlzIGNvdWxkIGJlIG51bGwgLT4gaXQgaXMgb3V0c2lkZSBvZiB0aGUgaGlzdG9yeS5cbiAgICAgICAgICAgIGNvbW1pdCA9IGNvbW1pdC5kaXJlY3RwYXJlbnQ7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuaW5pdEhlYWRTcGVjaWZpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5kYXRhLnJlZm5hbWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcmVmbmFtZSA9IHRoaXMuZGF0YS5yZWZuYW1lc1tpXTtcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250YWluZXIuY29uZmlnLnJlbW90ZU9ubHkgfHwgcmVmbmFtZS5pbmRleE9mKFwib3JpZ2luL1wiKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyLmNvbmZpZy5yZW1vdGVPbmx5KSB7XG4gICAgICAgICAgICAgICAgICAgIHJlZm5hbWUgPSByZWZuYW1lLnJlcGxhY2UoL15vcmlnaW4uLywgJycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc3BlY2lmaXR5ID0gcmVmbmFtZS5yZXBsYWNlKC9bXlxcLy1dL2csICcnKS5sZW5ndGggKiAxMDAwO1xuICAgICAgICAgICAgICAgIHNwZWNpZml0eSArPSByZWZuYW1lLnJlcGxhY2UoL1teYS16QS1aMC05LV0vLCAnJykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEJyYW5jaChyZWZuYW1lLCB0aGlzLCBzcGVjaWZpdHkpO1xuICAgICAgICAgICAgICAgIC8qIGFzc2lnbiB0aGUgbW9zdCBzcGVjaWZpYyBoZWFkIG9uIHRoaXMgdGlwIGNvbW1pdCAqL1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heFNwZWNpZml0eSA9PSBudWxsIHx8IHNwZWNpZml0eSA8IHRoaXMubWF4U3BlY2lmaXR5KSB7XG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5kZWJ1ZyhcImFzc2lnbmluZyBicmFuY2hcIiwgcmVmbmFtZSwgdGhpcy5zaGEsIHRoaXMubWF4U3BlY2lmaXR5LCBzcGVjaWZpdHkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1heFNwZWNpZml0eSA9IHNwZWNpZml0eTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5icmFuY2ggPSB0aGlzLmNvbnRhaW5lci5oZWFkc01hcFtyZWZuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0RGVmYXVsdEJyYW5jaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmluaXRNZXJnZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMubWVyZ2VzID0geyBzdGFuZGFyZDogW10sIGFub255bW91czogW10gfTtcbiAgICAgICAgdGhpcy53YXJuaW5ncyA9IFtdO1xuICAgICAgICAvLyBEZXRlY3QgYSBtZXJnZSAob2N0b3B1cyBjdXJyZW50bHkgbm90IHN1cHBvcnRlZClcbiAgICAgICAgaWYgKHRoaXMucGFyZW50cy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgdmFyIGRwID0gdGhpcy5wYXJlbnRzWzBdO1xuICAgICAgICAgICAgdGhpcy5kaXJlY3RwYXJlbnQgPSBkcDtcbiAgICAgICAgICAgIGRwLmRpcmVjdGNoaWxkID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wYXJlbnRzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICB2YXIgZHAgPSB0aGlzLnBhcmVudHNbMF07XG4gICAgICAgICAgICB0aGlzLmRpcmVjdHBhcmVudCA9IGRwO1xuICAgICAgICAgICAgZHAuZGlyZWN0Y2hpbGQgPSB0aGlzO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLnBhcmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbXAgPSB0aGlzLnBhcmVudHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKG1wICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2x1ZXMgaWYgdGhpcyBpcyBhIHN0YW5kYXJkIG9yIGFub255bW91cyBtZXJnZVxuICAgICAgICAgICAgICAgICAgICBpZiAobXAuZGF0YS5yZWZuYW1lcy5sZW5ndGggPiAwIC8vIFRoaXMgaXMgc3RhbmRhcmQgbWVyZ2Ugd2l0aCBtcHMgaGVhZFxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgbXAuaW5IZWFkc1JlZi5sZW5ndGggIT0gZHAuaW5IZWFkc1JlZi5sZW5ndGggLy8gVGhlIGhlYWRzIG9mIGJvdGggYXJlIGRpZmZlcmVudFxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVyZ2VzLnN0YW5kYXJkLnB1c2goeyBzb3VyY2U6IG1wIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGFub255bW91cyAoYXV0b21hdGljKSBtZXJnZSBvbiB0aGUgc2FtZSBicmFuY2hcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVyZ2VzLmFub255bW91cy5wdXNoKHsgc291cmNlOiBtcCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdEFub255bW91cygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmluaXRBbm9ueW1vdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIENyZWF0ZSBhIGR1bW15IGJyYW5jaCBmb3IgYW5vbnltb3VzIG1lcmdlcywgd2hpY2ggaXMgYXMgc3BlY2lmaWMgYXMgdGhlIG9yaWdpbmFsIGJyYW5jaC4gXG4gICAgICAgIC8vIHRyeSBmaW5kaW5nIHRoZSBvcmlnaW5hbCBicmFuY2ggYnkgZ29pbmcgdXAgZGlyZWN0IGNoaWxkcywgd2hpY2ggd2lsbCBnZXQgdGhlIG9yaWdpbmFsXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdGhpcy5tZXJnZXMuYW5vbnltb3VzLmZvckVhY2goZnVuY3Rpb24gKF9tZXJnZSkge1xuICAgICAgICAgICAgdmFyIG1lcmdlID0gX21lcmdlLnNvdXJjZTtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IF90aGlzO1xuICAgICAgICAgICAgd2hpbGUgKGNoaWxkICE9IG51bGwgJiYgY2hpbGQuYnJhbmNoID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBjaGlsZCA9IGNoaWxkLmRpcmVjdGNoaWxkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyogdGhpcyBpcyBvbmx5IGFuIGFub255bW91cyBicmFuY2ggaGVhZCwgaWYgdGhlcmUgaXMgb25seSBvbmUgY2hpbGQgKHRoZSBtZXJnZSlcbiAgICAgICAgICAgICAgIFRPRE86IGlmIHRoZXJlIGFyZSBtdWx0aXBsZSwgaXQgbWlnaHQgcmVzdWx0IGluIHdyb25nbHkgYXNzaWduZWQgYnJhbmNoZXMgKi9cbiAgICAgICAgICAgIGlmIChjaGlsZCAhPSBudWxsICYmIG1lcmdlLmJyYW5jaCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbWVyZ2UuYnJhbmNoID0gbmV3IEJyYW5jaChjaGlsZC5icmFuY2gucmVmICsgXCIvYW5vbnltb3VzXCIgKyBtZXJnZS5zaGEgKyBNYXRoLnJhbmRvbSgpLCBtZXJnZSwgY2hpbGQuYnJhbmNoLnNwZWNpZml0eSArIDEpO1xuICAgICAgICAgICAgICAgIG1lcmdlLmJyYW5jaC5hbm9ueW1vdXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG1lcmdlLmJyYW5jaC5wYXJlbnQgPSBjaGlsZC5icmFuY2g7XG4gICAgICAgICAgICAgICAgbWVyZ2UuYnJhbmNoLnN0YXJ0ID0gY2hpbGQ7XG4gICAgICAgICAgICAgICAgbWVyZ2UuYnJhbmNoLmNhdGVnb3J5ID0gY2hpbGQuYnJhbmNoLmNhdGVnb3J5O1xuICAgICAgICAgICAgICAgIF90aGlzLmNvbnRhaW5lci5oZWFkc01hcFttZXJnZS5icmFuY2gucmVmXSA9IG1lcmdlLmJyYW5jaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmdldENvbG9yID0gZnVuY3Rpb24gKGxpZ2h0bmVzcykge1xuICAgICAgICBpZiAodGhpcy5icmFuY2ggPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy53YXJuKFwiTm8gQnJhbmNoIHNldFwiKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5icmFuY2g7XG4gICAgICAgICAgICBpZiAodGhpcy5icmFuY2guYW5vbnltb3VzKSB7XG4gICAgICAgICAgICAgICAgYiA9IHRoaXMuYnJhbmNoLnBhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBodWUgPSBiLmxhbmUgKiAzMDAgLyB0aGlzLmNvbnRhaW5lci5tYXhYO1xuICAgICAgICAgICAgcmV0dXJuIFwiaHNsKFwiICsgaHVlICsgXCIsIDEwMCUsIFwiICsgbGlnaHRuZXNzICsgXCIlKVwiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmhhc01lcmdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWVyZ2VzLnN0YW5kYXJkLmxlbmd0aCA+IDAgfHwgdGhpcy5tZXJnZXMuYW5vbnltb3VzLmxlbmd0aCA+IDA7XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmdldFggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpbmRleFRvWCh0aGlzLmdldExhbmUoKSk7XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmdldFkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLm91dE9mU2NvcGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5yb290TGFiZWwub2Zmc2V0VG9wICsgMjA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5sYWJlbC5vZmZzZXRUb3AgLSB0aGlzLmNvbnRhaW5lci5maXJzdENvbW1pdC52aWV3LmxhYmVsLm9mZnNldFRvcCArIHRoaXMudmlldy5sYWJlbC5vZmZzZXRIZWlnaHQgLyAyO1xuICAgIH07XG4gICAgQ29tbWl0LnByb3RvdHlwZS5nZXRPcmlnaW5JbmRleFkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmJyYW5jaC5vcmlnaW4gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5icmFuY2gub3JpZ2luLmdldEluZGV4WSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYnJhbmNoLnN0YXJ0Lm91dE9mU2NvcGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lci5tYXhJbmRleFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5icmFuY2guc3RhcnQuaW5kZXhZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmludGVyc2VjdHMgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICAgICAgdmFyIG90aGVyWSA9IDk5OTk5OTksIHRoaXNZID0gOTk5OTk5O1xuICAgICAgICBpZiAodGhpcy5vdXRPZlNjb3BlIHx8IG90aGVyLm91dE9mU2NvcGUpXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKG90aGVyLmRpcmVjdGNoaWxkICE9IG51bGwpIHtcbiAgICAgICAgICAgIG90aGVyWSA9IG90aGVyLmRpcmVjdGNoaWxkLmluZGV4WTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kaXJlY3RjaGlsZCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzWSA9IHRoaXMuZGlyZWN0Y2hpbGQuaW5kZXhZO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldE9yaWdpbkluZGV4WSgpID49IE1hdGgubWluKG90aGVyLmluZGV4WSwgb3RoZXJZKSAmJiBNYXRoLm1pbih0aGlzWSwgdGhpcy5pbmRleFkpIDw9IG90aGVyLmdldE9yaWdpbkluZGV4WSgpO1xuICAgIH07XG4gICAgQ29tbWl0LnByb3RvdHlwZS5nZXRJbmRleCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pbmRleDtcbiAgICB9O1xuICAgIENvbW1pdC5wcm90b3R5cGUuZ2V0SW5kZXhZID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleFk7XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLndhcm4gPSBmdW5jdGlvbiAod2FybmluZykge1xuICAgICAgICB0aGlzLndhcm5pbmdzLnB1c2god2FybmluZyk7XG4gICAgICAgIHRoaXMuZGVidWcod2FybmluZyk7XG4gICAgfTtcbiAgICBDb21taXQucHJvdG90eXBlLmRlYnVnID0gZnVuY3Rpb24gKHdhcm5pbmcpIHtcbiAgICAgICAgaWYgKGNvbnNvbGUpIHtcbiAgICAgICAgICAgIExvZ2dlci5kZWJ1Zyh3YXJuaW5nLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29tbWl0LnByb3RvdHlwZS5nZXRMYW5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5icmFuY2ggIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnJhbmNoLmNvbW1pdC5icmFuY2gubGFuZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9O1xuICAgIHJldHVybiBDb21taXQ7XG59KSgpO1xuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbW1pdC50c1wiLz5cbnZhciBCcmFuY2ggPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEJyYW5jaChyZWZuYW1lLCBjb21taXQsIHNwZWNpZml0eSkge1xuICAgICAgICB0aGlzLnJlZiA9IHJlZm5hbWU7XG4gICAgICAgIHRoaXMuY29tbWl0ID0gY29tbWl0O1xuICAgICAgICB0aGlzLnNwZWNpZml0eSA9IHNwZWNpZml0eTtcbiAgICAgICAgdGhpcy5zaG9ydG5hbWUgPSByZWZuYW1lLnNwbGl0KFwiQFwiKVswXTtcbiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IHRoaXMuc2hvcnRuYW1lLnN1YnN0cmluZygwLCB0aGlzLnNob3J0bmFtZS5sYXN0SW5kZXhPZihcIi9cIikpO1xuICAgIH1cbiAgICByZXR1cm4gQnJhbmNoO1xufSkoKTtcblxuIiwiLyoqXHJcbiAqIE5ldyB0eXBlc2NyaXB0IGZpbGVcclxuICovXHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9Db21taXRQcm92aWRlci50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0dpdGxpbmUudHNcIi8+XHJcbmRlY2xhcmUgdmFyIGpRdWVyeTogYW55O1xyXG5kZWNsYXJlIHZhciBMb2dnZXI6IGFueTtcclxuXHJcbmNsYXNzIExvY2FsR2l0Mkpzb25Qcm92aWRlciBleHRlbmRzIENvbW1pdFByb3ZpZGVyIHtcclxuXHRcclxuXHRwdWJsaWMgb25SZXF1ZXN0ZWQodXJsOiBzdHJpbmcpIHtcclxuXHRcdFxyXG5cdFx0alF1ZXJ5LmdldEpTT04odXJsLCB7fSwgKGpzb24pID0+IHtcclxuXHRcdFx0dGhpcy53aGVuRG9uZShqc29uKTtcclxuXHRcdH0pLmVycm9yKCgpID0+ICB7XHJcblx0XHRcdHRoaXMuZXJyb3IoXCJFcnJvciBsb2FkaW5nIGdpdCBkYXRhIGZyb20gXCIrdXJsKyBcIiBjcmVhdGUgaXQgdXNpbmcgZ2l0Mmpzb25cIik7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0iLCIvKipcclxuICogR2l0aHViIGNvbW1pdCBwcm92aWRlci4gb25seSB3b3JrcyBpZiB0aGVyZSBpcyBhbmQgYWNjZXNzdG9rZW4gY29uZmlndXJlZCBpbiB0aGUgYnJvd3NlclxyXG4gKi9cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0NvbW1pdFByb3ZpZGVyLnRzXCIvPlxyXG5kZWNsYXJlIHZhciBqUXVlcnk6IGFueTtcclxuZGVjbGFyZSB2YXIgTG9nZ2VyOiBhbnk7XHJcblxyXG5jbGFzcyBHaXRodWJDb21taXRQcm92aWRlciBleHRlbmRzIENvbW1pdFByb3ZpZGVyIHtcclxuXHJcblx0cHJpdmF0ZSBmb3JrczogYW55W10gPSBbXTtcclxuXHRwcml2YXRlIGJhc2VDb21taXRzOiBhbnlbXTtcclxuXHRwcml2YXRlIGJhc2VCcmFuY2hlczogYW55W10gPSBbXTtcclxuXHRwcml2YXRlIGRhdGEgOiB7fSA9IHt9O1xyXG5cdFx0XHJcblx0cHJpdmF0ZSBsaW1pdDtcclxuXHRwcml2YXRlIGFjY2Vzc1Rva2VuOiBzdHJpbmc7XHJcblx0cHJpdmF0ZSBkb25lOiBib29sZWFuID0gZmFsc2U7XHJcblx0XHJcblx0Y29uc3RydWN0b3IgKHVybDogc3RyaW5nLCBsaW1pdDogbnVtYmVyLCBhY2Nlc3NUb2tlbjogc3RyaW5nKSB7XHJcblx0XHRzdXBlcih1cmwpO1xyXG5cdFx0dGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xyXG5cdFx0dGhpcy5saW1pdCA9IGxpbWl0O1xyXG5cdFx0TG9nZ2VyLmRlYnVnKFwiZ2l0aHViIHByb3ZpZGVyIGluaXRpYWxpemVkXCIpO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZ2l0VVJMKHVybDogc3RyaW5nLCBhcGk6IHN0cmluZywgcGFyYW1zOiBzdHJpbmcgPSBcIlwiKSB7XHJcblx0XHRMb2dnZXIuZGVidWcoXCJnaXRodWIgZ2V0VVJMIHJlcXVlc3RlZFwiKTtcclxuXHJcblx0XHQvLyBjb252ZXJ0IHRvIGFwaSB1cmwgYW5kIHJlbW92ZSB0cmFpbGluZyAvXHJcblx0XHRpZih1cmwuaW5kZXhPZihcImFwaS5naXRodWIuY29tXCIpID09IC0xKSB7XHJcblx0XHRcdHVybCA9IHVybC5yZXBsYWNlKC8uKmdpdGh1Yi5jb20vLCBcImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvXCIpLnJlcGxhY2UoL1xcL1xcLy9nLCBcIi9cIik7XHJcblx0XHRcdFx0XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHZhciBmdWxsVXJsID0gdXJsICsgXCIvXCIrYXBpK1wiP2FjY2Vzc190b2tlbj1cIit0aGlzLmFjY2Vzc1Rva2VuK1wiJnBlcl9wYWdlPVwiK3RoaXMubGltaXQrXCImXCIrcGFyYW1zK1wiJmNhbGxiYWNrPT9cIjtcclxuXHRcdExvZ2dlci5kZWJ1ZyhcIlVSTCA6IFwiLCBmdWxsVXJsKTtcclxuXHRcdHJldHVybiBmdWxsVXJsO1xyXG5cdH1cclxuXHJcblx0cHVibGljIG9uUmVxdWVzdGVkKHVybDogc3RyaW5nKSB7XHJcblx0XHRMb2dnZXIuZGVidWcoXCJnaXRodWIgcHJvdmlkZXIgcmVxdWVzdGVkXCIpO1xyXG5cdFx0dGhpcy5sb2FkRm9ya3ModXJsKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGxvYWRGb3Jrcyh1cmw6IHN0cmluZykge1xyXG5cdFx0alF1ZXJ5LndoZW4oXHJcblx0XHRcdFx0alF1ZXJ5LmdldEpTT04odGhpcy5naXRVUkwodXJsLCBcImZvcmtzXCIpKSxcclxuXHRcdFx0XHRqUXVlcnkuZ2V0SlNPTih0aGlzLmdpdFVSTCh1cmwsIFwiYnJhbmNoZXNcIikpXHJcblx0XHRcdCkudGhlbiggKGZvcmtzLCBicmFuY2hlcykgPT4ge1xyXG5cdFx0XHRcdExvZ2dlci5kZWJ1ZyhcImdpdGh1YiBwcm92aWRlciBmb3JrcyBsb2FkZWRcIik7XHJcblx0XHRcdFx0Ly90aGlzLmJhc2VDb21taXRzID0gY29tbWl0c1swXS5kYXRhO1xyXG5cdFx0XHRcdHRoaXMucHJvY2Vzc0JyYW5jaGVzKHVybCwgYnJhbmNoZXNbMF0uZGF0YSk7XHJcblx0XHRcdFx0dGhpcy5mb3JrcyA9IGZvcmtzWzBdLmRhdGE7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dGhpcy5sb2FkQnJhbmNoZXMoKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdH1cclxuXHJcblx0cHVibGljIHByb2Nlc3NCcmFuY2hlcyhmb3JrLCBkYXRhKSB7XHJcblx0XHRpZihkYXRhLm1lc3NhZ2UgIT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHR0aGlzLmVycm9yKGRhdGEubWVzc2FnZSk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGRhdGEuZm9yRWFjaChicmFuY2ggPT4ge1xyXG5cdFx0XHRicmFuY2gucmVwbyA9IGZvcmsudXJsICE9PSB1bmRlZmluZWQgPyBmb3JrLnVybCA6IGZvcms7XHJcblx0XHRcdGlmKGZvcmsuZnVsbF9uYW1lICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRicmFuY2gubmFtZSA9IGJyYW5jaC5uYW1lICsgXCJAXCIgKyBmb3JrLmZ1bGxfbmFtZTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmJhc2VCcmFuY2hlcy5wdXNoKGJyYW5jaCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGxvYWRCcmFuY2hlcygpIHtcclxuXHRcdHZhciBmb3JrUmVxdWVzdHMgPSB0aGlzLmZvcmtzLm1hcChmb3JrID0+IHtyZXR1cm4galF1ZXJ5LmdldEpTT04odGhpcy5naXRVUkwoZm9yay51cmwsIFwiYnJhbmNoZXNcIiksIGRhdGEgPT4ge1xyXG5cdFx0XHRMb2dnZXIuZGVidWcoXCJsb2FkZWQgYnJhbmNoZXMgZm9yIFwiK2ZvcmsubmFtZSk7XHJcblx0XHRcdHRoaXMucHJvY2Vzc0JyYW5jaGVzKGZvcmssIGRhdGEuZGF0YSk7XHJcblx0XHR9KX0pO1xyXG5cdFx0alF1ZXJ5LndoZW4uYXBwbHkoalF1ZXJ5LCBmb3JrUmVxdWVzdHMpLmRvbmUoKCkgPT4ge1xyXG5cdFx0XHRMb2dnZXIuZGVidWcoXCJhbGwgYnJhbmNoZXMgbG9hZGVkXCIpO1xyXG5cdFx0XHR0aGlzLmxvYWRDb21taXRzKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGxvYWRDb21taXRzKCkge1xyXG5cdFx0dmFyIGNvbW1pdFJlcXVlc3RzID0gW107XHJcblx0XHR0aGlzLmJhc2VCcmFuY2hlcy5mb3JFYWNoKGIgPT4ge1xyXG5cdFx0XHR2YXIgY29tbWl0ID0gdGhpcy5kYXRhW2IuY29tbWl0LnNoYV07XHJcblx0XHRcdGlmKGNvbW1pdCA9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRjb21taXRSZXF1ZXN0cy5wdXNoKFxyXG5cdFx0XHRcdFx0alF1ZXJ5LmdldEpTT04odGhpcy5naXRVUkwoYi5yZXBvLCBcImNvbW1pdHNcIiwgXCJzaGE9XCIrYi5jb21taXQuc2hhKSwgZGF0YSA9PiB7XHJcblx0XHRcdFx0XHRcdExvZ2dlci5kZWJ1ZyhcImxvYWRlZCBjb21taXRzIGZvciBcIitiLm5hbWUpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnByb2Nlc3NDb21taXRzKGRhdGEuZGF0YSk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRqUXVlcnkud2hlbi5hcHBseShqUXVlcnksIGNvbW1pdFJlcXVlc3RzKS5kb25lKCgpID0+IHtcclxuXHRcdFx0dGhpcy5wcm9jZXNzKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHByb2Nlc3NDb21taXRzKGRhdGEpIHtcclxuXHRcdGRhdGEubWFwKGRhdGEgPT4ge1xyXG5cdFx0XHR2YXIgYzphbnkgPSB7fTtcclxuXHRcdFx0Yy5zaGEgPSBkYXRhLnNoYTtcclxuXHRcdFx0Yy5zc2hhID0gZGF0YS5zaGEuc3Vic3RyaW5nKDAsOCk7XHJcblx0XHRcdGMucGFyZW50aGFzaGVzID0gKDxhbnlbXT4gZGF0YS5wYXJlbnRzKS5tYXAoeCA9PiB7IHJldHVybiB4LnNoYX0pO1x0XHRcdFxyXG5cdFx0XHRjLmF1dGhvcm5hbWUgPSBkYXRhLmNvbW1pdC5hdXRob3IubmFtZTtcclxuXHRcdFx0Yy5hdXRob3JlbWFpbCA9IGRhdGEuY29tbWl0LmF1dGhvci5lbWFpbDtcclxuXHRcdFx0Yy5hdXRob3JkYXRlID0gZGF0YS5jb21taXQuYXV0aG9yLmRhdGU7XHJcblx0XHRcdGMuYXV0aG9ydGltZXN0YW1wID0gbmV3IERhdGUoZGF0YS5jb21taXQuYXV0aG9yLmRhdGUpLmdldFRpbWUoKTtcclxuXHRcdFx0XHJcblx0XHRcdGMuY29tbWl0dGVybmFtZSA9IGRhdGEuY29tbWl0LmNvbW1pdHRlci5uYW1lO1xyXG5cdFx0XHRjLmNvbW1pdHRlcmVtYWlsID0gZGF0YS5jb21taXQuY29tbWl0dGVyLmVtYWlsO1xyXG5cdFx0XHRjLmNvbW1pdHRlcmRhdGUgPSBkYXRhLmNvbW1pdC5jb21taXR0ZXIuZGF0ZTtcclxuXHRcdFx0Yy5jb21taXR0ZXJ0aW1lc3RhbXAgPSBuZXcgRGF0ZShkYXRhLmNvbW1pdC5jb21taXR0ZXIuZGF0ZSkuZ2V0VGltZSgpO1xyXG5cdFxyXG5cdFx0XHRjLnN1YmplY3QgPSBkYXRhLmNvbW1pdC5tZXNzYWdlO1xyXG5cdFx0XHRjLmJvZHkgPSBcIlwiOyAvLyBUb2RvOiB3aGVyZSB0byBnZXQgdGhpcz9cclxuXHRcdFx0Yy5yZWZuYW1lcyA9IFtdOyAvLyBzZXQgd2hlbiBwYXJzaW5nIGJyYW5jaGVzXHJcblx0XHRcdGMuaW5IZWFkcyA9IFtdOyAvLyBzZXQgd2hlbiBwYXJzaW5nIGJyYW5jaGVzXHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gYztcclxuXHRcdH0pLmZvckVhY2goY29tbWl0ID0+IHtcclxuXHRcdFx0dGhpcy5kYXRhW2NvbW1pdC5zaGFdID0gY29tbWl0O1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHR9XHJcblx0XHJcblxyXG5cdHB1YmxpYyBwcm9jZXNzKCkge1xyXG5cdFx0dGhpcy5iYXNlQnJhbmNoZXMuZm9yRWFjaChiID0+IHtcclxuXHRcdFx0dmFyIGNvbW1pdCA9IHRoaXMuZGF0YVtiLmNvbW1pdC5zaGFdO1xyXG5cdFx0XHRpZihjb21taXQgPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0Ly8gY29tbWl0IG1pc3NpbmcgZm9yIGJyYW5jaCAtIFRPRE86IGZldGNoIGl0XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Yi5hc3NpZ25lZCA9IHRydWU7XHJcblx0XHRcdFx0Y29tbWl0LnJlZm5hbWVzLnB1c2goYi5uYW1lKTtcclxuXHRcdFx0XHR0aGlzLmFzc2lnbkhlYWRzKGNvbW1pdCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHQvLyBTb3J0XHJcblx0XHR2YXIgbmV3ZGF0YSA9IHt9O1xyXG5cdFx0T2JqZWN0LmtleXModGhpcy5kYXRhKS5zb3J0KChhLGIpID0+IHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuZGF0YVtiXS5jb21taXR0ZXJ0aW1lc3RhbXAgLSB0aGlzLmRhdGFbYV0uY29tbWl0dGVydGltZXN0YW1wO1xyXG5cdFx0fSkuZm9yRWFjaChzaGEgPT4ge1xyXG5cdFx0XHRuZXdkYXRhW3NoYV0gPSB0aGlzLmRhdGFbc2hhXTtcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRcclxuXHRcdHRoaXMud2hlbkRvbmUobmV3ZGF0YSk7XHJcblx0fVxyXG5cdFxyXG5cdHByaXZhdGUgYXNzaWduSGVhZHMoY29tbWl0KSB7XHJcblx0XHRjb21taXQucGFyZW50czEgPSBjb21taXQucGFyZW50aGFzaGVzLm1hcCggeCA9PiB7IHJldHVybiB4fSk7IC8vIGNvcHkgYXJyYXlcclxuXHRcclxuXHRcdHdoaWxlKGNvbW1pdC5wYXJlbnRzMS5sZW5ndGggPiAwKSB7XHJcblx0XHRcdHZhciBuZXdQYXJlbnRzID0gW107XHJcblx0XHRcdGNvbW1pdC5wYXJlbnRzMS5mb3JFYWNoKCBwYXJlbnRIYXNoID0+IHtcclxuXHRcdFx0XHR2YXIgcCA9IHRoaXMuZGF0YVtwYXJlbnRIYXNoXVx0XHJcblx0XHRcdFx0aWYocCAhPSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdHAuaW5IZWFkcy5wdXNoKGNvbW1pdC5zaGEpXHJcblx0XHRcdFx0XHQvLyBhZGQgYWxsIGdyYW5kcGFyZW50cyB0byB0aGUgbmV3cGFyZW50c1xyXG5cdFx0XHRcdFx0cC5wYXJlbnRoYXNoZXMuZm9yRWFjaChoID0+IHtcclxuXHRcdFx0XHRcdFx0aWYobmV3UGFyZW50cy5pbmRleE9mKGgpID09PSAtMSkge1xyXG5cdFx0XHRcdFx0XHRcdG5ld1BhcmVudHMucHVzaChoKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRjb21taXQucGFyZW50czEgPSBuZXdQYXJlbnRzXHJcblx0XHR9XHJcblx0fVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkJyYW5jaC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbW1pdC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbmZpZy50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkFzeW5jTG9hZGVyLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiRXhwYW5kYWJsZS50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbW1pdFByb3ZpZGVyLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicGx1Z2lucy9Mb2NhbEdpdDJKc29uUHJvdmlkZXIudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJwbHVnaW5zL2dpdGh1Yi50c1wiLz5cclxuXHRcclxuaW50ZXJmYWNlIENvbW1pdHMgeyBba2V5OnN0cmluZ106Q29tbWl0OyB9XHJcbmludGVyZmFjZSBCcmFuY2hlcyB7IFtrZXk6c3RyaW5nXTpCcmFuY2g7IH1cclxuXHRcclxuY2xhc3MgR2l0bGluZSB7XHJcblx0XHJcblx0c2VsZiA9IHRoaXM7XHJcblx0cHVibGljIG1heFg6bnVtYmVyID0gMDtcclxuXHRwdWJsaWMgbWF4SW5kZXhZOm51bWJlciA9IDA7XHJcblx0cHVibGljIGNvbW1pdHM6Q29tbWl0cyA9IHt9O1xyXG5cdHB1YmxpYyBmaXJzdENvbW1pdDpDb21taXQ7XHJcblx0cHVibGljIGNhbnZhcztcclxuXHRwdWJsaWMgZGF0YTtcclxuXHRwdWJsaWMgcGFuZWw7XHJcblx0cHVibGljIHRleHRQYW5lbDtcclxuXHRwdWJsaWMgaGVhZHNNYXA6QnJhbmNoZXMgPSB7fTtcclxuXHRwdWJsaWMgcm9vdExhYmVsOyBcclxuXHRcdFxyXG5cdHB1YmxpYyBhbDogQXN5bmNMb2FkZXI7XHJcblx0XHJcblx0cHVibGljIGNvbmZpZzogR2l0bGluZUNvbmZpZyA9IG5ldyBHaXRsaW5lQ29uZmlnKCk7XHJcblx0XHRcdFxyXG5cdC8vIEhUTUwgc3R1ZmZcclxuXHRwcml2YXRlIGxvYWRpbmdQYW5lbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBncmFwaGljYWxQYW5lbDogSFRNTEVsZW1lbnQ7XHJcblx0cHJpdmF0ZSBoZWFkZXJQYW5lbDogSFRNTEVsZW1lbnQ7ICBcclxuXHRwcml2YXRlIGNvbnRlbnRQYW5lbDogSFRNTEVsZW1lbnQ7XHJcblx0XHRcdFxyXG5cdHByaXZhdGUgY29tbWl0UHJvdmlkZXI6IENvbW1pdFByb3ZpZGVyO1xyXG5cdFxyXG5cdHB1YmxpYyBhZGRDb21taXQoY29tbWl0OiBDb21taXQpIHtcclxuXHRcdHRoaXMuY29tbWl0c1tjb21taXQuZ2V0RnVsbFNoYSgpXSA9IGNvbW1pdDtcclxuXHRcdFxyXG5cdFx0Ly8gZmlyc3QgY29tbWl0IG5lZWRlZCBieSByZW5kZXJpbmdcclxuXHRcdGlmKHRoaXMuZmlyc3RDb21taXQgPT09IHVuZGVmaW5lZCkge1xyXG5cdFx0XHR0aGlzLmZpcnN0Q29tbWl0ID0gY29tbWl0O1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgYWRkQnJhbmNoKHJlZm5hbWU6IHN0cmluZywgY29tbWl0OiBDb21taXQsIHNwZWNpZml0eTogbnVtYmVyKSB7XHJcblx0XHR2YXIgYnJhbmNoID0gbmV3IEJyYW5jaChyZWZuYW1lLCBjb21taXQsIHNwZWNpZml0eSk7XHJcblx0XHR0aGlzLmhlYWRzTWFwW3JlZm5hbWVdID0gYnJhbmNoO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgcmVuZGVyKCkge1xyXG5cdFx0dGhpcy5jYW52YXMgPSBuZXcganNnbC5QYW5lbCh0aGlzLmdyYXBoaWNhbFBhbmVsKTtcclxuXHJcblx0XHR0aGlzLmFsLnRoZW5TaW5nbGUoXCJMb2FkaW5nIERhdGFcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmFsLnN1c3BlbmQoKTtcclxuXHRcdFx0dGhpcy5jb21taXRQcm92aWRlci53aXRoRXJyb3JDYWxsYmFjayhlcnJvciA9PiB7XHJcblx0XHRcdFx0dGhpcy5hbC5lcnJvcihlcnJvcik7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLmNvbW1pdFByb3ZpZGVyLndpdGhDYWxsYmFjaygganNvbiA9PiB7XHJcblx0XHRcdFx0dGhpcy5kYXRhID0ganNvbjtcclxuXHRcdFx0XHR0aGlzLmFsLnJlc3VtZSgpO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHR0aGlzLmNvbW1pdFByb3ZpZGVyLnJlcXVlc3QoKTtcclxuXHRcdH0pLnRoZW4oXCJMb2FkaW5nIENvbW1pdHNcIiwgKCkgPT4ge3JldHVybiBPYmplY3Qua2V5cyh0aGlzLmRhdGEpfSwgKHNoYSkgPT4ge1xyXG5cdFx0XHR2YXIgY29tbWl0ID0gbmV3IENvbW1pdCh0aGlzLCB0aGlzLmRhdGFbc2hhXSk7XHJcblx0XHRcdHRoaXMuYWRkQ29tbWl0KGNvbW1pdCk7XHJcblx0XHR9KVxyXG5cdFx0LnRoZW5TaW5nbGUoXCJCdWlsZGluZyBHcmFwaFwiLCAoKSA9PiB7XHJcblx0XHRcdHRoaXMuYnVpbGRHcmFwaCgpO1xyXG5cdFx0fSlcclxuXHRcdC50aGVuKFwiRHJhd2luZyBMYWJlbHNcIiwgKCkgPT4ge3JldHVybiBPYmplY3Qua2V5cyh0aGlzLmNvbW1pdHMpfSwgKHNoYSkgPT4ge1xyXG5cdFx0XHR2YXIgY29tbWl0ID0gdGhpcy5jb21taXRzW3NoYV07XHJcblx0XHRcdHRoaXMuZHJhd0NvbW1pdChjb21taXQpO1xyXG5cdFx0fSlcclxuXHRcdC50aGVuU2luZ2xlKFwiQ3JlYXRpbmcgTGVnZW5kXCIsICgpID0+IHtcclxuXHRcdFx0dGhpcy5yb290TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cdFx0XHR0aGlzLnJvb3RMYWJlbC5jbGFzc05hbWUgPSBcImNvbW1pdC1sZWdlbmRcIlxyXG5cdFx0XHR0aGlzLnRleHRQYW5lbC5hcHBlbmRDaGlsZCh0aGlzLnJvb3RMYWJlbCk7XHJcblx0XHR9KVxyXG5cdFx0LnRoZW4oXCJEcmF3aW5nIE1lcmdlc1wiLCAoKSA9PiB7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuY29tbWl0cyl9LCAoc2hhKSA9PiB7XHJcblx0XHRcdHZhciBjb21taXQgPSB0aGlzLmNvbW1pdHNbc2hhXTtcclxuXHRcdFx0dGhpcy5kcmF3UmVmZXJlbmNlcyhjb21taXQpO1xyXG5cdFx0fSlcclxuXHRcdC50aGVuU2luZ2xlKFwiUmVzaXppbmdcIiwgKCkgPT4ge1xyXG5cdFx0XHR0aGlzLmdyYXBoaWNhbFBhbmVsLnN0eWxlLndpZHRoID0gaW5kZXhUb1godGhpcy5tYXhYICsgMSkgKyBcInB4XCJcclxuXHRcdFx0dGhpcy5ncmFwaGljYWxQYW5lbC5zdHlsZS5oZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpICsgXCJweFwiO1xyXG5cdFx0fSkuc3RhcnQoKTtcclxuXHRcdFxyXG5cdFx0d2luZG93Lm9ucmVzaXplID0gKGV2ZW50OiBVSUV2ZW50KSA9PiB7XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLmFsLnRoZW4oXCJSZWRyYXdpbmdcIiwgKCkgPT4ge3JldHVybiBPYmplY3Qua2V5cyh0aGlzLmNvbW1pdHMpfSwgKHNoYSkgPT4ge1xyXG5cdFx0XHRcdHZhciBjb21taXQ6Q29tbWl0ID0gdGhpcy5jb21taXRzW3NoYV07XHJcblx0XHRcdFx0Y29tbWl0LnZpZXcucmVkcmF3KCk7XHJcblx0XHRcdH0pLnRoZW5TaW5nbGUoXCJSZXNpemluZ1wiLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5ncmFwaGljYWxQYW5lbC5zdHlsZS53aWR0aCA9IGluZGV4VG9YKHRoaXMubWF4WCArIDEpICsgXCJweFwiXHJcblx0XHRcdFx0dGhpcy5ncmFwaGljYWxQYW5lbC5zdHlsZS5oZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpICsgXCJweFwiO1xyXG5cdFx0XHR9KS5zdGFydChmYWxzZSk7IFxyXG5cdFx0fTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGdldEhlaWdodCgpIHtcclxuXHRcdHJldHVybiB0aGlzLnJvb3RMYWJlbC5vZmZzZXRUb3AgLSB0aGlzLmZpcnN0Q29tbWl0LnZpZXcubGFiZWwub2Zmc2V0VG9wO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgYnVpbGRHcmFwaCgpIHtcclxuXHRcdHZhciBzaGFzID0gT2JqZWN0LmtleXModGhpcy5jb21taXRzKTtcclxuXHRcdHNoYXMuZm9yRWFjaCgoc2hhKSA9PiB7XHJcblx0XHRcdHZhciBjb21taXQgPSB0aGlzLmNvbW1pdHNbc2hhXTtcclxuXHRcdFx0Y29tbWl0LmluaXRSZWxhdGlvbnMoKTtcclxuXHRcdH0pO1xyXG5cdFx0c2hhcy5mb3JFYWNoKChzaGEpID0+IHtcclxuXHRcdFx0dmFyIGNvbW1pdCA9IHRoaXMuY29tbWl0c1tzaGFdO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29tbWl0LmluaXRIZWFkU3BlY2lmaXR5KCk7XHJcblx0XHRcdGNvbW1pdC5pbml0TWVyZ2VzKCk7XHJcblx0XHR9KTtcclxuXHRcdHRoaXMuaW5pdEJyYW5jaGVzKCk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBkcmF3Q29tbWl0KGNvbW1pdDogQ29tbWl0KSB7XHJcblx0XHQvLyBMYWJlbFxyXG5cdFx0Y29tbWl0LnZpZXcgPSBuZXcgQ29tbWl0Vmlldyh0aGlzLmNhbnZhcywgdGhpcy5jb25maWcsIGNvbW1pdCk7XHJcblx0XHRcclxuXHRcdGlmKGNvbW1pdC5vdXRPZlNjb3BlID09PSBmYWxzZSkge1xyXG5cdFx0XHRjb21taXQudmlldy5sYWJlbCA9IHRoaXMuZHJhd0xhYmVsKGNvbW1pdCk7XHJcblxyXG5cdFx0XHRjb21taXQudmlldy5sYWJlbC5vbmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYoY29uc29sZSkge1xyXG5cdFx0XHRcdFx0TG9nZ2VyLmRlYnVnKGNvbW1pdCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0dGhpcy50ZXh0UGFuZWwuYXBwZW5kQ2hpbGQoY29tbWl0LnZpZXcubGFiZWwpO1xyXG5cdFx0XHRjb21taXQudmlldy5sYWJlbC5zdHlsZVsncGFkZGluZy1sZWZ0J10gPSBpbmRleFRvWCh0aGlzLm1heFggKyAxKStcInB4XCJcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cHVibGljIGRyYXdSZWZlcmVuY2VzKGNvbW1pdDogQ29tbWl0KSB7XHJcblx0XHRjb21taXQudmlldy5hZGRSZWxhdGlvbnMoKTtcclxuXHRcdGNvbW1pdC52aWV3LnJlZHJhdygpO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZHJhd0xhYmVsKGNvbW1pdDogQ29tbWl0KSB7XHJcblx0XHR2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cdFx0bGFiZWwuY2xhc3NOYW1lID0gXCJjb21taXQtbGVnZW5kXCJcclxuXHJcblx0XHQvLyBTSEEgSGFzaCBcclxuXHRcdHZhciBzaG9ydFNoYTpzdHJpbmcgPSBjb21taXQuZ2V0U2hvcnRTaGEoKTtcclxuXHRcdHZhciBmdWxsU2hhOnN0cmluZyA9IGNvbW1pdC5nZXRGdWxsU2hhKCk7XHJcblx0XHR2YXIgc2hhOkhUTUxFeHBhbmRhYmxlRWxlbWVudCA9IEV4cGFuZGFibGUuZXh0ZW5kKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpKTtcclxuXHRcdHNoYS53aGVuU2hvcnQoc2hvcnRTaGErXCIgXCIpO1xyXG5cdFx0c2hhLndoZW5GdWxsKGZ1bGxTaGEpO1xyXG5cdFx0c2hhLnN0eWxlLmZvbnRGYW1pbHkgPSBcIkNvdXJpZXJcIjtcclxuXHRcdFxyXG5cdFx0bGFiZWwuYXBwZW5kQ2hpbGQoc2hhKTtcclxuXHRcdFxyXG5cdFx0Ly8gQXV0aG9yIGFuZCBjb21taXR0ZXJcclxuXHRcdGxhYmVsLmFwcGVuZENoaWxkKHRoaXMuZHJhd0lkZW50aXR5KFwiYXV0aG9yXCIsIGNvbW1pdC5hdXRob3IpKTtcclxuXHRcdFxyXG5cdFx0aWYoY29tbWl0LmF1dGhvci5lbWFpbCAhPSBjb21taXQuY29tbWl0dGVyLmVtYWlsKSB7XHJcblx0XHRcdGxhYmVsLmFwcGVuZENoaWxkKHRoaXMuZHJhd0lkZW50aXR5KFwiY29tbWl0dGVyXCIsIGNvbW1pdC5jb21taXR0ZXIpKTtcclxuXHRcdH1cclxuXHRcdCBcclxuXHRcdC8vIEJyYW5jaCAtIFRPRE86IFRhZ3MgYW5kIG90aGVyIGJyYW5jaGVzXHRcdFxyXG5cdFx0aWYoY29tbWl0LmJyYW5jaCAmJiBjb21taXQuYnJhbmNoLmNvbW1pdCA9PT0gY29tbWl0ICYmICFjb21taXQuYnJhbmNoLmFub255bW91cykge1xyXG5cdFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cdFx0XHRoZWFkLmNsYXNzTmFtZSA9IFwiaGVhZC1sYWJlbFwiO1xyXG5cdFx0XHRoZWFkLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbW1pdC5nZXRDb2xvcig0MCk7XHJcblx0XHRcdGhlYWQuc3R5bGUuY29sb3IgPSBcIndoaXRlXCI7XHJcblx0XHRcdGhlYWQuc3R5bGUucGFkZGluZ0xlZnQgPSBoZWFkLnN0eWxlLnBhZGRpbmdSaWdodCA9IFwiMnB4XCI7XHJcblx0XHRcdGhlYWQuaW5uZXJIVE1MID0gY29tbWl0LmJyYW5jaC5yZWY7XHJcblx0XHJcblx0XHRcdGxhYmVsLmFwcGVuZENoaWxkKGhlYWQpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdC8vIFN1YmplY3RcdFx0XHJcblx0XHR2YXIgc3ViamVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xyXG5cdFx0c3ViamVjdC5pbm5lckhUTUwgPSBcIiBcIitjb21taXQuc3ViamVjdDtcclxuXHRcdHN1YmplY3Quc3R5bGUuY29sb3IgPSBjb21taXQuaGFzTWVyZ2VzKCkgPyBcImdyZXlcIjogXCJibGFja1wiO1xyXG5cdFx0bGFiZWwuYXBwZW5kQ2hpbGQoc3ViamVjdCk7IFxyXG5cdFx0XHJcblx0XHRsYWJlbC5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcclxuXHRcdHJldHVybiBsYWJlbDtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGRyYXdJZGVudGl0eSh0eXBlOiBzdHJpbmcsIGlkOiBJZGVudGl0eSkge1xyXG5cdFx0dmFyIGVsOiBIVE1MRXhwYW5kYWJsZUVsZW1lbnQgPSBFeHBhbmRhYmxlLmV4dGVuZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZ2l0bGluZS1pZGVudGl0eVwiKSk7XHJcblx0XHRlbC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCB0eXBlKTtcclxuXHRcdGVsLnNldEF0dHJpYnV0ZShcIm5hbWVcIiwgaWQubmFtZSk7XHJcblx0XHR2YXIgZnVsbG5hbWUgPSBpZC5uYW1lICsgXCIgJmx0O1wiK2lkLmVtYWlsLnRvTG93ZXJDYXNlKCkrXCImZ3Q7XCI7XHJcblx0XHRlbC5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBmdWxsbmFtZSk7XHJcblx0XHRcclxuXHRcdGVsLnN0eWxlLmJhY2tncm91bmQgPSB0aGlzLmNvbmZpZy5hdmF0YXJzLm1hcChmID0+IHtyZXR1cm4gXCJ1cmwoXCIrZihpZC5lbWFpbCkrXCIpIG5vLXJlcGVhdFwifSkuam9pbihcIiwgXCIpO1xyXG5cdFx0ZWwud2hlbkZ1bGwoZnVsbG5hbWUpO1xyXG5cdFx0ZWwud2hlblNob3J0KFwiIFwiKTtcclxuXHRcdHJldHVybiBlbDtcclxuXHR9XHJcblxyXG5cdC8qXHJcblx0XHRCYXNlZCBvbiB0aGUgc3BlY2lmaXR5IGFzc2lnbiB0aGUgYnJhbmNoZXMgdG8gdGhlIGNvbW1pdHMuIGlmIGluIGRvdWJ0IHRoZSBjb21taXQgd2lsbCBiZSBvbiB0aGUgbW9zdCBzcGVjaWZpYyBicmFuY2ggXHJcblx0Ki9cclxuXHRwdWJsaWMgaW5pdEJyYW5jaGVzKCkgICB7XHJcblxyXG5cdFx0dmFyIGhlYWRzID0gT2JqZWN0LmtleXModGhpcy5oZWFkc01hcCk7XHJcblx0XHRcclxuXHRcdC8qIHNldCB0aGUgaW5kZXggdG8gdGhlIGhlYWQgb2JqZWN0ICovXHJcblx0XHRmb3IodmFyIGkgPTA7IGk8IGhlYWRzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdHZhciBoZWFkTmFtZSA9IGhlYWRzW2ldO1xyXG5cdFx0XHR2YXIgaGVhZCA9IHRoaXMuaGVhZHNNYXBbaGVhZE5hbWVdO1xyXG5cdFx0XHRoZWFkLmNvbW1pdC5pbml0RGVmYXVsdEJyYW5jaCgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvKiBTb3J0IHRoZSBicmFuY2hlcyBieSBzcGVjaWZpdHkgKi9cclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdGhlYWRzLnNvcnQoZnVuY3Rpb24obCwgcikge1xyXG5cdFx0XHR2YXIgbEhlYWQ6IENvbW1pdCA9IHNlbGYuaGVhZHNNYXBbbF0uY29tbWl0O1xyXG5cdFx0XHR2YXIgckhlYWQ6IENvbW1pdCA9IHNlbGYuaGVhZHNNYXBbcl0uY29tbWl0O1xyXG5cdFx0XHRcclxuXHRcdFx0aWYobEhlYWQgPT09IHJIZWFkKSB7XHJcblx0XHRcdFx0cmV0dXJuIDA7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmKGxIZWFkLmJyYW5jaC5jYXRlZ29yeSA9PT0gckhlYWQuYnJhbmNoLmNhdGVnb3J5KSB7XHJcblx0XHRcdFx0cmV0dXJuIGxIZWFkLmJyYW5jaC5zcGVjaWZpdHkgLSBySGVhZC5icmFuY2guc3BlY2lmaXR5O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiBsSGVhZC5icmFuY2guY2F0ZWdvcnkubGVuZ3RoIC0gckhlYWQuYnJhbmNoLmNhdGVnb3J5Lmxlbmd0aDtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cclxuXHJcblx0XHQvKiBzZXQgdGhlIGluZGV4IHRvIHRoZSBoZWFkIG9iamVjdCAqL1xyXG5cdFx0dmFyIG1heExhbmUgPSAwO1xyXG5cdFx0Zm9yKHZhciBpID0wOyBpPCBoZWFkcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaGVhZE5hbWUgPSBoZWFkc1tpXTtcclxuXHRcdFx0dmFyIGhlYWQgPSB0aGlzLmhlYWRzTWFwW2hlYWROYW1lXTtcclxuXHRcdFx0dmFyIHRpcDogQ29tbWl0ID0gaGVhZC5jb21taXQ7XHJcblx0XHRcdFxyXG5cdFx0XHRpZih0aXAuYnJhbmNoID09PSBoZWFkKSB7XHJcblx0XHRcdFx0aGVhZC5sYW5lID0gbWF4TGFuZTtcclxuXHRcdFx0XHQvL2hlYWQuaW5kZXggPSBtYXhMYW5lO1xyXG5cdFx0XHRcdG1heExhbmUgKys7XHJcblxyXG5cdFx0XHRcdC8vIENhbiB3ZSBkaXNwbGF5IHRoaXMgaGVhZCBhIGxpdHRsZSBtb3JlIHRvIHRoZSBsZWZ0P1xyXG5cdFx0XHRcdGZvcih2YXIgbD0wOyBsPCBoZWFkcy5sZW5ndGg7IGwrKykge1xyXG5cclxuXHRcdFx0XHRcdHZhciBjYW5Vc2VMYW5lIDogYm9vbGVhbiA9IHRydWU7XHJcblx0XHRcdFx0XHRmb3IodmFyIGo9MDsgajwgaGVhZHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRcdFx0dmFyIGpoZWFkTmFtZSA9IGhlYWRzW2pdO1xyXG5cdFx0XHRcdFx0XHR2YXIgaGVhZE9uTGFuZTogQ29tbWl0ID0gdGhpcy5oZWFkc01hcFtqaGVhZE5hbWVdLmNvbW1pdDtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdGlmKGhlYWRPbkxhbmUgPT09IHVuZGVmaW5lZCB8fCBoZWFkT25MYW5lLmJyYW5jaCAhPSBoZWFkICYmIGhlYWRPbkxhbmUuYnJhbmNoLmxhbmUgPT09IGwgJiYgKHRpcC5pbnRlcnNlY3RzKGhlYWRPbkxhbmUpIHx8IHRpcC5icmFuY2guY2F0ZWdvcnkgIT0gaGVhZE9uTGFuZS5icmFuY2guY2F0ZWdvcnkpKSB7XHJcblx0XHRcdFx0XHRcdFx0Y2FuVXNlTGFuZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRpZihjYW5Vc2VMYW5lKSB7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRMb2dnZXIuZGVidWcoXCJOTyBJTlRFUlNFQ1RTOiBcIix0aXAuYnJhbmNoLnJlZixcIiAtIFwiLGhlYWRPbkxhbmUuYnJhbmNoLnJlZik7XHJcblx0XHRcdFx0XHRcdGhlYWQubGFuZSA9IGw7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLm1heFggPSBNYXRoLm1heCh0aGlzLm1heFgsIGhlYWQubGFuZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9XHJcblx0XHRcclxuXHR9XHJcblxyXG5cdC8vIExhdW5jaGluZ1xyXG5cdHB1YmxpYyBmcm9tSlNPTihqc29uRmlsZTogc3RyaW5nKTogR2l0bGluZSB7XHJcblx0XHRyZXR1cm4gdGhpcy5mcm9tUHJvdmlkZXIobmV3IExvY2FsR2l0Mkpzb25Qcm92aWRlcihqc29uRmlsZSkpO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZnJvbVByb3ZpZGVyKGNvbW1pdFByb3ZpZGVyOiBDb21taXRQcm92aWRlcik6IEdpdGxpbmUge1xyXG5cdFx0dGhpcy5jb21taXRQcm92aWRlciA9IGNvbW1pdFByb3ZpZGVyO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cdFxyXG5cdHByaXZhdGUgcmVuZGVyVG8ocGFuZWw6IEhUTUxFbGVtZW50KTogR2l0bGluZSB7XHJcblx0XHRpZih0aGlzLmhlYWRlclBhbmVsICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0cGFuZWwuYXBwZW5kQ2hpbGQodGhpcy5oZWFkZXJQYW5lbCk7XHJcblx0XHR9XHJcblx0XHRwYW5lbC5hcHBlbmRDaGlsZCh0aGlzLmxvYWRpbmdQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJnaXRsaW5lLWxvYWRpbmdwYW5lbFwiKSk7XHJcblx0XHRwYW5lbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRQYW5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJnaXRsaW5lLWNvbnRlbnRwYW5lbFwiKSk7XHJcblx0XHR0aGlzLmNvbnRlbnRQYW5lbC5hcHBlbmRDaGlsZCh0aGlzLmdyYXBoaWNhbFBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImdpdGxpbmUtZ3JhcGhpY2FscGFuZWxcIikpO1xyXG5cdFx0dGhpcy5jb250ZW50UGFuZWwuYXBwZW5kQ2hpbGQodGhpcy50ZXh0UGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZ2l0bGluZS10ZXh0cGFuZWxcIikpO1xyXG5cdFx0dGhpcy5hbCA9IG5ldyBBc3luY0xvYWRlcih0aGlzLmxvYWRpbmdQYW5lbCk7XHJcblx0XHRcclxuXHRcdHRoaXMucmVuZGVyKCk7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHdpdGhIZWFkZXIoaGVhZGVyOiBzdHJpbmcpOiBHaXRsaW5lO1xyXG5cdHB1YmxpYyB3aXRoSGVhZGVyKGhlYWRlcjogSFRNTEVsZW1lbnQpOiBHaXRsaW5lO1xyXG5cclxuXHRwdWJsaWMgd2l0aEhlYWRlcihoZWFkZXI6IGFueSkge1xyXG5cdFx0aWYodHlwZW9mIGhlYWRlciA9PT0gXCJzdHJpbmdcIikge1xyXG5cdFx0XHR0aGlzLmhlYWRlclBhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImdpdGxpbmUtaGVhZGVycGFuZWxcIik7XHJcblx0XHRcdHRoaXMuaGVhZGVyUGFuZWwuaW5uZXJIVE1MID0gaGVhZGVyO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5oZWFkZXJQYW5lbCA9IGhlYWRlcjtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG59XHJcbiIsIi8qKlxyXG4gKiBiYXNpYyBzdXBwb3J0IGZvciBqc2dsIHNoYXBlc1xyXG4gKi9cclxuY2xhc3MgU2hhcGUge1xyXG5cdHByb3RlY3RlZCBlbGVtZW50OiBhbnk7IC8vIGpzZ2wgZWxlbWVudFxyXG5cdHByaXZhdGUgcmVuZGVyZWRUbzogSFRNTEVsZW1lbnQ7IC8vIGpzZ2wgY2FudmFzIChhbnkgaHRtbClcclxuXHRwcm90ZWN0ZWQgY2FudmFzOiBhbnk7XHJcblx0cHJpdmF0ZSBkZXBlbmRlbmNpZXMgOiBTaGFwZVtdID0gW107XHJcblx0cHVibGljIGNvbnN0cnVjdG9yKGNhbnZhczogYW55LCBlbGVtZW50OiBhbnkpIHtcclxuXHRcdHRoaXMuY2FudmFzID0gY2FudmFzO1xyXG5cdFx0dGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBhZGRJZk1pc3NpbmcoKSB7XHJcblx0XHRpZih0aGlzLmVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJlbmRlcmVkVG8gPT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLmFkZEVsZW1lbnRzKCk7XHJcblx0XHRcdHRoaXMucmVuZGVyZWRUbyA9IHRoaXMuY2FudmFzO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgYWRkRWxlbWVudHMoKSB7XHJcblx0XHR0aGlzLmNhbnZhcy5hZGRFbGVtZW50KHRoaXMuZWxlbWVudCk7XHRcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHVwZGF0ZSgpIHtcclxuXHRcdHRoaXMuZGVwZW5kZW5jaWVzLmZvckVhY2goZGVwID0+IHtcclxuXHRcdFx0ZGVwLnVwZGF0ZSgpO1xyXG5cdFx0fSlcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGRlcGVuZHNPbihvbjogU2hhcGUpIHtcclxuXHRcdG9uLmRlcGVuZGVuY2llcy5wdXNoKHRoaXMpO1xyXG5cdH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJTaGFwZS50c1wiLz5cclxuLyoqXHJcbiAqIE5ldyB0eXBlc2NyaXB0IGZpbGVcclxuICovXHJcblxyXG5jbGFzcyBEb3QgZXh0ZW5kcyBTaGFwZSB7XHJcblx0XHJcblx0eDogbnVtYmVyO1xyXG5cdHk6IG51bWJlcjtcclxuXHR3aWR0aDogbnVtYmVyO1xyXG5cdGhlaWdodDogbnVtYmVyO1xyXG5cdFxyXG5cdGNvbnN0cnVjdG9yKGNhbnZhczogYW55KSB7XHJcblx0XHRzdXBlcihjYW52YXMsIGNhbnZhcy5jcmVhdGVSZWN0YW5nbGUoKSk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBzaXplKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKTogRG90IHtcclxuXHRcdHRoaXMud2lkdGggPSB3aWR0aDtcclxuXHRcdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cdFx0XHJcblx0XHR0aGlzLmVsZW1lbnQuc2V0V2lkdGgod2lkdGgpO1xyXG5cdFx0dGhpcy5lbGVtZW50LnNldEhlaWdodChoZWlnaHQpO1xyXG5cdFx0dGhpcy5lbGVtZW50LnNldFhSYWRpdXMod2lkdGggLzQpO1xyXG5cdFx0dGhpcy5lbGVtZW50LnNldFlSYWRpdXMod2lkdGggLzQpO1xyXG5cdFx0XHJcblx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cdFx0dGhpcy5hZGRJZk1pc3NpbmcoKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgYXQoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBEb3QgIHtcclxuXHRcdHRoaXMueCA9IHg7XHJcblx0XHR0aGlzLnkgPSB5O1xyXG5cdFx0XHJcblx0XHR0aGlzLnVwZGF0ZSgpO1xyXG5cdFx0dGhpcy5hZGRJZk1pc3NpbmcoKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgY29sb3Ioc3Ryb2tlQ29sb3I6IHN0cmluZywgZmlsbENvbG9yOiBzdHJpbmcpOiBEb3Qge1xyXG5cdFx0dGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldFdlaWdodCgxKTtcclxuXHRcdHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRDb2xvcihzdHJva2VDb2xvcik7XHJcblx0XHR0aGlzLmVsZW1lbnQuZ2V0RmlsbCgpLnNldENvbG9yKGZpbGxDb2xvcik7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblx0XHJcblx0cHVibGljIHVwZGF0ZSgpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5zZXRMb2NhdGlvblhZKHRoaXMueCAtIHRoaXMud2lkdGggLyAyLCB0aGlzLnkgLSB0aGlzLmhlaWdodCAvIDIpO1xyXG5cdFx0c3VwZXIudXBkYXRlKCk7XHJcblx0fVxyXG5cdFxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNoYXBlLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiRG90LnRzXCIvPlxyXG4vKipcclxuICogU2hhcGUgdGhhdCBsaW5rcyB0d28gZG90c1xyXG4gKi9cclxuXHJcbmNsYXNzIEJhc2VMaW5rIGV4dGVuZHMgU2hhcGUge1xyXG5cdFxyXG5cdHBhcmVudERvdDogRG90O1xyXG5cdGNoaWxkRG90OiBEb3Q7XHJcblx0XHJcblx0bGluZUNvbG9yOiBzdHJpbmc7XHJcblx0XHJcblx0Y29uc3RydWN0b3IoY2FudmFzOiBhbnksIGVsZW1lbnQ6IGFueSkge1xyXG5cdFx0c3VwZXIoY2FudmFzLCBlbGVtZW50KTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGZyb20oZnJvbTogRG90KTogQmFzZUxpbmsgIHtcclxuXHRcdHRoaXMuZGVwZW5kc09uKGZyb20pO1xyXG5cdFx0dGhpcy5wYXJlbnREb3QgPSBmcm9tO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyB0byh0bzogRG90KTogQmFzZUxpbmsge1xyXG5cdFx0Ly90aGlzLmRlcGVuZHNPbih0byk7XHJcblx0XHR0aGlzLmNoaWxkRG90ID0gdG87XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGNvbG9yKGxpbmVDb2xvcjogc3RyaW5nKTogQmFzZUxpbmsge1xyXG5cdFx0dGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldFdlaWdodCgxKTtcclxuXHRcdHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRDb2xvcihsaW5lQ29sb3IpO1xyXG5cdFx0dGhpcy5saW5lQ29sb3IgPSBsaW5lQ29sb3I7XHJcblx0XHR0aGlzLmFkZElmTWlzc2luZygpO1x0XHRcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJCYXNlTGluay50c1wiLz5cclxuLyoqXHJcbiAqIE5ldyB0eXBlc2NyaXB0IGZpbGVcclxuICovXHJcbmRlY2xhcmUgdmFyIGpzZ2w6IGFueTtcclxuIFxyXG5jbGFzcyBDdXJ2ZSBleHRlbmRzIEJhc2VMaW5rIHtcclxuXHRcclxuXHRwcml2YXRlIGFycm93O1xyXG5cdFxyXG5cdGNvbnN0cnVjdG9yKGNhbnZhczogYW55KSB7XHJcblx0XHRzdXBlcihjYW52YXMsIGNhbnZhcy5jcmVhdGVDdXJ2ZSgpKTtcclxuXHRcdHRoaXMuYXJyb3cgPSB0aGlzLmNhbnZhcy5jcmVhdGVQb2x5Z29uKCk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBhZGRFbGVtZW50cygpIHtcclxuXHRcdHN1cGVyLmFkZEVsZW1lbnRzKCk7XHJcblx0XHRcclxuXHRcdC8vIDJuZCBlbGVtZW50XHJcblx0XHR0aGlzLmNhbnZhcy5hZGRFbGVtZW50KHRoaXMuYXJyb3cpO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgdXBkYXRlKCkge1xyXG5cdFx0dmFyIHg6IG51bWJlciA9IHRoaXMuY2hpbGREb3QueDtcclxuXHRcdHZhciB5OiBudW1iZXIgPSB0aGlzLmNoaWxkRG90Lnk7XHJcblx0XHR2YXIgcGFyZW50WDogbnVtYmVyID0gdGhpcy5wYXJlbnREb3QueDtcclxuXHRcdHZhciBwYXJlbnRZOiBudW1iZXIgPSB0aGlzLnBhcmVudERvdC55O1xyXG5cdFx0dmFyIGNvbG9yOiBzdHJpbmcgPSB0aGlzLmxpbmVDb2xvcjtcclxuXHJcblx0XHR2YXIgZGlyZWN0aW9uID0geCA8IHBhcmVudFggPyAxIDogLTE7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LnNldFN0YXJ0UG9pbnRYWShwYXJlbnRYLCBwYXJlbnRZIC0gdGhpcy5wYXJlbnREb3QuaGVpZ2h0IC8gMilcclxuXHRcdHRoaXMuZWxlbWVudC5zZXRFbmRQb2ludFhZKHgrdGhpcy5jaGlsZERvdC53aWR0aCAvIDIqZGlyZWN0aW9uLCB5KTtcclxuXHRcdHRoaXMuZWxlbWVudC5zZXRDb250cm9sMlBvaW50WFkocGFyZW50WCwgeSk7XHJcblx0XHR0aGlzLmVsZW1lbnQuc2V0Q29udHJvbDFQb2ludFhZKHBhcmVudFgsIHkpO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRXZWlnaHQoMSk7XHJcblx0XHR0aGlzLmVsZW1lbnQuZ2V0U3Ryb2tlKCkuc2V0Q29sb3IoY29sb3IpO1xyXG5cdFx0XHJcblx0XHRcclxuXHRcdHRoaXMuYXJyb3cuZ2V0U3Ryb2tlKCkuc2V0V2VpZ2h0KDApXHJcblx0XHR0aGlzLmFycm93LmdldEZpbGwoKS5zZXRDb2xvcihjb2xvcilcclxuXHRcdFxyXG5cdFx0dGhpcy5hcnJvdy5jbGVhclBvaW50cygpO1xyXG5cdFx0dGhpcy5hcnJvdy5hZGRQb2ludFhZKDAsMCk7XHJcblx0XHR0aGlzLmFycm93LmFkZFBvaW50WFkoNiwtNClcclxuXHRcdHRoaXMuYXJyb3cuYWRkUG9pbnRYWSg2LDQpXHJcblx0XHRcclxuXHRcdC8vIE1vdmVcdFx0XHRcdFx0XHJcblx0XHRmb3IodmFyIGk9MDtpPHRoaXMuYXJyb3cuZ2V0UG9pbnRzQ291bnQoKTsgaSsrKSB7XHJcblx0XHRcdHZhciBweCA9IHRoaXMuYXJyb3cuZ2V0UG9pbnRBdChpKS5YO1xyXG5cdFx0XHR2YXIgcHkgPSB0aGlzLmFycm93LmdldFBvaW50QXQoaSkuWTtcclxuXHRcdFx0Ly90aGlzLmFycm93LnNldFBvaW50WFlBdChweCwgcHkgKyB5LCBpKTtcclxuXHRcdFx0dGhpcy5hcnJvdy5zZXRQb2ludFhZQXQocHgqZGlyZWN0aW9uICsgeCArIHRoaXMuY2hpbGREb3Qud2lkdGggLyAyKmRpcmVjdGlvbiwgcHkgKyB5LCBpKTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiQmFzZUxpbmsudHNcIi8+XHJcbi8qKlxyXG4gKiBOZXcgdHlwZXNjcmlwdCBmaWxlXHJcbiAqL1xyXG5cclxuY2xhc3MgU3RyYWlnaHQgZXh0ZW5kcyBCYXNlTGluayB7XHJcblx0XHJcblx0Y29uc3RydWN0b3IoY2FudmFzOiBhbnkpIHtcclxuXHRcdHN1cGVyKGNhbnZhcywgY2FudmFzLmNyZWF0ZUxpbmUoKSk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyB1cGRhdGUoKSB7XHJcblx0XHRzdXBlci51cGRhdGUoKTtcclxuXHRcdHRoaXMuZWxlbWVudC5zZXRTdGFydFBvaW50WFkodGhpcy5wYXJlbnREb3QueCwgdGhpcy5wYXJlbnREb3QueSAtIHRoaXMucGFyZW50RG90LmhlaWdodCAvIDIpO1xyXG5cdFx0dGhpcy5lbGVtZW50LnNldEVuZFBvaW50WFkodGhpcy5jaGlsZERvdC54LCB0aGlzLmNoaWxkRG90LnkgKyB0aGlzLmNoaWxkRG90LmhlaWdodCAvIDIpO1xyXG5cdH1cclxuXHRcclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJTaGFwZS50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkRvdC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlN0cmFpZ2h0LnRzXCIvPlxyXG4vKipcclxuICogTmV3IHR5cGVzY3JpcHQgZmlsZVxyXG4gKi9cclxuZGVjbGFyZSB2YXIganNnbDogYW55O1xyXG5cclxuY2xhc3MgQ3JlYXRpb24gZXh0ZW5kcyBCYXNlTGluayB7XHJcblx0XHJcblx0c2Vjb25kTGluZTtcclxuXHRcclxuXHRjb25zdHJ1Y3RvcihjYW52YXM6IGFueSkge1xyXG5cdFx0c3VwZXIoY2FudmFzLCBjYW52YXMuY3JlYXRlTGluZSgpKTtcclxuXHRcdHRoaXMuc2Vjb25kTGluZSA9IGNhbnZhcy5jcmVhdGVMaW5lKCk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBhZGRFbGVtZW50cygpIHtcclxuXHRcdHN1cGVyLmFkZEVsZW1lbnRzKCk7XHJcblx0XHRcclxuXHRcdC8vIDJuZCBlbGVtZW50XHJcblx0XHR0aGlzLmNhbnZhcy5hZGRFbGVtZW50KHRoaXMuc2Vjb25kTGluZSk7IC8vIFRPRDogYWRkIGxhdGVyP1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgdXBkYXRlKCkge1xyXG5cdFx0c3VwZXIudXBkYXRlKCk7XHJcblx0XHRcclxuXHRcdC8vIEhvcml6b250YWwgZG90dGVkIGxpbmVcclxuXHRcdGlmKHRoaXMucGFyZW50RG90LnggPCB0aGlzLmNoaWxkRG90LngpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnNldFN0YXJ0UG9pbnRYWSh0aGlzLnBhcmVudERvdC54ICsgdGhpcy5wYXJlbnREb3Qud2lkdGggLyAyLCB0aGlzLnBhcmVudERvdC55KVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnNldFN0YXJ0UG9pbnRYWSh0aGlzLnBhcmVudERvdC54IC0gdGhpcy5wYXJlbnREb3Qud2lkdGggLyAyLCB0aGlzLnBhcmVudERvdC55KVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHR0aGlzLmVsZW1lbnQuc2V0RW5kUG9pbnRYWSh0aGlzLmNoaWxkRG90LngsIHRoaXMucGFyZW50RG90LnkpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmdldFN0cm9rZSgpLnNldFdlaWdodCgxKTtcclxuXHRcdHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXREYXNoU3R5bGUoanNnbC5EYXNoU3R5bGVzLkRBU0gpOyBcclxuXHRcdHRoaXMuZWxlbWVudC5nZXRTdHJva2UoKS5zZXRDb2xvcih0aGlzLmxpbmVDb2xvcik7XHJcblx0XHRcclxuXHRcdC8vIFZlcnRpY2FsIGxpbmVcclxuXHRcdHRoaXMuc2Vjb25kTGluZS5zZXRTdGFydFBvaW50WFkodGhpcy5jaGlsZERvdC54LCB0aGlzLnBhcmVudERvdC55KVxyXG5cdFx0dGhpcy5zZWNvbmRMaW5lLnNldEVuZFBvaW50WFkodGhpcy5jaGlsZERvdC54LCB0aGlzLmNoaWxkRG90LnkgKyB0aGlzLmNoaWxkRG90LmhlaWdodCAvIDIpO1xyXG5cdFx0dGhpcy5zZWNvbmRMaW5lLmdldFN0cm9rZSgpLnNldFdlaWdodCgxKVxyXG5cdFx0dGhpcy5zZWNvbmRMaW5lLmdldFN0cm9rZSgpLnNldENvbG9yKHRoaXMubGluZUNvbG9yKTtcclxuXHR9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29uZmlnLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQ29tbWl0LnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicmVuZGVyaW5nL0N1cnZlLnRzXCIvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwicmVuZGVyaW5nL0RvdC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInJlbmRlcmluZy9TdHJhaWdodC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cInJlbmRlcmluZy9DcmVhdGlvbi50c1wiLz5cclxuLyoqXHJcbiAqIFZpZXcgb2YgdGhlIENvbW1pdFxyXG4gKi9cclxuIFxyXG4gY2xhc3MgQ29tbWl0VmlldyB7XHJcbiBcdFxyXG4gXHRwdWJsaWMgY29tbWl0IDogQ29tbWl0O1xyXG4gXHRwdWJsaWMgbGFiZWwgOiBIVE1MRWxlbWVudDtcclxuIFx0cHVibGljIGNhbnZhczogYW55OyAvLyBqc2dsXHJcbiBcdHB1YmxpYyBjb25maWcgOiBHaXRsaW5lQ29uZmlnO1xyXG5cclxuIFx0cHVibGljIGRvdCA6IERvdDtcclxuIFx0cHVibGljIGxpbmVzIDogU2hhcGVbXSA9IFtdO1xyXG4gXHRcclxuIFx0Y29uc3RydWN0b3IoY2FudmFzLCBjb25maWc6IEdpdGxpbmVDb25maWcsIGNvbW1pdDogQ29tbWl0KSB7XHJcbiBcdFx0dGhpcy5jYW52YXMgPSBjYW52YXM7XHJcbiBcdFx0dGhpcy5jb25maWcgPSBjb25maWc7XHJcbiBcdFx0dGhpcy5jb21taXQgPSBjb21taXQ7XHJcbiBcdFx0XHJcbiBcdFx0dGhpcy5kb3QgPSBuZXcgRG90KHRoaXMuY2FudmFzKTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGFkZFJlbGF0aW9ucygpIHtcclxuXHJcblx0XHQvLyBEaXJlY3QgcGFyZW50XHJcblx0XHRpZih0aGlzLmNvbW1pdC5kaXJlY3RwYXJlbnQgIT0gbnVsbCkge1xyXG5cdFx0XHR2YXIgZHBsIDogU2hhcGU7XHJcblx0XHRcdGlmKHRoaXMuY29tbWl0LmdldExhbmUoKSA9PSB0aGlzLmNvbW1pdC5kaXJlY3RwYXJlbnQuZ2V0TGFuZSgpIHx8IHRoaXMuY29tbWl0LmRpcmVjdHBhcmVudC5vdXRPZlNjb3BlKSB7ICBcclxuXHRcdFx0XHQvLyBkaXJlY3QgcGFyZW50IGlzIHRoZSBzYW1lIFgvbGFuZSwgdGhpcyBtZWFucyBpdCBpcyBhIHN0YW5kYXJkIGZvcndhcmQgY29tbWl0IFxyXG5cdFx0XHRcdGRwbCA9IG5ldyBTdHJhaWdodCh0aGlzLmNhbnZhcykuZnJvbSh0aGlzLmNvbW1pdC5kaXJlY3RwYXJlbnQudmlldy5kb3QpLnRvKHRoaXMuZG90KS5jb2xvcih0aGlzLmNvbW1pdC5nZXRDb2xvcigyMCkpO1xyXG5cdFx0XHR9IGVsc2UgeyBcclxuXHRcdFx0XHQvLyBkaXJlY3QgcGFyZW50IGlzIG9uIGEgZGlmZmVyZW50IGxhbmUsIHRoaXMgaXMgbW9zdCBjZXJ0YWlubHkgYSBuZXcgYnJhbmNoIFxyXG5cdFx0XHRcdGRwbCA9IG5ldyBDcmVhdGlvbih0aGlzLmNhbnZhcykuZnJvbSh0aGlzLmNvbW1pdC5kaXJlY3RwYXJlbnQudmlldy5kb3QpLnRvKHRoaXMuZG90KS5jb2xvcih0aGlzLmNvbW1pdC5nZXRDb2xvcigzMCkpO1xyXG5cdFx0XHR9IFxyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5saW5lcy5wdXNoKGRwbCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdHZhciBhbGxtZXJnZXMgPSB0aGlzLmNvbW1pdC5tZXJnZXMuc3RhbmRhcmQuY29uY2F0KHRoaXMuY29tbWl0Lm1lcmdlcy5hbm9ueW1vdXMpO1xyXG5cdFx0YWxsbWVyZ2VzLmZvckVhY2gobWVyZ2UgPT4ge1xyXG5cdFx0XHR0aGlzLmxpbmVzLnB1c2goXHJcblx0XHRcdFx0bmV3IEN1cnZlKHRoaXMuY2FudmFzKVxyXG5cdFx0XHRcdC5mcm9tKG1lcmdlLnNvdXJjZS52aWV3LmRvdClcclxuXHRcdFx0XHQudG8odGhpcy5kb3QpXHJcblx0XHRcdFx0LmNvbG9yKG1lcmdlLnNvdXJjZS5nZXRDb2xvcigzNSkpKVxyXG5cdFx0XHRcdDtcdFx0XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG4gXHQvKiogY2FsY3VsYXRlIHRoZSBwb3NpdGlvbnMgYmFzZWQgb24gbW9kZWwgYW5kIHVwZGF0ZSB0aGUgc2hhcGVzICovXHJcbiBcdHB1YmxpYyByZWRyYXcoKSB7XHJcbiBcdFx0dGhpcy5kb3RcclxuIFx0XHRcdC5hdCh0aGlzLmNvbW1pdC5nZXRYKCksIHRoaXMuY29tbWl0LmdldFkoKSlcclxuIFx0XHRcdC5zaXplKHRoaXMuY29uZmlnLmRvdFdpZHRoLCB0aGlzLmNvbmZpZy5kb3RIZWlnaHQpXHJcbiBcdFx0XHQuY29sb3IodGhpcy5jb21taXQuZ2V0Q29sb3IoMjApLCB0aGlzLmNvbW1pdC5nZXRDb2xvcig4MCkpO1xyXG4gXHR9XHJcbiBcdFxyXG5cdCBcclxuIH1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkJyYW5jaC50c1wiLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkdpdGxpbmUudHNcIi8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21taXRWaWV3LnRzXCIvPlxyXG5cclxuLyoqIGNvbW1pdHRlciBvciBhdXRob3IgKi9cclxuY2xhc3MgSWRlbnRpdHkge1xyXG5cdHB1YmxpYyBpbWFnZTogc3RyaW5nOyAvLyBvcHRpb25hbFxyXG5cdFxyXG5cdHB1YmxpYyBjb25zdHJ1Y3RvciAocHVibGljIG5hbWU6IHN0cmluZywgcHVibGljIGVtYWlsOiBzdHJpbmcsIHB1YmxpYyBkYXRlOm51bWJlcikge1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgQ29tbWl0IHtcclxuXHRwcml2YXRlIGNvbnRhaW5lcjogR2l0bGluZTtcclxuXHJcblx0cHJpdmF0ZSB3YXJuaW5nczogYW55W10gPSBbXTtcclxuXHRwcml2YXRlIGluSGVhZHNSZWY6IENvbW1pdFtdID0gW107XHJcblx0cHJpdmF0ZSBwYXJlbnRzOiBDb21taXRbXSA9IFtdO1xyXG5cdHByaXZhdGUgY2hpbGRzOiBDb21taXRbXSA9IFtdO1xyXG5cdHByaXZhdGUgc2libGluZ3M6IENvbW1pdFtdID0gW107XHJcblx0cHVibGljIG91dE9mU2NvcGU6IGJvb2xlYW4gPSBmYWxzZTsgLy8gVGhpcyBjb21taXQgd2FzIG5vdCBwYXJ0IG9mIHRoZSBsb2dzIHNjb3BlLCBidXQgaXMgcmVmZXJlbmNlZCBieSBhbm90aGVyIGNvbW1pdC5cclxuXHRwdWJsaWMgbWVyZ2VzID0geyBzdGFuZGFyZDogW10sIGFub255bW91czogW119O1xyXG5cdHByaXZhdGUgc2hhOiBzdHJpbmc7XHJcblx0cHJpdmF0ZSBzc2hhOiBzdHJpbmc7IC8vIEFiYnJldmlhdGVkIGhhc2hcclxuXHRwdWJsaWMgc3ViamVjdDogc3RyaW5nO1xyXG5cdHByaXZhdGUgZGF0YTogYW55O1xyXG5cdHByaXZhdGUgaW5kZXhZOiBudW1iZXI7XHJcblxyXG5cdHByaXZhdGUgbWF4U3BlY2lmaXR5OiBudW1iZXI7XHJcblx0cHVibGljIGJyYW5jaDogQnJhbmNoO1xyXG5cdHB1YmxpYyBkaXJlY3RwYXJlbnQ6IENvbW1pdDtcclxuXHRwdWJsaWMgZGlyZWN0Y2hpbGQ6IENvbW1pdDtcclxuXHRcclxuXHRwdWJsaWMgdmlldyA6IENvbW1pdFZpZXc7XHJcblx0XHJcblx0cHVibGljIGNvbW1pdHRlcjogSWRlbnRpdHk7XHJcblx0cHVibGljIGF1dGhvcjogSWRlbnRpdHk7XHJcblx0XHJcblx0Y29uc3RydWN0b3IoY29udGFpbmVyOiBHaXRsaW5lLCBkYXRhKSB7XHJcblx0XHR0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuXHRcdHRoaXMuZGF0YSA9IGRhdGE7XHJcblx0XHRcclxuXHRcdC8vIHJlZmVyZW5jZSB0aGUgZGF0YSBiYWNrIHRvIHRoZSBvYmplY3RcclxuXHRcdHRoaXMuZGF0YS5vYmogPSB0aGlzO1xyXG5cdFx0XHJcblx0XHRpZihkYXRhLmluSGVhZHMgPT0gbnVsbCkgZGF0YS5pbkhlYWRzID0gW107XHJcblx0XHRpZihkYXRhLnBhcmVudGhhc2hlcyA9PSBudWxsKSBkYXRhLnBhcmVudGhhc2hlcyA9IFtdO1xyXG5cdFx0aWYoZGF0YS5yZWZuYW1lcyA9PSBudWxsKSBkYXRhLnJlZm5hbWVzID0gW107XHJcblx0XHJcblx0XHR0aGlzLnNoYSA9IGRhdGEuc2hhO1xyXG5cdFx0dGhpcy5zc2hhID0gZGF0YS5zc2hhO1xyXG5cdFx0dGhpcy5zdWJqZWN0ID0gZGF0YS5zdWJqZWN0O1xyXG5cdFx0dGhpcy5pbmRleFkgPSBjb250YWluZXIubWF4SW5kZXhZICsrO1xyXG5cdFx0XHJcblx0XHR0aGlzLmNvbW1pdHRlciA9IG5ldyBJZGVudGl0eSh0aGlzLmRhdGEuY29tbWl0dGVybmFtZSwgdGhpcy5kYXRhLmNvbW1pdHRlcmVtYWlsLCBuZXcgRGF0ZSh0aGlzLmRhdGEuY29tbWl0dGVyZGF0ZSkuZ2V0VGltZSgpKTtcclxuXHRcdHRoaXMuYXV0aG9yID0gbmV3IElkZW50aXR5KHRoaXMuZGF0YS5hdXRob3JuYW1lLCB0aGlzLmRhdGEuYXV0aG9yZW1haWwsIG5ldyBEYXRlKHRoaXMuZGF0YS5hdXRob3JkYXRlKS5nZXRUaW1lKCkpO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZ2V0U2hvcnRTaGEoKSA6IHN0cmluZyB7XHJcblx0XHRyZXR1cm4gdGhpcy5zc2hhO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgZ2V0RnVsbFNoYSgpIDogc3RyaW5nIHtcclxuXHRcdHJldHVybiB0aGlzLnNoYTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGluaXRSZWxhdGlvbnMoKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcclxuXHRcdHRoaXMuZGF0YS5wYXJlbnRoYXNoZXMuZm9yRWFjaCggaGFzaCA9PiB7XHJcblx0XHRcdHZhciBwYXJlbnRDb21taXQgPSB0aGlzLmNvbnRhaW5lci5jb21taXRzW2hhc2hdO1xyXG5cclxuXHRcdFx0Ly8gQ3JlYXRlIGEgdmlydHVhbCBjb21taXRcclxuXHRcdFx0aWYocGFyZW50Q29tbWl0ID09IG51bGwpIHtcclxuXHRcdFx0XHRwYXJlbnRDb21taXQgPSBuZXcgQ29tbWl0KHRoaXMuY29udGFpbmVyLCAge3NoYTogaGFzaCtNYXRoLnJhbmRvbSgpfSk7XHJcblx0XHRcdFx0cGFyZW50Q29tbWl0Lm91dE9mU2NvcGUgPSB0cnVlO1xyXG5cdFx0XHRcdHNlbGYuY29udGFpbmVyLmFkZENvbW1pdChwYXJlbnRDb21taXQpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLnBhcmVudHMucHVzaChwYXJlbnRDb21taXQpO1xyXG5cdFx0XHRwYXJlbnRDb21taXQuY2hpbGRzLnB1c2godGhpcyk7XHJcblx0XHRcdHRoaXMuc2libGluZ3MgPSBwYXJlbnRDb21taXQuY2hpbGRzOyAvLyB0aGlzIHdpbGwgYmUgb3ZlcndpdHRlbiBhcyBuZXcgY2hpbGRzIGFyZSBmb3VuZFxyXG5cdFx0XHRcclxuXHRcdFx0aWYodGhpcy5wYXJlbnRzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHR2YXIgZHAgPSB0aGlzLnBhcmVudHNbMF07XHJcblx0XHRcdFx0dGhpcy5kaXJlY3RwYXJlbnQgPSBkcDtcclxuXHRcdFx0XHRkcC5kaXJlY3RjaGlsZCA9IHRoaXM7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHR0aGlzLmRhdGEuaW5IZWFkcy5mb3JFYWNoKGhlYWRzaGEgPT4ge1xyXG5cdFx0XHR2YXIgY29tbWl0ID0gdGhpcy5jb250YWluZXIuY29tbWl0c1toZWFkc2hhXTtcclxuXHRcdFx0aWYodGhpcy5pbkhlYWRzUmVmLmluZGV4T2YoY29tbWl0KSA9PT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0dGhpcy5pbkhlYWRzUmVmLnB1c2goY29tbWl0KVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgaW5pdERlZmF1bHRCcmFuY2goKSB7XHJcblx0XHR2YXIgY29tbWl0OiBDb21taXQgPSB0aGlzO1xyXG5cdFx0XHRcclxuXHRcdHdoaWxlKGNvbW1pdCAhPSBudWxsKSB7XHJcblx0XHRcdFx0XHJcblx0XHRcdC8vIEdVRVNTSU5HOiBUaGUgY29ycmVjdCBicmFuY2ggaXMgdXN1YWxseSB0aGUgb25lIHdpdGggdGhlIGxlYXN0IHNwZWNpZmljIG5hbWVcclxuXHRcdFx0aWYoY29tbWl0LmJyYW5jaCA9PSBudWxsIHx8IGNvbW1pdC5icmFuY2guc3BlY2lmaXR5ID4gdGhpcy5icmFuY2guc3BlY2lmaXR5KSB7XHJcblx0XHRcdFx0Y29tbWl0LmJyYW5jaCA9IHRoaXMuYnJhbmNoO1xyXG5cdFx0XHRcdC8vY29tbWl0LmRlYnVnKFwiYXNzaWduaW5nIFwiK3RoaXMuYnJhbmNoLnJlZilcclxuXHRcdFx0fVxyXG5cdFx0XHRjb21taXQuYnJhbmNoLnN0YXJ0ID0gY29tbWl0OyAvLyB0aGlzIGZ1bmN0aW9uIHdpbGwgdHJhdmVyc2UgdGhlIHBhcmVudHMsIHNvIHRoZSBsYXN0IG9uZSB3aWxsIGJlIHRoZSBmaXJzdCBjb21taXRcclxuXHRcdFx0Y29tbWl0LmJyYW5jaC5vcmlnaW4gPSBjb21taXQuZGlyZWN0cGFyZW50OyAvLyB0aGlzIGNvdWxkIGJlIG51bGwgLT4gaXQgaXMgb3V0c2lkZSBvZiB0aGUgaGlzdG9yeS5cclxuXHRcdFx0Y29tbWl0ID0gY29tbWl0LmRpcmVjdHBhcmVudDtcclxuXHRcdH1cclxuXHR9XHJcblx0cHVibGljIGluaXRIZWFkU3BlY2lmaXR5KCkge1xyXG5cdFx0Zm9yICh2YXIgaT0wOyBpPHRoaXMuZGF0YS5yZWZuYW1lcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgcmVmbmFtZSA9IHRoaXMuZGF0YS5yZWZuYW1lc1tpXTtcclxuXHRcclxuXHRcdFx0aWYoIXRoaXMuY29udGFpbmVyLmNvbmZpZy5yZW1vdGVPbmx5IHx8IHJlZm5hbWUuaW5kZXhPZihcIm9yaWdpbi9cIikgPT0gMCkge1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmKHRoaXMuY29udGFpbmVyLmNvbmZpZy5yZW1vdGVPbmx5KSB7XHJcblx0XHRcdFx0XHRyZWZuYW1lID0gcmVmbmFtZS5yZXBsYWNlKC9eb3JpZ2luLi8sICcnKTtcdFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHR2YXIgc3BlY2lmaXR5ID0gcmVmbmFtZS5yZXBsYWNlKC9bXlxcLy1dL2csICcnKS5sZW5ndGgqMTAwMDtcclxuXHRcdFx0XHRzcGVjaWZpdHkgKz0gcmVmbmFtZS5yZXBsYWNlKC9bXmEtekEtWjAtOS1dLywgJycpLmxlbmd0aDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLmNvbnRhaW5lci5hZGRCcmFuY2gocmVmbmFtZSwgdGhpcywgc3BlY2lmaXR5KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvKiBhc3NpZ24gdGhlIG1vc3Qgc3BlY2lmaWMgaGVhZCBvbiB0aGlzIHRpcCBjb21taXQgKi9cclxuXHRcdFx0XHRpZiAodGhpcy5tYXhTcGVjaWZpdHkgPT0gbnVsbCB8fCBzcGVjaWZpdHkgPCB0aGlzLm1heFNwZWNpZml0eSkge1xyXG5cdFx0XHRcdFx0TG9nZ2VyLmRlYnVnKFwiYXNzaWduaW5nIGJyYW5jaFwiLCByZWZuYW1lLCB0aGlzLnNoYSwgdGhpcy5tYXhTcGVjaWZpdHksIHNwZWNpZml0eSlcclxuXHRcdFx0XHRcdHRoaXMubWF4U3BlY2lmaXR5ID0gc3BlY2lmaXR5O1xyXG5cdFx0XHRcdFx0dGhpcy5icmFuY2ggPSB0aGlzLmNvbnRhaW5lci5oZWFkc01hcFtyZWZuYW1lXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLmluaXREZWZhdWx0QnJhbmNoKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cHVibGljIGluaXRNZXJnZXMoKSB7XHJcblxyXG5cdFx0dGhpcy5tZXJnZXMgPSB7IHN0YW5kYXJkOiBbXSwgYW5vbnltb3VzOiBbXX07XHJcblx0XHR0aGlzLndhcm5pbmdzID0gW107XHJcblx0XHRcclxuXHRcdC8vIERldGVjdCBhIG1lcmdlIChvY3RvcHVzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkKVxyXG5cclxuXHRcdGlmKHRoaXMucGFyZW50cy5sZW5ndGggPT0gMSkge1xyXG5cdFx0XHR2YXIgZHAgPSB0aGlzLnBhcmVudHNbMF07XHJcblx0XHRcdHRoaXMuZGlyZWN0cGFyZW50ID0gZHA7XHJcblx0XHRcdGRwLmRpcmVjdGNoaWxkID0gdGhpcztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYodGhpcy5wYXJlbnRzLmxlbmd0aCA+PSAyKSB7XHJcblx0XHRcdHZhciBkcCA9IHRoaXMucGFyZW50c1swXTtcclxuXHRcdFx0dGhpcy5kaXJlY3RwYXJlbnQgPSBkcDtcclxuXHRcdFx0ZHAuZGlyZWN0Y2hpbGQgPSB0aGlzO1xyXG5cclxuXHRcdFx0Zm9yKHZhciBpID0gMSA7IGk8dGhpcy5wYXJlbnRzLmxlbmd0aCA7IGkrKykge1x0XHRcdFxyXG5cdFx0XHR2YXIgbXAgPSB0aGlzLnBhcmVudHNbaV07XHJcblx0XHJcblx0XHRcdFx0aWYobXAgIT0gbnVsbCkge1xyXG5cdFxyXG5cdFx0XHRcdFx0Ly8gQ2x1ZXMgaWYgdGhpcyBpcyBhIHN0YW5kYXJkIG9yIGFub255bW91cyBtZXJnZVxyXG5cdFx0XHRcdFx0aWYobXAuZGF0YS5yZWZuYW1lcy5sZW5ndGggPiAwIC8vIFRoaXMgaXMgc3RhbmRhcmQgbWVyZ2Ugd2l0aCBtcHMgaGVhZFxyXG5cdFx0XHRcdFx0XHR8fCBtcC5pbkhlYWRzUmVmLmxlbmd0aCAhPSBkcC5pbkhlYWRzUmVmLmxlbmd0aCAvLyBUaGUgaGVhZHMgb2YgYm90aCBhcmUgZGlmZmVyZW50XHJcblx0XHRcdFx0XHQpIHtcclxuXHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdHRoaXMubWVyZ2VzLnN0YW5kYXJkLnB1c2goe3NvdXJjZTogbXB9KTtcclxuXHRcdFx0XHRcdH0gZWxzZSAge1xyXG5cdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgYW5vbnltb3VzIChhdXRvbWF0aWMpIG1lcmdlIG9uIHRoZSBzYW1lIGJyYW5jaFxyXG5cdFx0XHRcdFx0XHR0aGlzLm1lcmdlcy5hbm9ueW1vdXMucHVzaCh7c291cmNlOiBtcH0pXHJcblx0XHRcdFx0XHRcdHRoaXMuaW5pdEFub255bW91cygpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgaW5pdEFub255bW91cygpIHtcclxuXHRcdC8vIENyZWF0ZSBhIGR1bW15IGJyYW5jaCBmb3IgYW5vbnltb3VzIG1lcmdlcywgd2hpY2ggaXMgYXMgc3BlY2lmaWMgYXMgdGhlIG9yaWdpbmFsIGJyYW5jaC4gXHJcblx0XHQvLyB0cnkgZmluZGluZyB0aGUgb3JpZ2luYWwgYnJhbmNoIGJ5IGdvaW5nIHVwIGRpcmVjdCBjaGlsZHMsIHdoaWNoIHdpbGwgZ2V0IHRoZSBvcmlnaW5hbFxyXG5cdFx0XHJcblx0XHR2YXIgc2VsZjogQ29tbWl0ID0gdGhpcztcclxuXHRcdHRoaXMubWVyZ2VzLmFub255bW91cy5mb3JFYWNoKF9tZXJnZSA9PiB7XHJcblx0XHRcdHZhciBtZXJnZTogQ29tbWl0ID0gX21lcmdlLnNvdXJjZVxyXG5cdFx0XHR2YXIgY2hpbGQgPSB0aGlzO1xyXG5cdFx0XHRcclxuXHRcdFx0d2hpbGUoY2hpbGQgIT0gbnVsbCAmJiBjaGlsZC5icmFuY2ggPT0gbnVsbCkge1xyXG5cdFx0XHRcdGNoaWxkID0gY2hpbGQuZGlyZWN0Y2hpbGQ7XHJcblx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0LyogdGhpcyBpcyBvbmx5IGFuIGFub255bW91cyBicmFuY2ggaGVhZCwgaWYgdGhlcmUgaXMgb25seSBvbmUgY2hpbGQgKHRoZSBtZXJnZSkgXHJcblx0XHRcdCAgIFRPRE86IGlmIHRoZXJlIGFyZSBtdWx0aXBsZSwgaXQgbWlnaHQgcmVzdWx0IGluIHdyb25nbHkgYXNzaWduZWQgYnJhbmNoZXMgKi8gXHJcblx0XHRcdGlmKGNoaWxkICE9IG51bGwgJiYgbWVyZ2UuYnJhbmNoID09IG51bGwpIHtcclxuXHRcdFx0XHRtZXJnZS5icmFuY2ggPSBuZXcgQnJhbmNoKGNoaWxkLmJyYW5jaC5yZWYrXCIvYW5vbnltb3VzXCIrbWVyZ2Uuc2hhK01hdGgucmFuZG9tKCksIG1lcmdlLCBjaGlsZC5icmFuY2guc3BlY2lmaXR5KzEpO1xyXG5cdFx0XHRcdG1lcmdlLmJyYW5jaC5hbm9ueW1vdXMgPSB0cnVlO1xyXG5cdFx0XHRcdG1lcmdlLmJyYW5jaC5wYXJlbnQgPSBjaGlsZC5icmFuY2g7XHJcblx0XHRcdFx0bWVyZ2UuYnJhbmNoLnN0YXJ0ID1jaGlsZDtcclxuXHRcdFx0XHRtZXJnZS5icmFuY2guY2F0ZWdvcnkgPSBjaGlsZC5icmFuY2guY2F0ZWdvcnk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dGhpcy5jb250YWluZXIuaGVhZHNNYXBbbWVyZ2UuYnJhbmNoLnJlZl0gPSBtZXJnZS5icmFuY2g7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGdldENvbG9yKGxpZ2h0bmVzczogbnVtYmVyKTogc3RyaW5nIHtcclxuXHRcdGlmKHRoaXMuYnJhbmNoID09IG51bGwpIHtcclxuXHRcdFx0dGhpcy53YXJuKFwiTm8gQnJhbmNoIHNldFwiKVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dmFyIGIgPSB0aGlzLmJyYW5jaDtcclxuXHRcdFx0aWYodGhpcy5icmFuY2guYW5vbnltb3VzKSB7XHJcblx0XHRcdFx0YiA9IHRoaXMuYnJhbmNoLnBhcmVudDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0dmFyIGh1ZSA9IGIubGFuZSAqIDMwMC90aGlzLmNvbnRhaW5lci5tYXhYO1xyXG5cdFx0XHRyZXR1cm4gXCJoc2woXCIraHVlK1wiLCAxMDAlLCBcIitsaWdodG5lc3MrXCIlKVwiO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgaGFzTWVyZ2VzKCk6IGJvb2xlYW4ge1xyXG5cdFx0cmV0dXJuIHRoaXMubWVyZ2VzLnN0YW5kYXJkLmxlbmd0aCA+IDAgfHwgdGhpcy5tZXJnZXMuYW5vbnltb3VzLmxlbmd0aCA+IDA7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBnZXRYKCkge1xyXG5cdFx0cmV0dXJuIGluZGV4VG9YKHRoaXMuZ2V0TGFuZSgpKTsgXHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBnZXRZKCkge1xyXG5cdFx0aWYodGhpcy5vdXRPZlNjb3BlKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmNvbnRhaW5lci5yb290TGFiZWwub2Zmc2V0VG9wICsgMjA7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdGhpcy52aWV3LmxhYmVsLm9mZnNldFRvcCAtIHRoaXMuY29udGFpbmVyLmZpcnN0Q29tbWl0LnZpZXcubGFiZWwub2Zmc2V0VG9wICsgdGhpcy52aWV3LmxhYmVsLm9mZnNldEhlaWdodCAvMjtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGdldE9yaWdpbkluZGV4WSgpOiBudW1iZXIge1xyXG5cdFx0aWYodGhpcy5icmFuY2gub3JpZ2luICE9IHVuZGVmaW5lZCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5icmFuY2gub3JpZ2luLmdldEluZGV4WSgpO1xyXG5cdFx0fSBlbHNlIGlmKHRoaXMuYnJhbmNoLnN0YXJ0Lm91dE9mU2NvcGUpe1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5jb250YWluZXIubWF4SW5kZXhZO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuYnJhbmNoLnN0YXJ0LmluZGV4WTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0cHVibGljIGludGVyc2VjdHMob3RoZXI6IENvbW1pdCk6IGJvb2xlYW4ge1xyXG5cdFx0dmFyIG90aGVyWT05OTk5OTk5LCB0aGlzWT05OTk5OTk7XHJcblx0XHRpZih0aGlzLm91dE9mU2NvcGUgfHwgb3RoZXIub3V0T2ZTY29wZSkgcmV0dXJuIHRydWU7XHJcblx0XHRcclxuXHRcdGlmKG90aGVyLmRpcmVjdGNoaWxkICE9IG51bGwpIHtcclxuXHRcdFx0b3RoZXJZID0gb3RoZXIuZGlyZWN0Y2hpbGQuaW5kZXhZO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZih0aGlzLmRpcmVjdGNoaWxkICE9IG51bGwpIHtcclxuXHRcdFx0dGhpc1kgPSB0aGlzLmRpcmVjdGNoaWxkLmluZGV4WTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0cmV0dXJuIHRoaXMuZ2V0T3JpZ2luSW5kZXhZKCkgPj0gTWF0aC5taW4ob3RoZXIuaW5kZXhZLCBvdGhlclkpICYmIE1hdGgubWluKHRoaXNZLCB0aGlzLmluZGV4WSkgPD0gb3RoZXIuZ2V0T3JpZ2luSW5kZXhZKCk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBnZXRJbmRleCgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMuZGF0YS5pbmRleDtcclxuXHR9XHJcblx0XHJcblx0cHVibGljIGdldEluZGV4WSgpOiBudW1iZXIge1xyXG5cdFx0cmV0dXJuIHRoaXMuaW5kZXhZO1xyXG5cdH1cclxuXHRcclxuXHRwdWJsaWMgd2Fybih3YXJuaW5nOiBzdHJpbmcpIHtcclxuXHRcdHRoaXMud2FybmluZ3MucHVzaCh3YXJuaW5nKTtcclxuXHRcdHRoaXMuZGVidWcod2FybmluZyk7XHJcblx0fVxyXG5cdFxyXG5cdHB1YmxpYyBkZWJ1Zyh3YXJuaW5nOiBzdHJpbmcpIHtcclxuXHRcdGlmKGNvbnNvbGUpIHtcclxuXHRcdFx0TG9nZ2VyLmRlYnVnKHdhcm5pbmcsIHRoaXMpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcdFxyXG5cdHB1YmxpYyBnZXRMYW5lKCkge1xyXG5cdFx0aWYodGhpcy5icmFuY2ggIT0gbnVsbCkgeyAvLyBUT0RPOiBhbm9ueW1vdXMgYnJhbmNoZXMgd2lsbCBnZXQgdGhlaXIgaW5kZXggZnJvbSBwYXJlbnQgb25lc1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5icmFuY2guY29tbWl0LmJyYW5jaC5sYW5lO1xyXG5cdFx0fVx0XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblx0XHJcblxyXG5cdFxyXG59XHJcblx0XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb21taXQudHNcIi8+XHJcblxyXG5jbGFzcyBCcmFuY2gge1xyXG5cdHB1YmxpYyBzcGVjaWZpdHk6IG51bWJlcjtcclxuXHRwdWJsaWMgc3RhcnQ6IENvbW1pdDtcclxuXHRwdWJsaWMgb3JpZ2luOiBDb21taXQ7XHJcblx0cHVibGljIGNhdGVnb3J5OiBzdHJpbmc7XHJcblx0cHVibGljIGNvbW1pdDogQ29tbWl0OyAvLyBIZWFkIGNvbW1pdFxyXG5cdHB1YmxpYyByZWY6IHN0cmluZzsgLy8gTmFtZSBvZiB0aGUgYnJhbmNoXHJcblx0cHVibGljIHNob3J0bmFtZTogc3RyaW5nIC8vIG5hbWUgd2l0aG91dCByZXBvIFxyXG5cdHB1YmxpYyBsYW5lOiBudW1iZXI7XHJcblx0cHVibGljIHBhcmVudDogQnJhbmNoO1xyXG5cdHB1YmxpYyBhbm9ueW1vdXM6IGJvb2xlYW47XHJcblx0XHJcblxyXG5cdGNvbnN0cnVjdG9yKHJlZm5hbWU6IHN0cmluZywgY29tbWl0OiBDb21taXQsIHNwZWNpZml0eTogbnVtYmVyKSB7XHJcblx0XHR0aGlzLnJlZiA9IHJlZm5hbWU7XHJcblx0XHR0aGlzLmNvbW1pdCA9IGNvbW1pdDtcclxuXHRcdHRoaXMuc3BlY2lmaXR5ID0gc3BlY2lmaXR5O1xyXG5cdFx0dGhpcy5zaG9ydG5hbWUgPSByZWZuYW1lLnNwbGl0KFwiQFwiKVswXTtcclxuXHRcdHRoaXMuY2F0ZWdvcnkgPSB0aGlzLnNob3J0bmFtZS5zdWJzdHJpbmcoMCwgdGhpcy5zaG9ydG5hbWUubGFzdEluZGV4T2YoXCIvXCIpKTtcclxuXHR9XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
