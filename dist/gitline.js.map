{"version":3,"sources":["AsyncLoader.ts","Config.ts","CommitProvider.ts","Expandable.ts","plugins/LocalGit2JsonProvider.ts","plugins/GithubCommitProvider.ts","Main.ts","rendering/Shape.ts","rendering/BaseLink.ts","rendering/Curve.ts","rendering/Straight.ts","rendering/Creation.ts","rendering/Dot.ts","CommitView.ts","Commit.ts","Branch.ts"],"names":["Gitline","Gitline.AsyncLoadingItem","Gitline.AsyncLoadingItem.constructor","Gitline.AsyncLoader","Gitline.AsyncLoader.constructor","Gitline.AsyncLoader.then","Gitline.AsyncLoader.thenSingle","Gitline.AsyncLoader.start","Gitline.AsyncLoader.next","Gitline.AsyncLoader.suspend","Gitline.AsyncLoader.resume","Gitline.AsyncLoader.showStatus","Gitline.AsyncLoader.execute","Gitline.AsyncLoader.error","Gitline.indexToX","Gitline.Config","Gitline.Config.constructor","Gitline.Config.avatar_gravatar","Gitline.CommitProvider","Gitline.CommitProvider.constructor","Gitline.CommitProvider.whenDone","Gitline.CommitProvider.withErrorCallback","Gitline.CommitProvider.withCallback","Gitline.CommitProvider.onRequested","Gitline.CommitProvider.request","Gitline.CommitProvider.error","Gitline.Expandable","Gitline.Expandable.constructor","Gitline.Expandable.extend","Gitline.Plugin","Gitline.Plugin.LocalGit2JsonProvider","Gitline.Plugin.LocalGit2JsonProvider.constructor","Gitline.Plugin.LocalGit2JsonProvider.onRequested","Gitline.Plugin.GithubCommitProvider","Gitline.Plugin.GithubCommitProvider.constructor","Gitline.Plugin.GithubCommitProvider.gitURL","Gitline.Plugin.GithubCommitProvider.onRequested","Gitline.Plugin.GithubCommitProvider.loadForks","Gitline.Plugin.GithubCommitProvider.processBranches","Gitline.Plugin.GithubCommitProvider.loadBranches","Gitline.Plugin.GithubCommitProvider.loadCommits","Gitline.Plugin.GithubCommitProvider.processCommits","Gitline.Plugin.GithubCommitProvider.process","Gitline.Plugin.GithubCommitProvider.assignHeads","Gitline.create","Gitline.Main","Gitline.Main.constructor","Gitline.Main.addCommit","Gitline.Main.addBranch","Gitline.Main.render","Gitline.Main.getHeight","Gitline.Main.buildGraph","Gitline.Main.drawCommit","Gitline.Main.drawReferences","Gitline.Main.drawLabel","Gitline.Main.drawIdentity","Gitline.Main.initBranches","Gitline.Main.fromJSON","Gitline.Main.fromProvider","Gitline.Main.renderTo","Gitline.Main.withHeader","Gitline.Rendering","Gitline.Rendering.Shape","Gitline.Rendering.Shape.constructor","Gitline.Rendering.Shape.addIfMissing","Gitline.Rendering.Shape.addElements","Gitline.Rendering.Shape.update","Gitline.Rendering.Shape.dependsOn","Gitline.Rendering.BaseLink","Gitline.Rendering.BaseLink.constructor","Gitline.Rendering.BaseLink.from","Gitline.Rendering.BaseLink.to","Gitline.Rendering.BaseLink.color","Gitline.Rendering.Curve","Gitline.Rendering.Curve.constructor","Gitline.Rendering.Curve.addElements","Gitline.Rendering.Curve.update","Gitline.Rendering.Straight","Gitline.Rendering.Straight.constructor","Gitline.Rendering.Straight.update","Gitline.Rendering.Creation","Gitline.Rendering.Creation.constructor","Gitline.Rendering.Creation.addElements","Gitline.Rendering.Creation.update","Gitline.Rendering.Dot","Gitline.Rendering.Dot.constructor","Gitline.Rendering.Dot.size","Gitline.Rendering.Dot.at","Gitline.Rendering.Dot.color","Gitline.Rendering.Dot.update","Gitline.CommitView","Gitline.CommitView.constructor","Gitline.CommitView.addRelations","Gitline.CommitView.redraw","Gitline.Identity","Gitline.Identity.constructor","Gitline.Commit","Gitline.Commit.constructor","Gitline.Commit.getShortSha","Gitline.Commit.getFullSha","Gitline.Commit.initRelations","Gitline.Commit.initDefaultBranch","Gitline.Commit.initHeadSpecifity","Gitline.Commit.initMerges","Gitline.Commit.initAnonymous","Gitline.Commit.getColor","Gitline.Commit.hasMerges","Gitline.Commit.getX","Gitline.Commit.getY","Gitline.Commit.getOriginIndexY","Gitline.Commit.getTipPlusIndexY","Gitline.Commit.intersects","Gitline.Commit.getIndexY","Gitline.Commit.warn","Gitline.Commit.debug","Gitline.Commit.getLane","Gitline.Branch","Gitline.Branch.constructor"],"mappings":"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QA,CAACA,KAAKA,GAAGA,CAACA,GAAGA,SAASA,EAAEA,CAACA,CAACA,CAACA;gBACvEA,IAAIA,CAACA,OAAOA,CAACA,kBAAkBA,CAACA,OAAOA,EAAEA,CAACA,CAACA,CAACA;gBAC5CA,IAAIA,CAACA,OAAOA,CAACA,kBAAkBA,CAACA,OAAOA,EAAEA,CAACA,CAACA,CAACA;gBAE5CA,IAAIA,CAACA,OAAOA,CAACA,SAASA,EAAEA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA;gBACtCA,IAAIA,CAACA,OAAOA,CAACA,SAASA,EAAEA,CAACA,QAAQA,CAACA,KAAKA,CAACA,CAACA;gBAGzCA,IAAIA,CAACA,KAAKA,CAACA,SAASA,EAAEA,CAACA,SAASA,CAACA,CAACA,CAACA,CAACA;gBACpCA,IAAIA,CAACA,KAAKA,CAACA,OAAOA,EAAEA,CAACA,QAAQA,CAACA,KAAKA,CAACA,CAACA;gBAErCA,IAAIA,CAACA,KAAKA,CAACA,WAAWA,EAAEA,CAACA;gBACzBA,IAAIA,CAACA,KAAKA,CAACA,UAAUA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;gBAC5BA,IAAIA,CAACA,KAAKA,CAACA,UAAUA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA;gBAC7BA,IAAIA,CAACA,KAAKA,CAACA,UAAUA,CAACA,CAACA,EAAEA,CAACA,CAACA,CAACA;gBAE5BA,OAAOA;gBACPA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,cAAcA,EAAEA,EAAEA,CAACA,EAAEA,EAAEA,CAACA;oBACtDA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,UAAUA,CAACA,CAACA,CAACA,CAACA,CAACA,CAACA;oBACpCA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,UAAUA,CAACA,CAACA,CAACA,CAACA,CAACA,CAACA;oBACpCA,yCAAyCA;oBACzCA,IAAIA,CAACA,KAAKA,CAACA,YA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","file":"gitline.js","sourcesContent":["module Gitline {\r\n\tclass AsyncLoadingItem {\r\n\t\tpublic label: string;\r\n\t\tpublic data: any;\r\n\t\tpublic callback: Function;\r\n\t\tpublic index: number;\r\n\t\tpublic of: number;\r\n\r\n\t\tconstructor(label: string, data: any, callback: Function, index: number, of: number) {\r\n\t\t\tthis.label = label;\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.callback = callback;\r\n\t\t\tthis.index = index;\r\n\t\t\tthis.of = of;\r\n\t\t}\r\n\t}\r\n\r\n\texport class AsyncLoader {\r\n\r\n\t\tprivate element: HTMLElement;\r\n\t\tprivate items: AsyncLoadingItem[] = [];\r\n\t\tprivate suspended: boolean = false;\r\n\r\n\t\tconstructor(element: HTMLElement) {\r\n\t\t\tthis.element = element;\r\n\t\t}\r\n\r\n\t\t/** do this async, display the label and the data */\r\n\t\tpublic then(label: string, datacallback: Function, callback: Function): AsyncLoader {\r\n\t\t\tthis.thenSingle(label, () => {\r\n\t\t\t\t// add it to the beginning of the queue\r\n\t\t\t\tvar data: any[] = datacallback();\r\n\t\t\t\tfor (var i = data.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tthis.items.unshift(new AsyncLoadingItem(label, data[i], callback, i, data.length));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic thenSingle(label: string, callback: Function): AsyncLoader {\r\n\t\t\tthis.items.push(new AsyncLoadingItem(label, null, callback, 0, 1));\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic start(shield: boolean = true) {\r\n\t\t\tif (shield) {\r\n\t\t\t\tthis.element.hidden = false;\r\n\t\t\t}\r\n\t\t\tthis.next();\r\n\t\t}\r\n\r\n\t\tpublic next() {\r\n\t\t\tvar nextItem: AsyncLoadingItem = this.items.shift();\r\n\t\t\tif (nextItem !== undefined) {\r\n\t\t\t\t// avoid yielding control unnecessarily, but limit stack depth at the same time\r\n\t\t\t\tif ((nextItem.index % 50) === 0) {\r\n\t\t\t\t\tthis.showStatus(nextItem);\r\n\t\t\t\t\twindow.setTimeout(() => {\r\n\t\t\t\t\t\tLogger.debug(\"executing \" + nextItem.label + \" (\" + nextItem.index + \"/\" + nextItem.of + \")\");\r\n\t\t\t\t\t\tthis.execute(nextItem);\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.execute(nextItem);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.hidden = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic suspend() {\r\n\t\t\tthis.suspended = true;\r\n\t\t}\r\n\r\n\t\tpublic resume() {\r\n\t\t\tthis.suspended = false;\r\n\t\t\tthis.next();\r\n\t\t}\r\n\r\n\t\tpublic showStatus(item: AsyncLoadingItem) {\r\n\t\t\tthis.element.innerHTML = item.label; // + \" (\"+item.index + \"/\"+item.of+\")\";\r\n\t\t}\r\n\r\n\t\tpublic execute(item: AsyncLoadingItem) {\r\n\t\t\ttry {\r\n\t\t\t\titem.callback(item.data);\r\n\t\t\t\tif (!this.suspended) {\r\n\t\t\t\t\tthis.next();\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.error(e);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tpublic error(e: any) {\r\n\t\t\tLogger.error(e);\r\n\t\t\tthis.element.innerHTML = e;\r\n\t\t\tthis.suspend();\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"typedefs/cryptojs.d.ts\"/>\n\ndeclare var jsgl: any;\ndeclare var Logger: any;\n\nmodule Gitline {\n\texport function indexToX(index: number): number {\n\t\treturn index * 20 + 12;\n\t}\n\n\texport class Config {\n\t\tpublic dotHeight = 6;\n\t\tpublic dotWidth = 8;\n\n\t\tpublic remoteOnly: boolean = false;\n\n\t\tprivate avatar_gravatar(email) {\n\t\t\treturn \"http://www.gravatar.com/avatar/\" + CryptoJS.MD5(email.toLowerCase()) + \"?s=16&d=mm\";\n\t\t}\n\n\t\tpublic avatars: Function[] = [this.avatar_gravatar];\n\t}\n}","module Gitline {\r\n\texport class CommitProvider {\r\n\t\tprivate url;\r\n\t\tprivate callback: Function;\r\n\t\tprivate errorCallback: Function;\r\n\r\n\t\tconstructor(url: string) {\r\n\t\t\tthis.url = url;\r\n\t\t}\r\n\r\n\t\tpublic whenDone(data: any) {\r\n\t\t\tthis.callback(data);\r\n\t\t}\r\n\r\n\t\tpublic withErrorCallback(callbackFn: Function) {\r\n\t\t\tthis.errorCallback = callbackFn;\r\n\t\t}\r\n\r\n\t\tpublic withCallback(callbackFn: Function) {\r\n\t\t\tthis.callback = callbackFn;\r\n\t\t}\r\n\r\n\t\t/** this method should be overwritten. it must call whenDone(data) when all data was loaded. */\r\n\t\tpublic onRequested(url: string) {\r\n\t\t\tthrow new Error(\"onRequested not implemented on \" + this);\r\n\t\t}\r\n\r\n\t\tpublic request() {\r\n\t\t\tthis.onRequested(this.url);\r\n\t\t}\r\n\r\n\t\tpublic error(e: any) {\r\n\t\t\tthis.errorCallback(e);\r\n\t\t}\r\n\t}\r\n}","module Gitline {\r\n\texport interface HTMLExpandableElement extends HTMLElement {\r\n\t\twhenShort(innerHTML: string): void;\r\n\t\twhenFull(innerHTML: string): void;\r\n\t}\r\n\r\n\t/**\r\n\t * Elements with two contents, that expand on double click\r\n\t */\r\n\texport class Expandable {\r\n\t\tpublic static extend(element: HTMLElement): HTMLExpandableElement {\r\n\t\t\tvar extended: HTMLExpandableElement = <HTMLExpandableElement> element;\r\n\t\t\telement.classList.add(\"gitline-expandable\");\r\n\r\n\t\t\textended.whenFull = (innerHTML: string) => {\r\n\t\t\t\textended.onclick = (event) => {\r\n\t\t\t\t\textended.innerHTML = innerHTML;\r\n\t\t\t\t\tevent.cancelBubble = true;\r\n\t\t\t\t\telement.classList.add(\"gitline-expandable-expanded\");\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\t\t\textended.whenShort = (innerHTML: string) => {\r\n\t\t\t\textended.innerHTML = innerHTML;\r\n\t\t\t\textended.onmouseout = () => {\r\n\t\t\t\t\textended.innerHTML = innerHTML + \" \";\r\n\t\t\t\t\telement.classList.remove(\"gitline-expandable-expanded\");\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\t\t\treturn extended;\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"../CommitProvider.ts\"/>\r\n///<reference path=\"../Main.ts\"/>\r\n///<reference path=\"../typedefs/jquery.d.ts\"/>\r\n\r\nmodule Gitline.Plugin {\r\n\texport class LocalGit2JsonProvider extends Gitline.CommitProvider {\r\n\r\n\t\tpublic onRequested(url: string) {\r\n\t\t\tvar xhr = jQuery.getJSON(url, {});\r\n\r\n\t\t\txhr.done((json) => {\r\n\t\t\t\tthis.whenDone(json);\r\n\t\t\t});\r\n\r\n\t\t\txhr.fail(() => {\r\n\t\t\t\tthis.error(\"Error loading git data from \" + url + \" create it using git2json\");\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"../CommitProvider.ts\"/>\r\n///<reference path=\"../typedefs/jquery.d.ts\"/>\r\n///<reference path=\"../typedefs/moment-node.d.ts\"/>\r\n///<reference path=\"../typedefs/moment.d.ts\"/>\r\n\r\ndeclare var Logger: any;\r\n\r\nmodule Gitline.Plugin.Github {\r\n\texport interface Branch {\r\n\t\tname: string;\r\n\t\trepo: string;\r\n\t\tassigned: boolean;\r\n\t\tcommit: Commit;\r\n\t}\r\n\r\n\texport interface Fork {\r\n\t\turl: string;\r\n\t\tname: string;\r\n\t\tdata: any;\r\n\t\tfull_name: string;\r\n\t}\r\n\r\n\texport interface Commit {\r\n\t\tsha: string;\r\n\t}\r\n}\r\n\r\nmodule Gitline.Plugin {\r\n\timport Github = Gitline.Plugin.Github;\r\n\r\n\t/**\r\n\t * GitHub commit provider. only works if there is and accesstoken configured in the browser\r\n\t */\r\n\texport class GithubCommitProvider extends Gitline.CommitProvider {\r\n\r\n\t\tprivate forks: Github.Fork[] = [];\r\n\t\tprivate baseBranches: Github.Branch[] = [];\r\n\t\tprivate data: {} = {};\r\n\r\n\t\tprivate limit: number;\r\n\t\tprivate accessToken: string;\r\n\r\n\t\tpublic constructor(url: string, limit: number, accessToken: string) {\r\n\t\t\tsuper(url);\r\n\t\t\tthis.accessToken = accessToken;\r\n\t\t\tthis.limit = limit;\r\n\t\t}\r\n\r\n\t\tpublic gitURL(url: string, api: string, params: string = \"\") {\r\n\r\n\t\t\t// convert to api url and remove trailing /\r\n\t\t\tif (url.indexOf(\"api.github.com\") == -1) {\r\n\t\t\t\turl = url.replace(/.*github.com/, \"https://api.github.com/repos/\").replace(/\\/\\//g, \"/\");\r\n\r\n\t\t\t}\r\n\t\t\treturn url + \"/\" + api + \"?access_token=\" + this.accessToken + \"&per_page=\" + this.limit + \"&callback=?&\" + params;\r\n\t\t}\r\n\r\n\t\tpublic onRequested(url: string) {\r\n\t\t\tthis.loadForks(url);\r\n\t\t}\r\n\r\n\t\tpublic loadForks(url: string) {\r\n\t\t\tjQuery.getJSON(this.gitURL(url, \"forks\")).done((forks) => {\r\n\t\t\t\tif (forks.data.message === \"Bad credentials\") {\r\n\t\t\t\t\tthis.error(\"Github API: \" + forks.data.message);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tjQuery.getJSON(this.gitURL(url, \"branches\")).done((branches) => {\r\n\t\t\t\t\tthis.processBranches(url, branches.data);\r\n\t\t\t\t\tthis.forks = forks.data;\r\n\r\n\t\t\t\t\tthis.loadBranches();\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic processBranches(fork, data: Github.Branch[]) {\r\n\t\t\tdata.forEach(branch => {\r\n\t\t\t\tbranch.repo = fork.url !== undefined ? fork.url : fork;\r\n\t\t\t\tif (fork.full_name !== undefined) {\r\n\t\t\t\t\tbranch.name = branch.name + \"@\" + fork.full_name;\r\n\t\t\t\t}\r\n\t\t\t\tthis.baseBranches.push(branch);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic loadBranches() {\r\n\t\t\tvar forkRequests = this.forks.map(fork => {\r\n\t\t\t\treturn jQuery.getJSON(this.gitURL(fork.url, \"branches\"), data => {\r\n\t\t\t\t\tLogger.debug(\"loaded branches for \" + fork.name);\r\n\t\t\t\t\tthis.processBranches(fork, data.data);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tjQuery.when.apply(jQuery, forkRequests).done(() => {\r\n\t\t\t\tLogger.debug(\"all branches loaded\");\r\n\t\t\t\tthis.loadCommits();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic loadCommits() {\r\n\t\t\tvar commitRequests = [];\r\n\t\t\tthis.baseBranches.forEach(b => {\r\n\t\t\t\tvar commit = this.data[b.commit.sha];\r\n\t\t\t\tif (commit == undefined) {\r\n\t\t\t\t\tcommitRequests.push(\r\n\t\t\t\t\t\tjQuery.getJSON(this.gitURL(b.repo, \"commits\", \"sha=\" + b.commit.sha), data => {\r\n\t\t\t\t\t\t\tLogger.debug(\"loaded commits for \" + b.name);\r\n\t\t\t\t\t\t\tthis.processCommits(data.data);\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tjQuery.when.apply(jQuery, commitRequests).done(() => {\r\n\t\t\t\tthis.process();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic processCommits(data) {\r\n\t\t\tdata.map(data => {\r\n\t\t\t\tvar c: any = {};\r\n\t\t\t\tc.sha = data.sha;\r\n\t\t\t\tc.ssha = data.sha.substring(0, 8);\r\n\t\t\t\tc.parenthashes = (<any[]> data.parents).map(x => {\r\n\t\t\t\t\treturn x.sha\r\n\t\t\t\t});\r\n\t\t\t\tc.authorname = data.commit.author.name;\r\n\t\t\t\tc.authoremail = data.commit.author.email;\r\n\t\t\t\tc.authordate = moment(data.commit.author.date).unix();\r\n\t\t\t\tc.authortimestamp = new Date(data.commit.author.date).getTime();\r\n\r\n\t\t\t\tc.committername = data.commit.committer.name;\r\n\t\t\t\tc.committeremail = data.commit.committer.email;\r\n\t\t\t\tc.committerdate = moment(data.commit.committer.date).unix();\r\n\t\t\t\tc.committertimestamp = new Date(data.commit.committer.date).getTime();\r\n\r\n\t\t\t\tc.subject = data.commit.message;\r\n\t\t\t\tc.body = \"\"; // Todo: where to get this?\r\n\t\t\t\tc.refnames = []; // set when parsing branches\r\n\t\t\t\tc.inHeads = []; // set when parsing branches\r\n\r\n\t\t\t\treturn c;\r\n\t\t\t}).forEach(commit => {\r\n\t\t\t\tthis.data[commit.sha] = commit;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic process() {\r\n\t\t\tthis.baseBranches.forEach(b => {\r\n\t\t\t\tvar commit = this.data[b.commit.sha];\r\n\t\t\t\tif (commit == undefined) {\r\n\t\t\t\t\t// commit missing for branch - TODO: fetch it\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb.assigned = true;\r\n\t\t\t\t\tcommit.refnames.push(b.name);\r\n\t\t\t\t\tthis.assignHeads(commit);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Sort\r\n\t\t\tvar newdata = {};\r\n\t\t\tObject.keys(this.data).sort((a, b) => {\r\n\t\t\t\treturn this.data[b].committertimestamp - this.data[a].committertimestamp;\r\n\t\t\t}).forEach(sha => {\r\n\t\t\t\tnewdata[sha] = this.data[sha];\r\n\t\t\t});\r\n\r\n\r\n\t\t\tthis.whenDone(newdata);\r\n\t\t}\r\n\r\n\t\tprivate assignHeads(commit) {\r\n\t\t\tcommit.parents1 = commit.parenthashes.map(x => {\r\n\t\t\t\treturn x\r\n\t\t\t}); // copy array\r\n\r\n\t\t\twhile (commit.parents1.length > 0) {\r\n\t\t\t\tvar newParents = [];\r\n\t\t\t\tcommit.parents1.forEach(parentHash => {\r\n\t\t\t\t\tvar p = this.data[parentHash];\r\n\t\t\t\t\tif (p != undefined) {\r\n\t\t\t\t\t\tp.inHeads.push(commit.sha);\r\n\t\t\t\t\t\t// add all grandparents to the newparents\r\n\t\t\t\t\t\tp.parenthashes.forEach(h => {\r\n\t\t\t\t\t\t\tif (newParents.indexOf(h) === -1) {\r\n\t\t\t\t\t\t\t\tnewParents.push(h);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcommit.parents1 = newParents\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","///<reference path=\"Commit.ts\"/>\r\n///<reference path=\"AsyncLoader.ts\"/>\r\n///<reference path=\"Config.ts\"/>\r\n///<reference path=\"CommitProvider.ts\"/>\r\n///<reference path=\"Branch.ts\"/>\r\n///<reference path=\"Expandable.ts\"/>\r\n///<reference path=\"plugins/LocalGit2JsonProvider.ts\"/>\r\n///<reference path=\"plugins/GithubCommitProvider.ts\"/>\r\n///<reference path=\"typedefs/moment-node.d.ts\"/>\r\n///<reference path=\"typedefs/moment.d.ts\"/>\r\n\r\nmodule Gitline {\r\n\r\n\tinterface Commits {\r\n\t\t[key:string]:Commit;\r\n\t}\r\n\r\n\tinterface Branches {\r\n\t\t[key:string]:Branch;\r\n\t}\r\n\r\n\texport function create(): Main {\r\n\t\treturn new Main();\r\n\t}\r\n\r\n\texport class Main {\r\n\r\n\t\tpublic maxX: number = 0;\r\n\t\tpublic maxIndexY: number = 0;\r\n\t\tpublic commits: Commits = {};\r\n\t\tpublic firstCommit: Commit;\r\n\t\tpublic canvas;\r\n\t\tpublic data;\r\n\t\tpublic panel;\r\n\t\tpublic textPanel;\r\n\t\tpublic headsMap: Branches = {};\r\n\t\tpublic rootLabel;\r\n\r\n\t\tpublic al: AsyncLoader;\r\n\r\n\t\tpublic config: Config = new Config();\r\n\r\n\t\t// HTML stuff\r\n\t\tprivate loadingPanel: HTMLElement;\r\n\t\tprivate graphicalPanel: HTMLElement;\r\n\t\tprivate headerPanel: HTMLElement;\r\n\t\tprivate contentPanel: HTMLElement;\r\n\r\n\t\tprivate commitProvider: CommitProvider;\r\n\r\n\t\tpublic addCommit(commit: Commit) {\r\n\t\t\tthis.commits[commit.getFullSha()] = commit;\r\n\r\n\t\t\t// first commit needed by rendering\r\n\t\t\tif (this.firstCommit === undefined) {\r\n\t\t\t\tthis.firstCommit = commit;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic addBranch(refname: string, commit: Commit, specifity: number) {\r\n\t\t\tthis.headsMap[refname] = new Branch(refname, commit, specifity);\r\n\t\t}\r\n\r\n\t\tpublic render() {\r\n\t\t\tthis.canvas = new jsgl.Panel(this.graphicalPanel);\r\n\r\n\t\t\tthis.al.thenSingle(\"Loading Data\", () => {\r\n\t\t\t\tthis.al.suspend();\r\n\t\t\t\tthis.commitProvider.withCallback((json) => {\r\n\t\t\t\t\tthis.data = json;\r\n\t\t\t\t\tthis.al.resume();\r\n\t\t\t\t});\r\n\t\t\t\tthis.commitProvider.request();\r\n\t\t\t}).then(\"Loading Commits\", () => {\r\n\t\t\t\treturn Object.keys(this.data)\r\n\t\t\t}, (sha) => {\r\n\t\t\t\tvar commit = new Commit(this, this.data[sha]);\r\n\t\t\t\tthis.addCommit(commit);\r\n\t\t\t})\r\n\t\t\t\t.thenSingle(\"Building Graph\", () => {\r\n\t\t\t\t\tthis.buildGraph();\r\n\t\t\t\t})\r\n\t\t\t\t.then(\"Drawing Labels\", () => {\r\n\t\t\t\t\treturn Object.keys(this.commits)\r\n\t\t\t\t}, (sha) => {\r\n\t\t\t\t\tvar commit = this.commits[sha];\r\n\t\t\t\t\tthis.drawCommit(commit);\r\n\t\t\t\t})\r\n\t\t\t\t.thenSingle(\"Creating Legend\", () => {\r\n\t\t\t\t\tthis.rootLabel = document.createElement('div');\r\n\t\t\t\t\tthis.rootLabel.className = \"commit-legend\";\r\n\t\t\t\t\tthis.textPanel.appendChild(this.rootLabel);\r\n\t\t\t\t})\r\n\t\t\t\t.then(\"Drawing Merges\", () => {\r\n\t\t\t\t\treturn Object.keys(this.commits)\r\n\t\t\t\t}, (sha) => {\r\n\t\t\t\t\tvar commit = this.commits[sha];\r\n\t\t\t\t\tthis.drawReferences(commit);\r\n\t\t\t\t})\r\n\t\t\t\t.thenSingle(\"Resizing\", () => {\r\n\t\t\t\t\tthis.graphicalPanel.style.width = indexToX(this.maxX + 1) + \"px\";\r\n\t\t\t\t\tthis.graphicalPanel.style.height = this.getHeight() + \"px\";\r\n\t\t\t\t}).start();\r\n\r\n\t\t\twindow.onresize = () => {\r\n\r\n\t\t\t\tthis.al.then(\"Redrawing\", () => {\r\n\t\t\t\t\treturn Object.keys(this.commits)\r\n\t\t\t\t}, (sha) => {\r\n\t\t\t\t\tvar commit: Commit = this.commits[sha];\r\n\t\t\t\t\tcommit.view.redraw();\r\n\t\t\t\t}).thenSingle(\"Resizing\", () => {\r\n\t\t\t\t\tthis.graphicalPanel.style.width = indexToX(this.maxX + 1) + \"px\";\r\n\t\t\t\t\tthis.graphicalPanel.style.height = this.getHeight() + \"px\";\r\n\t\t\t\t}).start(false);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tpublic getHeight() {\r\n\t\t\treturn this.rootLabel.offsetTop - this.firstCommit.view.label.offsetTop;\r\n\t\t}\r\n\r\n\t\tpublic buildGraph() {\r\n\t\t\tvar shas = Object.keys(this.commits);\r\n\t\t\tshas.forEach((sha) => {\r\n\t\t\t\tvar commit = this.commits[sha];\r\n\t\t\t\tcommit.initRelations();\r\n\t\t\t});\r\n\t\t\tshas.forEach((sha) => {\r\n\t\t\t\tvar commit = this.commits[sha];\r\n\r\n\t\t\t\tcommit.initHeadSpecifity();\r\n\t\t\t\tcommit.initMerges();\r\n\t\t\t});\r\n\t\t\tthis.initBranches();\r\n\t\t}\r\n\r\n\t\tpublic drawCommit(commit: Commit) {\r\n\t\t\t// Label\r\n\t\t\tcommit.view = new CommitView(this.canvas, this.config, commit);\r\n\r\n\t\t\tif (commit.outOfScope === false) {\r\n\t\t\t\tcommit.view.label = this.drawLabel(commit);\r\n\r\n\t\t\t\tcommit.view.label.onclick = function () {\r\n\t\t\t\t\tif (console) {\r\n\t\t\t\t\t\tLogger.debug(commit);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.textPanel.appendChild(commit.view.label);\r\n\t\t\t\tcommit.view.label.style['padding-left'] = Gitline.indexToX(this.maxX + 1) + \"px\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic drawReferences(commit: Commit) {\r\n\t\t\tcommit.view.addRelations();\r\n\t\t\tcommit.view.redraw();\r\n\t\t}\r\n\r\n\t\tpublic drawLabel(commit: Commit) {\r\n\t\t\tvar label = document.createElement('div');\r\n\t\t\tlabel.className = \"commit-legend\";\r\n\r\n\t\t\t// SHA Hash\r\n\t\t\tvar shortSha: string = commit.getShortSha();\r\n\t\t\tvar fullSha: string = commit.getFullSha();\r\n\t\t\tvar sha: HTMLExpandableElement = Expandable.extend(document.createElement(\"gitline-sha\"));\r\n\t\t\tsha.setAttribute(\"title\", fullSha);\r\n\t\t\tsha.whenShort(shortSha + \" \");\r\n\t\t\tsha.whenFull(fullSha);\r\n\r\n\t\t\tlabel.appendChild(sha);\r\n\r\n\t\t\t// Author and committer\r\n\t\t\tlabel.appendChild(this.drawIdentity(\"author\", commit.author));\r\n\r\n\t\t\tif (commit.author.email != commit.committer.email) {\r\n\t\t\t\tlabel.appendChild(this.drawIdentity(\"committer\", commit.committer));\r\n\t\t\t}\r\n\r\n\t\t\t// Branch - TODO: Tags and other branches\r\n\t\t\tif (commit.branch && commit.branch.commit === commit && !commit.branch.anonymous) {\r\n\t\t\t\tvar head = document.createElement(\"span\");\r\n\t\t\t\thead.className = \"head-label\";\r\n\t\t\t\thead.style.backgroundColor = commit.getColor(40);\r\n\t\t\t\thead.style.color = \"white\";\r\n\t\t\t\thead.style.paddingLeft = head.style.paddingRight = \"2px\";\r\n\t\t\t\thead.innerHTML = commit.branch.ref;\r\n\r\n\t\t\t\tlabel.appendChild(head);\r\n\t\t\t}\r\n\r\n\t\t\t// Subject\r\n\t\t\tvar subject = document.createElement(\"span\");\r\n\t\t\tsubject.innerHTML = \" \" + commit.subject;\r\n\t\t\tsubject.style.color = commit.hasMerges() ? \"grey\" : \"black\";\r\n\t\t\tlabel.appendChild(subject);\r\n\r\n\t\t\tlabel.style.position = \"relative\";\r\n\t\t\treturn label;\r\n\t\t}\r\n\r\n\t\tprivate drawIdentity(type: string, id: Identity): HTMLElement {\r\n\t\t\tvar container: HTMLElement = document.createElement(\"gitline-identity-container\");\r\n\r\n\t\t\tvar identity: HTMLExpandableElement = Expandable.extend(document.createElement(\"gitline-identity\"));\r\n\t\t\tidentity.classList.add(type);\r\n\t\t\tvar fullname = id.name + \" &lt;\" + id.email.toLowerCase() + \"&gt;\";\r\n\t\t\tidentity.setAttribute(\"title\", id.name + \" <\" + id.email.toLowerCase() + \">\");\r\n\t\t\tidentity.style.background = this.config.avatars.map(f => {\r\n\t\t\t\treturn \"url(\" + f(id.email) + \") no-repeat\"\r\n\t\t\t}).join(\", \");\r\n\t\t\tidentity.whenFull(fullname);\r\n\t\t\tidentity.whenShort(\" \");\r\n\r\n\t\t\tvar datetime: HTMLExpandableElement = Expandable.extend(document.createElement(\"gitline-identity-datetime\"));\r\n\t\t\tdatetime.classList.add(type + \"-datetime\");\r\n\t\t\tvar fullDate = id.date.format(\"YYYY-MM-DD HH:mm\");\r\n\t\t\tdatetime.setAttribute(\"title\", fullDate);\r\n\t\t\tdatetime.whenFull(fullDate);\r\n\t\t\tdatetime.whenShort(id.date.format(\"HH:mm\"));\r\n\r\n\t\t\tcontainer.appendChild(identity);\r\n\t\t\tcontainer.appendChild(datetime);\r\n\r\n\t\t\treturn container;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t Based on the specifity assign the branches to the commits. if in doubt the commit will be on the most specific branch\r\n\t\t */\r\n\t\tpublic initBranches() {\r\n\r\n\t\t\tvar heads = Object.keys(this.headsMap);\r\n\r\n\t\t\t/* set the index to the head object */\r\n\t\t\tfor (var i = 0; i < heads.length; i++) {\r\n\t\t\t\tvar headName = heads[i];\r\n\t\t\t\tvar head = this.headsMap[headName];\r\n\t\t\t\thead.commit.initDefaultBranch();\r\n\t\t\t}\r\n\r\n\t\t\t/* Sort the branches by specifity */\r\n\t\t\tvar self = this;\r\n\t\t\theads.sort(function (l, r) {\r\n\t\t\t\tvar lHead: Commit = self.headsMap[l].commit;\r\n\t\t\t\tvar rHead: Commit = self.headsMap[r].commit;\r\n\r\n\t\t\t\tif (lHead === rHead) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (lHead.branch.category === rHead.branch.category) {\r\n\t\t\t\t\treturn lHead.branch.specifity - rHead.branch.specifity;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn lHead.branch.category.length - rHead.branch.category.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/* set the index to the head object */\r\n\t\t\tvar maxLane = 0;\r\n\t\t\tfor (var i = 0; i < heads.length; i++) {\r\n\t\t\t\tvar headName = heads[i];\r\n\t\t\t\tvar head = this.headsMap[headName];\r\n\t\t\t\tvar tip: Commit = head.commit;\r\n\r\n\t\t\t\tif (tip.branch === head) {\r\n\t\t\t\t\thead.lane = maxLane;\r\n\t\t\t\t\t//head.index = maxLane;\r\n\t\t\t\t\tmaxLane++;\r\n\r\n\t\t\t\t\t// Can we display this head a little more to the left?\r\n\t\t\t\t\tfor (var l = 0; l < heads.length; l++) {\r\n\r\n\t\t\t\t\t\tvar canUseLane: boolean = true;\r\n\t\t\t\t\t\tfor (var j = 0; j < heads.length; j++) {\r\n\t\t\t\t\t\t\tvar jheadName = heads[j];\r\n\t\t\t\t\t\t\tvar headOnLane: Commit = this.headsMap[jheadName].commit;\r\n\r\n\t\t\t\t\t\t\tif (headOnLane === undefined ||\r\n\t\t\t\t\t\t\t\theadOnLane.branch != head &&\r\n\t\t\t\t\t\t\t\theadOnLane.branch.lane === l &&\r\n\t\t\t\t\t\t\t\t(tip.intersects(headOnLane) || tip.branch.category != headOnLane.branch.category)) {\r\n\t\t\t\t\t\t\t\tcanUseLane = false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (canUseLane) {\r\n\r\n\t\t\t\t\t\t\tLogger.debug(\"NO INTERSECTS: \", tip.branch.ref, \" - \", headOnLane.branch.ref);\r\n\t\t\t\t\t\t\thead.lane = l;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.maxX = Math.max(this.maxX, head.lane);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Launching\r\n\t\tpublic fromJSON(jsonFile: string): Main {\r\n\t\t\treturn this.fromProvider(new Plugin.LocalGit2JsonProvider(jsonFile));\r\n\t\t}\r\n\r\n\t\tpublic fromProvider(commitProvider: CommitProvider): Main {\r\n\t\t\tthis.commitProvider = commitProvider;\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tprivate renderTo(panel: HTMLElement): Main {\r\n\t\t\tif (this.headerPanel !== undefined) {\r\n\t\t\t\tpanel.appendChild(this.headerPanel);\r\n\t\t\t}\r\n\t\t\tpanel.appendChild(this.loadingPanel = document.createElement(\"gitline-loadingpanel\"));\r\n\t\t\tpanel.appendChild(this.contentPanel = document.createElement(\"gitline-contentpanel\"));\r\n\t\t\tthis.contentPanel.appendChild(this.graphicalPanel = document.createElement(\"gitline-graphicalpanel\"));\r\n\t\t\tthis.contentPanel.appendChild(this.textPanel = document.createElement(\"gitline-textpanel\"));\r\n\t\t\tthis.al = new AsyncLoader(this.loadingPanel);\r\n\r\n\t\t\tthis.render();\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic withHeader(header: string): Main;\r\n\t\tpublic withHeader(header: HTMLElement): Main;\r\n\r\n\t\tpublic withHeader(header: any) {\r\n\t\t\tif (typeof header === \"string\") {\r\n\t\t\t\tthis.headerPanel = document.createElement(\"gitline-headerpanel\");\r\n\t\t\t\tthis.headerPanel.innerHTML = header;\r\n\t\t\t} else {\r\n\t\t\t\tthis.headerPanel = header;\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n}","module Gitline.Rendering {\r\n\r\n\t/**\r\n\t * basic support for jsgl shapes\r\n\t */\r\n\texport class Shape {\r\n\t\tprotected element: any; // jsgl element\r\n\t\tprivate renderedTo: HTMLElement; // jsgl canvas (any html)\r\n\t\tprotected canvas: any;\r\n\t\tprivate dependencies: Shape[] = [];\r\n\r\n\t\tpublic constructor(canvas: any, element: any) {\r\n\t\t\tthis.canvas = canvas;\r\n\t\t\tthis.element = element;\r\n\t\t}\r\n\r\n\t\tpublic addIfMissing() {\r\n\t\t\tif (this.element !== undefined && this.renderedTo == null) {\r\n\t\t\t\tthis.addElements();\r\n\t\t\t\tthis.renderedTo = this.canvas;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic addElements() {\r\n\t\t\tthis.canvas.addElement(this.element);\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tthis.dependencies.forEach(dep => {\r\n\t\t\t\tdep.update();\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tpublic dependsOn(on: Shape) {\r\n\t\t\ton.dependencies.push(this);\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"Shape.ts\"/>\r\n\r\nmodule Gitline.Rendering {\r\n\r\n\t/**\r\n\t * Shape that links two dots\r\n\t */\r\n\texport class BaseLink extends Shape {\r\n\r\n\t\tparentDot: Dot;\r\n\t\tchildDot: Dot;\r\n\r\n\t\tlineColor: string;\r\n\r\n\t\tconstructor(canvas: any, element: any) {\r\n\t\t\tsuper(canvas, element);\r\n\t\t}\r\n\r\n\t\tpublic from(from: Dot): BaseLink {\r\n\t\t\tthis.dependsOn(from);\r\n\t\t\tthis.parentDot = from;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic to(to: Dot): BaseLink {\r\n\t\t\t//this.dependsOn(to);\r\n\t\t\tthis.childDot = to;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic color(lineColor: string): BaseLink {\r\n\t\t\tthis.element.getStroke().setWeight(1);\r\n\t\t\tthis.element.getStroke().setColor(lineColor);\r\n\t\t\tthis.lineColor = lineColor;\r\n\t\t\tthis.addIfMissing();\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"BaseLink.ts\"/>\r\n\r\ndeclare var jsgl: any;\r\n\r\nmodule Gitline.Rendering {\r\n\texport class Curve extends BaseLink {\r\n\r\n\t\tprivate arrow;\r\n\r\n\t\tconstructor(canvas: any) {\r\n\t\t\tsuper(canvas, canvas.createCurve());\r\n\t\t\tthis.arrow = this.canvas.createPolygon();\r\n\t\t}\r\n\r\n\t\tpublic addElements() {\r\n\t\t\tsuper.addElements();\r\n\r\n\t\t\t// 2nd element\r\n\t\t\tthis.canvas.addElement(this.arrow);\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tvar x: number = this.childDot.x;\r\n\t\t\tvar y: number = this.childDot.y;\r\n\t\t\tvar parentX: number = this.parentDot.x;\r\n\t\t\tvar parentY: number = this.parentDot.y;\r\n\t\t\tvar color: string = this.lineColor;\r\n\r\n\t\t\tvar direction = x < parentX ? 1 : -1;\r\n\r\n\t\t\tthis.element.setStartPointXY(parentX, parentY - this.parentDot.height / 2)\r\n\t\t\tthis.element.setEndPointXY(x + this.childDot.width / 2 * direction, y);\r\n\t\t\tthis.element.setControl2PointXY(parentX, y);\r\n\t\t\tthis.element.setControl1PointXY(parentX, y);\r\n\r\n\t\t\tthis.element.getStroke().setWeight(1);\r\n\t\t\tthis.element.getStroke().setColor(color);\r\n\r\n\r\n\t\t\tthis.arrow.getStroke().setWeight(0);\r\n\t\t\tthis.arrow.getFill().setColor(color);\r\n\r\n\t\t\tthis.arrow.clearPoints();\r\n\t\t\tthis.arrow.addPointXY(0, 0);\r\n\t\t\tthis.arrow.addPointXY(6, -4);\r\n\t\t\tthis.arrow.addPointXY(6, 4);\r\n\r\n\t\t\t// Move\r\n\t\t\tfor (var i = 0; i < this.arrow.getPointsCount(); i++) {\r\n\t\t\t\tvar px = this.arrow.getPointAt(i).X;\r\n\t\t\t\tvar py = this.arrow.getPointAt(i).Y;\r\n\t\t\t\t//this.arrow.setPointXYAt(px, py + y, i);\r\n\t\t\t\tthis.arrow.setPointXYAt(px * direction + x + this.childDot.width / 2 * direction, py + y, i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"BaseLink.ts\"/>\r\n\r\nmodule Gitline.Rendering {\r\n\texport class Straight extends BaseLink {\r\n\r\n\t\tconstructor(canvas: any) {\r\n\t\t\tsuper(canvas, canvas.createLine());\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tsuper.update();\r\n\t\t\tthis.element.setStartPointXY(this.parentDot.x, this.parentDot.y - this.parentDot.height / 2);\r\n\t\t\tthis.element.setEndPointXY(this.childDot.x, this.childDot.y + this.childDot.height / 2);\r\n\t\t}\r\n\r\n}\r\n}","///<reference path=\"BaseLink.ts\"/>\r\n\r\ndeclare var jsgl: any;\r\n\r\nmodule Gitline.Rendering {\r\n\texport class Creation extends BaseLink {\r\n\r\n\t\tsecondLine;\r\n\r\n\t\tconstructor(canvas: any) {\r\n\t\t\tsuper(canvas, canvas.createLine());\r\n\t\t\tthis.secondLine = canvas.createLine();\r\n\t\t}\r\n\r\n\t\tpublic addElements() {\r\n\t\t\tsuper.addElements();\r\n\r\n\t\t\t// 2nd element\r\n\t\t\tthis.canvas.addElement(this.secondLine); // TODO: add later?\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tsuper.update();\r\n\r\n\t\t\t// Horizontal dotted line\r\n\t\t\tif (this.parentDot.x < this.childDot.x) {\r\n\t\t\t\tthis.element.setStartPointXY(this.parentDot.x + this.parentDot.width / 2, this.parentDot.y)\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.setStartPointXY(this.parentDot.x - this.parentDot.width / 2, this.parentDot.y)\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.setEndPointXY(this.childDot.x, this.parentDot.y);\r\n\t\t\tthis.element.getStroke().setWeight(1);\r\n\t\t\tthis.element.getStroke().setDashStyle(jsgl.DashStyles.DASH);\r\n\t\t\tthis.element.getStroke().setColor(this.lineColor);\r\n\r\n\t\t\t// Vertical line\r\n\t\t\tthis.secondLine.setStartPointXY(this.childDot.x, this.parentDot.y)\r\n\t\t\tthis.secondLine.setEndPointXY(this.childDot.x, this.childDot.y + this.childDot.height / 2);\r\n\t\t\tthis.secondLine.getStroke().setWeight(1)\r\n\t\t\tthis.secondLine.getStroke().setColor(this.lineColor);\r\n\t\t}\r\n\t}\r\n}","/// <reference path=\"Shape.ts\"/>\r\n\r\nmodule Gitline.Rendering {\r\n\texport class Dot extends Shape {\r\n\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t\twidth: number;\r\n\t\theight: number;\r\n\r\n\t\tconstructor(canvas: any) {\r\n\t\t\tsuper(canvas, canvas.createRectangle());\r\n\t\t}\r\n\r\n\t\tpublic size(width: number, height: number): Dot {\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.element.setWidth(width);\r\n\t\t\tthis.element.setHeight(height);\r\n\t\t\tthis.element.setXRadius(width / 4);\r\n\t\t\tthis.element.setYRadius(width / 4);\r\n\r\n\t\t\tthis.update();\r\n\t\t\tthis.addIfMissing();\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic at(x: number, y: number): Dot {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\r\n\t\t\tthis.update();\r\n\t\t\tthis.addIfMissing();\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic color(strokeColor: string, fillColor: string): Dot {\r\n\t\t\tthis.element.getStroke().setWeight(1);\r\n\t\t\tthis.element.getStroke().setColor(strokeColor);\r\n\t\t\tthis.element.getFill().setColor(fillColor);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tthis.element.setLocationXY(this.x - this.width / 2, this.y - this.height / 2);\r\n\t\t\tsuper.update();\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"rendering/Curve.ts\"/>\r\n///<reference path=\"rendering/Straight.ts\"/>\r\n///<reference path=\"rendering/Creation.ts\"/>\r\n///<reference path=\"rendering/Dot.ts\"/>\r\n///<reference path=\"Config.ts\"/>\r\n///<reference path=\"Commit.ts\"/>\r\n///<reference path=\"rendering/Shape.ts\"/>\r\n\r\nmodule Gitline {\r\n\r\n\t/**\r\n\t * View of the Commit\r\n\t */\r\n\texport class CommitView {\r\n\r\n\t\tpublic commit: Commit;\r\n\t\tpublic label: HTMLElement;\r\n\t\tpublic canvas: any; // jsgl\r\n\t\tpublic config: Config;\r\n\r\n\t\tpublic dot: Rendering.Dot;\r\n\t\tpublic lines: Rendering.Shape[] = [];\r\n\r\n\t\tconstructor(canvas, config: Config, commit: Commit) {\r\n\t\t\tthis.canvas = canvas;\r\n\t\t\tthis.config = config;\r\n\t\t\tthis.commit = commit;\r\n\r\n\t\t\tthis.dot = new Rendering.Dot(this.canvas);\r\n\t\t}\r\n\r\n\t\tpublic addRelations() {\r\n\r\n\t\t\t// Direct parent\r\n\t\t\tif (this.commit.directparent != null) {\r\n\t\t\t\tvar dpl: Rendering.Shape;\r\n\t\t\t\tif (this.commit.getLane() == this.commit.directparent.getLane() || this.commit.directparent.outOfScope) {\r\n\t\t\t\t\t// direct parent is the same X/lane, this means it is a standard forward commit\r\n\t\t\t\t\tdpl = new Rendering.Straight(this.canvas).from(this.commit.directparent.view.dot).to(this.dot).color(this.commit.getColor(20));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// direct parent is on a different lane, this is most certainly a new branch\r\n\t\t\t\t\tdpl = new Rendering.Creation(this.canvas).from(this.commit.directparent.view.dot).to(this.dot).color(this.commit.getColor(30));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.lines.push(dpl);\r\n\t\t\t}\r\n\r\n\t\t\tvar allmerges = this.commit.merges.standard.concat(this.commit.merges.anonymous);\r\n\t\t\tallmerges.forEach(merge => {\r\n\t\t\t\tthis.lines.push(\r\n\t\t\t\t\tnew Rendering.Curve(this.canvas)\r\n\t\t\t\t\t\t.from(merge.source.view.dot)\r\n\t\t\t\t\t\t.to(this.dot)\r\n\t\t\t\t\t\t.color(merge.source.getColor(35)))\r\n\t\t\t\t;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/** calculate the positions based on model and update the shapes */\r\n\t\tpublic redraw() {\r\n\t\t\tthis.dot\r\n\t\t\t\t.at(this.commit.getX(), this.commit.getY())\r\n\t\t\t\t.size(this.config.dotWidth, this.config.dotHeight)\r\n\t\t\t\t.color(this.commit.getColor(20), this.commit.getColor(80));\r\n\t\t}\r\n\r\n\r\n\t}\r\n}","///<reference path=\"Main.ts\"/>\r\n///<reference path=\"CommitView.ts\"/>\r\n///<reference path=\"Branch.ts\"/>\r\n///<reference path=\"typedefs/moment-node.d.ts\"/>\r\n///<reference path=\"typedefs/moment.d.ts\"/>\r\n\r\nmodule Gitline {\r\n\r\n\t/** committer or author */\r\n\texport class Identity {\r\n\t\tpublic image: string; // optional\r\n\r\n\t\tpublic constructor(public name: string, public email: string, public date: moment.Moment) {\r\n\t\t}\r\n\t}\r\n\r\n\texport class Commit {\r\n\t\tprivate container: Gitline.Main;\r\n\r\n\t\tprivate warnings: any[] = [];\r\n\t\tprivate inHeadsRef: Commit[] = [];\r\n\t\tprivate parents: Commit[] = [];\r\n\t\tprivate childs: Commit[] = [];\r\n\t\tprivate siblings: Commit[] = [];\r\n\t\tpublic outOfScope: boolean = false; // This commit was not part of the logs scope, but is referenced by another commit.\r\n\t\tpublic merges = {standard: [], anonymous: []};\r\n\t\tprivate sha: string;\r\n\t\tprivate ssha: string; // Abbreviated hash\r\n\t\tpublic subject: string;\r\n\t\tprivate data: any;\r\n\t\tprivate indexY: number;\r\n\r\n\t\tprivate maxSpecifity: number;\r\n\t\tpublic branch: Branch;\r\n\t\tpublic directparent: Commit;\r\n\t\tpublic directchild: Commit;\r\n\r\n\t\tpublic view: CommitView;\r\n\r\n\t\tpublic committer: Identity;\r\n\t\tpublic author: Identity;\r\n\r\n\t\tconstructor(container: Gitline.Main, data) {\r\n\t\t\tthis.container = container;\r\n\t\t\tthis.data = data;\r\n\r\n\t\t\t// reference the data back to the object\r\n\t\t\tthis.data.obj = this;\r\n\r\n\t\t\tif (data.inHeads == null) data.inHeads = [];\r\n\t\t\tif (data.parenthashes == null) data.parenthashes = [];\r\n\t\t\tif (data.refnames == null) data.refnames = [];\r\n\r\n\t\t\tthis.sha = data.sha;\r\n\t\t\tthis.ssha = data.ssha;\r\n\t\t\tthis.subject = data.subject;\r\n\t\t\tthis.indexY = container.maxIndexY++;\r\n\r\n\t\t\tthis.committer = new Identity(this.data.committername, this.data.committeremail, moment.unix(this.data.committerdate));\r\n\t\t\tthis.author = new Identity(this.data.authorname, this.data.authoremail, moment.unix(this.data.authordate));\r\n\t\t}\r\n\r\n\t\tpublic getShortSha(): string {\r\n\t\t\treturn this.ssha;\r\n\t\t}\r\n\r\n\t\tpublic getFullSha(): string {\r\n\t\t\treturn this.sha;\r\n\t\t}\r\n\r\n\t\tpublic initRelations() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tthis.data.parenthashes.forEach(hash => {\r\n\t\t\t\tvar parentCommit = this.container.commits[hash];\r\n\r\n\t\t\t\t// Create a virtual commit\r\n\t\t\t\tif (parentCommit == null) {\r\n\t\t\t\t\tparentCommit = new Commit(this.container, {sha: hash + Math.random()});\r\n\t\t\t\t\tparentCommit.outOfScope = true;\r\n\t\t\t\t\tself.container.addCommit(parentCommit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.parents.push(parentCommit);\r\n\t\t\t\tparentCommit.childs.push(this);\r\n\t\t\t\tthis.siblings = parentCommit.childs; // this will be overwitten as new childs are found\r\n\r\n\t\t\t\tif (this.parents.length > 0) {\r\n\t\t\t\t\tvar dp = this.parents[0];\r\n\t\t\t\t\tthis.directparent = dp;\r\n\t\t\t\t\tdp.directchild = this;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.data.inHeads.forEach(headsha => {\r\n\t\t\t\tvar commit = this.container.commits[headsha];\r\n\t\t\t\tif (this.inHeadsRef.indexOf(commit) === undefined) {\r\n\t\t\t\t\tthis.inHeadsRef.push(commit)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\tpublic initDefaultBranch() {\r\n\t\t\tvar commit: Commit = this;\r\n\r\n\t\t\twhile (commit != null) {\r\n\r\n\t\t\t\t// GUESSING: The correct branch is usually the one with the least specific name\r\n\t\t\t\tif (commit.branch == null || commit.branch.specifity > this.branch.specifity) {\r\n\t\t\t\t\tcommit.branch = this.branch;\r\n\t\t\t\t\t//commit.debug(\"assigning \"+this.branch.ref)\r\n\t\t\t\t}\r\n\t\t\t\tcommit.branch.start = commit; // this function will traverse the parents, so the last one will be the first commit\r\n\t\t\t\tcommit.branch.origin = commit.directparent; // this could be null -> it is outside of the history.\r\n\t\t\t\tcommit = commit.directparent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic initHeadSpecifity() {\r\n\t\t\tfor (var i = 0; i < this.data.refnames.length; i++) {\r\n\t\t\t\tvar refname = this.data.refnames[i];\r\n\r\n\t\t\t\tif (!this.container.config.remoteOnly || refname.indexOf(\"origin/\") == 0) {\r\n\r\n\t\t\t\t\tif (this.container.config.remoteOnly) {\r\n\t\t\t\t\t\trefname = refname.replace(/^origin./, '');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar specifity = refname.replace(/[^\\/-]/g, '').length * 1000;\r\n\t\t\t\t\tspecifity += refname.replace(/[^a-zA-Z0-9-]/, '').length;\r\n\r\n\t\t\t\t\tthis.container.addBranch(refname, this, specifity);\r\n\r\n\t\t\t\t\t/* assign the most specific head on this tip commit */\r\n\t\t\t\t\tif (this.maxSpecifity == null || specifity < this.maxSpecifity) {\r\n\t\t\t\t\t\tLogger.debug(\"assigning branch\", refname, this.sha, this.maxSpecifity, specifity)\r\n\t\t\t\t\t\tthis.maxSpecifity = specifity;\r\n\t\t\t\t\t\tthis.branch = this.container.headsMap[refname];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.initDefaultBranch();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic initMerges() {\r\n\r\n\t\t\tthis.merges = {standard: [], anonymous: []};\r\n\t\t\tthis.warnings = [];\r\n\r\n\t\t\t// Detect a merge (octopus currently not supported)\r\n\r\n\t\t\tif (this.parents.length == 1) {\r\n\t\t\t\tvar dp = this.parents[0];\r\n\t\t\t\tthis.directparent = dp;\r\n\t\t\t\tdp.directchild = this;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.parents.length >= 2) {\r\n\t\t\t\tvar dp = this.parents[0];\r\n\t\t\t\tthis.directparent = dp;\r\n\t\t\t\tdp.directchild = this;\r\n\r\n\t\t\t\tfor (var i = 1; i < this.parents.length; i++) {\r\n\t\t\t\t\tvar mp = this.parents[i];\r\n\r\n\t\t\t\t\tif (mp != null) {\r\n\r\n\t\t\t\t\t\t// Clues if this is a standard or anonymous merge\r\n\t\t\t\t\t\tif (mp.data.refnames.length > 0 // This is standard merge with mps head\r\n\t\t\t\t\t\t\t|| mp.inHeadsRef.length != dp.inHeadsRef.length // The heads of both are different\r\n\t\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\t\tthis.merges.standard.push({source: mp});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// This is a anonymous (automatic) merge on the same branch\r\n\t\t\t\t\t\t\tthis.merges.anonymous.push({source: mp})\r\n\t\t\t\t\t\t\tthis.initAnonymous();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic initAnonymous() {\r\n\t\t\t// Create a dummy branch for anonymous merges, which is as specific as the original branch.\r\n\t\t\t// try finding the original branch by going up direct childs, which will get the original\r\n\r\n\t\t\tthis.merges.anonymous.forEach(_merge => {\r\n\t\t\t\tvar merge: Commit = _merge.source\r\n\t\t\t\tvar child = this;\r\n\r\n\t\t\t\twhile (child != null && child.branch == null) {\r\n\t\t\t\t\tchild = child.directchild;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* this is only an anonymous branch head, if there is only one child (the merge)\r\n\t\t\t\t TODO: if there are multiple, it might result in wrongly assigned branches */\r\n\t\t\t\tif (child != null && merge.branch == null) {\r\n\t\t\t\t\tmerge.branch = new Branch(child.branch.ref + \"/anonymous\" + merge.sha + Math.random(), merge, child.branch.specifity + 1);\r\n\t\t\t\t\tmerge.branch.anonymous = true;\r\n\t\t\t\t\tmerge.branch.parent = child.branch;\r\n\t\t\t\t\tmerge.branch.start = child;\r\n\t\t\t\t\tmerge.branch.category = child.branch.category;\r\n\r\n\t\t\t\t\tthis.container.headsMap[merge.branch.ref] = merge.branch;\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic getColor(lightness: number): string {\r\n\t\t\tif (this.branch == null) {\r\n\t\t\t\tthis.warn(\"No Branch set\")\r\n\t\t\t} else {\r\n\t\t\t\tvar b = this.branch;\r\n\t\t\t\tif (this.branch.anonymous) {\r\n\t\t\t\t\tb = this.branch.parent;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar hue = b.lane * 300 / this.container.maxX;\r\n\t\t\t\treturn \"hsl(\" + hue + \", 100%, \" + lightness + \"%)\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic hasMerges(): boolean {\r\n\t\t\treturn this.merges.standard.length > 0 || this.merges.anonymous.length > 0;\r\n\t\t}\r\n\r\n\t\tpublic getX() {\r\n\t\t\treturn Gitline.indexToX(this.getLane());\r\n\t\t}\r\n\r\n\t\tpublic getY() {\r\n\t\t\tif (this.outOfScope) {\r\n\t\t\t\treturn this.container.rootLabel.offsetTop + 20;\r\n\t\t\t}\r\n\t\t\treturn this.view.label.offsetTop - this.container.firstCommit.view.label.offsetTop + this.view.label.offsetHeight / 2;\r\n\t\t}\r\n\r\n\t\tpublic getOriginIndexY(): number {\r\n\t\t\tif (this.branch.origin != undefined) {\r\n\t\t\t\treturn this.branch.origin.getIndexY();\r\n\t\t\t} else if (this.branch.start.outOfScope) {\r\n\t\t\t\treturn this.container.maxIndexY;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.branch.start.indexY;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\r\n\t\t/** Tip plus the next direct child index (position of last merge) */\r\n\t\tpublic getTipPlusIndexY(): number {\r\n\t\t\tif(this.branch != undefined && this.branch.commit != undefined) {\r\n\t\t\t\tvar indexY = this.branch.commit.indexY;\r\n\t\t\t\t\r\n\t\t\t\t// find the top child \r\n\t\t\t\tthis.branch.commit.childs.forEach(c => {\r\n\t\t\t\t\tindexY = Math.min(indexY, c.indexY);\t\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treturn indexY;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// nothing found, assume top\r\n\t\t\treturn 0;\r\n\t\t}\t\t\r\n\r\n\t\t/** does this branch intersect with another when drawn next to each other. \r\n\t\t    can this branch be displayed on the same X axis without overlapping? */\r\n\t\tpublic intersects(other: Commit): boolean {\r\n\t\t\tvar otherY = 9999999, thisY = 999999;\r\n\t\t\tif (this.outOfScope || other.outOfScope) return true;\r\n\r\n\t\t\treturn this.getOriginIndexY() > other.getTipPlusIndexY() && this.getTipPlusIndexY() < other.getOriginIndexY();\r\n\t\t}\r\n\r\n\t\tpublic getIndexY(): number {\r\n\t\t\treturn this.indexY;\r\n\t\t}\r\n\r\n\t\tpublic warn(warning: string) {\r\n\t\t\tthis.warnings.push(warning);\r\n\t\t\tthis.debug(warning);\r\n\t\t}\r\n\r\n\t\tpublic debug(warning: string) {\r\n\t\t\tif (console) {\r\n\t\t\t\tLogger.debug(warning, this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic getLane() {\r\n\t\t\tif (this.branch != null) { // TODO: anonymous branches will get their index from parent ones\r\n\t\t\t\treturn this.branch.commit.branch.lane;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"Commit.ts\"/>\r\n\r\nmodule Gitline {\r\n\texport class Branch {\r\n\t\tpublic specifity: number;\r\n\t\tpublic start: Commit;\r\n\t\tpublic origin: Commit;\r\n\t\tpublic category: string;\r\n\t\tpublic commit: Commit; // Head commit\r\n\t\tpublic ref: string; // Name of the branch\r\n\t\tpublic shortname: string; // name without repo\r\n\t\tpublic lane: number;\r\n\t\tpublic parent: Branch;\r\n\t\tpublic anonymous: boolean;\r\n\r\n\r\n\t\tconstructor(refname: string, commit: Commit, specifity: number) {\r\n\t\t\tthis.ref = refname;\r\n\t\t\tthis.commit = commit;\r\n\t\t\tthis.specifity = specifity;\r\n\t\t\tthis.shortname = refname.split(\"@\")[0];\r\n\t\t\tthis.category = this.shortname.substring(0, this.shortname.lastIndexOf(\"/\"));\r\n\t\t}\r\n\t}\r\n}"],"sourceRoot":"/source/"}