{"version":3,"sources":["AsyncLoader.ts","Config.ts","CommitProvider.ts","Expandable.ts","plugins/LocalGit2JsonProvider.ts","plugins/GithubCommitProvider.ts","Main.ts","rendering/Shape.ts","rendering/BaseLink.ts","rendering/Curve.ts","rendering/Straight.ts","rendering/Creation.ts","rendering/Dot.ts","CommitView.ts","Commit.ts","Branch.ts"],"names":[],"mappings":"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","file":"gitline.js","sourcesContent":["module Gitline {\r\n\tclass AsyncLoadingItem {\r\n\t\tpublic label: string;\r\n\t\tpublic data: any;\r\n\t\tpublic callback: Function;\r\n\t\tpublic index: number;\r\n\t\tpublic of: number;\r\n\r\n\t\tconstructor(label: string, data: any, callback: Function, index: number, of: number) {\r\n\t\t\tthis.label = label;\r\n\t\t\tthis.data = data;\r\n\t\t\tthis.callback = callback;\r\n\t\t\tthis.index = index;\r\n\t\t\tthis.of = of;\r\n\t\t}\r\n\t}\r\n\r\n\texport class AsyncLoader {\r\n\r\n\t\tprivate element: HTMLElement;\r\n\t\tprivate items: AsyncLoadingItem[] = [];\r\n\t\tprivate suspended: boolean = false;\r\n\r\n\t\tconstructor(element: HTMLElement) {\r\n\t\t\tthis.element = element;\r\n\t\t}\r\n\r\n\t\t/** do this async, display the label and the data */\r\n\t\tpublic then(label: string, datacallback: Function, callback: Function): AsyncLoader {\r\n\t\t\tthis.thenSingle(label, () => {\r\n\t\t\t\t// add it to the beginning of the queue\r\n\t\t\t\tvar data: any[] = datacallback();\r\n\t\t\t\tfor (var i = data.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tthis.items.unshift(new AsyncLoadingItem(label, data[i], callback, i, data.length));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic thenSingle(label: string, callback: Function): AsyncLoader {\r\n\t\t\tthis.items.push(new AsyncLoadingItem(label, null, callback, 0, 1));\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic start(shield: boolean = true) {\r\n\t\t\tif (shield) {\r\n\t\t\t\tthis.element.hidden = false;\r\n\t\t\t}\r\n\t\t\tthis.next();\r\n\t\t}\r\n\r\n\t\tpublic next() {\r\n\t\t\tvar nextItem: AsyncLoadingItem = this.items.shift();\r\n\t\t\tif (nextItem !== undefined) {\r\n\t\t\t\t// avoid yielding control unnecessarily, but limit stack depth at the same time\r\n\t\t\t\tif ((nextItem.index % 50) === 0) {\r\n\t\t\t\t\tthis.showStatus(nextItem);\r\n\t\t\t\t\twindow.setTimeout(() => {\r\n\t\t\t\t\t\tLogger.debug(\"executing \" + nextItem.label + \" (\" + nextItem.index + \"/\" + nextItem.of + \")\");\r\n\t\t\t\t\t\tthis.execute(nextItem);\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.execute(nextItem);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.hidden = true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic suspend() {\r\n\t\t\tthis.suspended = true;\r\n\t\t}\r\n\r\n\t\tpublic resume() {\r\n\t\t\tthis.suspended = false;\r\n\t\t\tthis.next();\r\n\t\t}\r\n\r\n\t\tpublic showStatus(item: AsyncLoadingItem) {\r\n\t\t\tthis.element.innerHTML = item.label; // + \" (\"+item.index + \"/\"+item.of+\")\";\r\n\t\t}\r\n\r\n\t\tpublic execute(item: AsyncLoadingItem) {\r\n\t\t\ttry {\r\n\t\t\t\titem.callback(item.data);\r\n\t\t\t\tif (!this.suspended) {\r\n\t\t\t\t\tthis.next();\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tthis.error(e);\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tpublic error(e: any) {\r\n\t\t\tLogger.error(e);\r\n\t\t\tthis.element.innerHTML = e;\r\n\t\t\tthis.suspend();\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"typedefs/cryptojs.d.ts\"/>\n\ndeclare var jsgl: any;\ndeclare var Logger: any;\n\nmodule Gitline {\n\texport function indexToX(index: number): number {\n\t\treturn index * 20 + 12;\n\t}\n\n\texport class Config {\n\t\tpublic dotHeight = 6;\n\t\tpublic dotWidth = 8;\n\n\t\tpublic remoteOnly: boolean = false;\n\n\t\tprivate avatar_gravatar(email) {\n\t\t\treturn \"http://www.gravatar.com/avatar/\" + CryptoJS.MD5(email.toLowerCase()) + \"?s=20&d=mm\";\n\t\t}\n\n\t\tpublic avatars: Function[] = [this.avatar_gravatar];\n\t}\n}","module Gitline {\r\n\texport class CommitProvider {\r\n\t\tprivate url;\r\n\t\tprivate callback: Function;\r\n\t\tprivate errorCallback: Function;\r\n\r\n\t\tconstructor(url: string) {\r\n\t\t\tthis.url = url;\r\n\t\t}\r\n\r\n\t\tpublic whenDone(data: any) {\r\n\t\t\tthis.callback(data);\r\n\t\t}\r\n\r\n\t\tpublic withErrorCallback(callbackFn: Function) {\r\n\t\t\tthis.errorCallback = callbackFn;\r\n\t\t}\r\n\r\n\t\tpublic withCallback(callbackFn: Function) {\r\n\t\t\tthis.callback = callbackFn;\r\n\t\t}\r\n\r\n\t\t/** this method should be overwritten. it must call whenDone(data) when all data was loaded. */\r\n\t\tpublic onRequested(url: string) {\r\n\t\t\tthrow new Error(\"onRequested not implemented on \" + this);\r\n\t\t}\r\n\r\n\t\tpublic request() {\r\n\t\t\tthis.onRequested(this.url);\r\n\t\t}\r\n\r\n\t\tpublic error(e: any) {\r\n\t\t\tthis.errorCallback(e);\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"typedefs/jquery.d.ts\"/>\r\n\r\nmodule Gitline {\r\n\texport interface HTMLExpandableElement extends HTMLElement {\r\n\t\twhenShort(innerHTML: string): void;\r\n\t\twhenFull(innerHTML: string): void;\r\n\t}\r\n\r\n\t/**\r\n\t * Elements with two contents, that expand on double click\r\n\t */\r\n\texport class Expandable {\r\n\t\tpublic static extend(element: HTMLElement): HTMLExpandableElement {\r\n\t\t\tvar extended: HTMLExpandableElement = <HTMLExpandableElement> element;\r\n\t\t\telement.classList.add(\"gitline-expandable\");\r\n\r\n\t\t\textended.whenFull = (innerHTML: string) => {\r\n\t\t\t\textended.onclick = () => {\r\n\t\t\t\t\textended.innerHTML = innerHTML;\r\n\t\t\t\t\t$(extended).hide().stop().fadeIn(\"fast\");\r\n\t\t\t\t\telement.classList.add(\"gitline-expandable-expanded\");\r\n\t\t\t\t\tExpandable.selectElementText(element);\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\t\t\textended.whenShort = (innerHTML: string) => {\r\n\t\t\t\textended.innerHTML = innerHTML;\r\n\t\t\t\textended.onmouseout = () => {\r\n\t\t\t\t\t// Delay hiding it\r\n\t\t\t\t\twindow.setTimeout (() => {\r\n\t\t\t\t\t\textended.innerHTML = innerHTML;\r\n\t\t\t\t\t\telement.classList.remove(\"gitline-expandable-expanded\");\r\n\t\t\t\t\t}, 1000);\r\n\t\t\t\t};\r\n\t\t\t};\r\n\r\n\t\t\treturn extended;\r\n\t\t}\r\n\r\n\t\t// x-browser text select\r\n\t\t// http://stackoverflow.com/questions/985272/selecting-text-in-an-element-akin-to-highlighting-with-your-mouse\r\n\t\tprivate static selectElementText(el: HTMLElement): void {\r\n\t\t\tvar doc = window.document, sel, range;\r\n\t\t\tif (window.getSelection && doc.createRange) {\r\n\t\t\t\tsel = window.getSelection();\r\n\t\t\t\trange = doc.createRange();\r\n\t\t\t\trange.selectNodeContents(el);\r\n\t\t\t\tsel.removeAllRanges();\r\n\t\t\t\tsel.addRange(range);\r\n\t\t\t} else if ((<any> doc.body).createTextRange) {\r\n\t\t\t\trange = (<any> doc.body).createTextRange();\r\n\t\t\t\trange.moveToElementText(el);\r\n\t\t\t\trange.select();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"../CommitProvider.ts\"/>\r\n///<reference path=\"../Main.ts\"/>\r\n///<reference path=\"../typedefs/jquery.d.ts\"/>\r\n\r\nmodule Gitline.Plugin {\r\n\texport class LocalGit2JsonProvider extends Gitline.CommitProvider {\r\n\r\n\t\tpublic onRequested(url: string) {\r\n\t\t\tvar xhr = jQuery.getJSON(url, {});\r\n\r\n\t\t\txhr.done((json) => {\r\n\t\t\t\tthis.whenDone(json);\r\n\t\t\t});\r\n\r\n\t\t\txhr.fail(() => {\r\n\t\t\t\tthis.error(\"Error loading git data from \" + url + \" create it using git2json\");\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"../CommitProvider.ts\"/>\r\n///<reference path=\"../typedefs/jquery.d.ts\"/>\r\n///<reference path=\"../typedefs/moment-node.d.ts\"/>\r\n///<reference path=\"../typedefs/moment.d.ts\"/>\r\n\r\ndeclare var Logger: any;\r\n\r\nmodule Gitline.Plugin.Github {\r\n\texport interface Branch {\r\n\t\tname: string;\r\n\t\trepo: string;\r\n\t\tassigned: boolean;\r\n\t\tcommit: Commit;\r\n\t}\r\n\r\n\texport interface Fork {\r\n\t\turl: string;\r\n\t\tname: string;\r\n\t\tdata: any;\r\n\t\tfull_name: string;\r\n\t}\r\n\r\n\texport interface Commit {\r\n\t\tsha: string;\r\n\t}\r\n}\r\n\r\nmodule Gitline.Plugin {\r\n\timport Github = Gitline.Plugin.Github;\r\n\r\n\t/**\r\n\t * GitHub commit provider. only works if there is and accesstoken configured in the browser\r\n\t */\r\n\texport class GithubCommitProvider extends Gitline.CommitProvider {\r\n\r\n\t\tprivate forks: Github.Fork[] = [];\r\n\t\tprivate baseBranches: Github.Branch[] = [];\r\n\t\tprivate data: {} = {};\r\n\r\n\t\tprivate limit: number;\r\n\t\tprivate accessToken: string;\r\n\r\n\t\tpublic constructor(url: string, limit: number, accessToken: string) {\r\n\t\t\tsuper(url);\r\n\t\t\tthis.accessToken = accessToken;\r\n\t\t\tthis.limit = limit;\r\n\t\t}\r\n\r\n\t\tpublic gitURL(url: string, api: string, params: string = \"\") {\r\n\r\n\t\t\t// convert to api url and remove trailing /\r\n\t\t\tif (url.indexOf(\"api.github.com\") == -1) {\r\n\t\t\t\turl = url.replace(/.*github.com/, \"https://api.github.com/repos/\").replace(/\\/\\//g, \"/\");\r\n\r\n\t\t\t}\r\n\t\t\treturn url + \"/\" + api + \"?access_token=\" + this.accessToken + \"&per_page=\" + this.limit + \"&callback=?&\" + params;\r\n\t\t}\r\n\r\n\t\tpublic onRequested(url: string) {\r\n\t\t\tthis.loadForks(url);\r\n\t\t}\r\n\r\n\t\tpublic loadForks(url: string) {\r\n\t\t\tjQuery.getJSON(this.gitURL(url, \"forks\")).done((forks) => {\r\n\t\t\t\tif (forks.data.message !== undefined) {\r\n\t\t\t\t\tthis.error(\"Github API: \" + forks.data.message);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tjQuery.getJSON(this.gitURL(url, \"branches\")).done((branches) => {\r\n\t\t\t\t\tthis.processBranches(url, branches.data);\r\n\t\t\t\t\tthis.forks = forks.data;\r\n\r\n\t\t\t\t\tthis.loadBranches();\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic processBranches(fork, data: Github.Branch[]) {\r\n\t\t\tdata.forEach(branch => {\r\n\t\t\t\tbranch.repo = fork.url !== undefined ? fork.url : fork;\r\n\t\t\t\tif (fork.full_name !== undefined) {\r\n\t\t\t\t\tbranch.name = branch.name + \"@\" + fork.full_name;\r\n\t\t\t\t}\r\n\t\t\t\tthis.baseBranches.push(branch);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic loadBranches() {\r\n\t\t\tvar forkRequests = this.forks.map(fork => {\r\n\t\t\t\treturn jQuery.getJSON(this.gitURL(fork.url, \"branches\"), data => {\r\n\t\t\t\t\tLogger.debug(\"loaded branches for \" + fork.name);\r\n\t\t\t\t\tthis.processBranches(fork, data.data);\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t\t\tjQuery.when.apply(jQuery, forkRequests).done(() => {\r\n\t\t\t\tLogger.debug(\"all branches loaded\");\r\n\t\t\t\tthis.loadCommits();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic loadCommits() {\r\n\t\t\tvar commitRequests = [];\r\n\t\t\tthis.baseBranches.forEach(b => {\r\n\t\t\t\tvar commit = this.data[b.commit.sha];\r\n\t\t\t\tif (commit == undefined) {\r\n\t\t\t\t\tcommitRequests.push(\r\n\t\t\t\t\t\tjQuery.getJSON(this.gitURL(b.repo, \"commits\", \"sha=\" + b.commit.sha), data => {\r\n\t\t\t\t\t\t\tLogger.debug(\"loaded commits for \" + b.name);\r\n\t\t\t\t\t\t\tthis.processCommits(data.data);\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tjQuery.when.apply(jQuery, commitRequests).done(() => {\r\n\t\t\t\tthis.process();\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic processCommits(data) {\r\n\t\t\tdata.map(data => {\r\n\t\t\t\tvar c: any = {};\r\n\t\t\t\tc.sha = data.sha;\r\n\t\t\t\tc.ssha = data.sha.substring(0, 8);\r\n\t\t\t\tc.parenthashes = (<any[]> data.parents).map(x => {\r\n\t\t\t\t\treturn x.sha\r\n\t\t\t\t});\r\n\t\t\t\tc.authorname = data.commit.author.name;\r\n\t\t\t\tc.authoremail = data.commit.author.email;\r\n\t\t\t\tc.authordate = moment(data.commit.author.date).unix();\r\n\t\t\t\tc.authortimestamp = moment(data.commit.author.date).valueOf();\r\n\r\n\t\t\t\tc.committername = data.commit.committer.name;\r\n\t\t\t\tc.committeremail = data.commit.committer.email;\r\n\t\t\t\tc.committerdate = moment(data.commit.committer.date).unix();\r\n\t\t\t\tc.committertimestamp = moment(data.commit.committer.date).valueOf();\r\n\r\n\t\t\t\tc.subject = data.commit.message;\r\n\t\t\t\tc.body = \"\"; // Todo: where to get this?\r\n\t\t\t\tc.refnames = []; // set when parsing branches\r\n\t\t\t\tc.inHeads = []; // set when parsing branches\r\n\r\n\t\t\t\treturn c;\r\n\t\t\t}).forEach(commit => {\r\n\t\t\t\tthis.data[commit.sha] = commit;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic process() {\r\n\t\t\tthis.baseBranches.forEach(b => {\r\n\t\t\t\tvar commit = this.data[b.commit.sha];\r\n\t\t\t\tif (commit == undefined) {\r\n\t\t\t\t\t// commit missing for branch - TODO: fetch it\r\n\t\t\t\t} else {\r\n\t\t\t\t\tb.assigned = true;\r\n\t\t\t\t\tcommit.refnames.push(b.name);\r\n\t\t\t\t\tthis.assignHeads(commit);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Sort\r\n\t\t\tvar newdata = {};\r\n\t\t\tObject.keys(this.data).sort((a, b) => {\r\n\t\t\t\treturn this.data[b].committertimestamp - this.data[a].committertimestamp;\r\n\t\t\t}).forEach(sha => {\r\n\t\t\t\tnewdata[sha] = this.data[sha];\r\n\t\t\t});\r\n\r\n\r\n\t\t\tthis.whenDone(newdata);\r\n\t\t}\r\n\r\n\t\tprivate assignHeads(commit) {\r\n\t\t\tcommit.parents1 = commit.parenthashes.map(x => {\r\n\t\t\t\treturn x\r\n\t\t\t}); // copy array\r\n\r\n\t\t\twhile (commit.parents1.length > 0) {\r\n\t\t\t\tvar newParents = [];\r\n\t\t\t\tcommit.parents1.forEach(parentHash => {\r\n\t\t\t\t\tvar p = this.data[parentHash];\r\n\t\t\t\t\tif (p != undefined) {\r\n\t\t\t\t\t\tp.inHeads.push(commit.sha);\r\n\t\t\t\t\t\t// add all grandparents to the newparents\r\n\t\t\t\t\t\tp.parenthashes.forEach(h => {\r\n\t\t\t\t\t\t\tif (newParents.indexOf(h) === -1) {\r\n\t\t\t\t\t\t\t\tnewParents.push(h);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tcommit.parents1 = newParents\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","///<reference path=\"Commit.ts\"/>\r\n///<reference path=\"AsyncLoader.ts\"/>\r\n///<reference path=\"Config.ts\"/>\r\n///<reference path=\"CommitProvider.ts\"/>\r\n///<reference path=\"Branch.ts\"/>\r\n///<reference path=\"Expandable.ts\"/>\r\n///<reference path=\"typedefs/jquery.d.ts\"/>\r\n///<reference path=\"plugins/LocalGit2JsonProvider.ts\"/>\r\n///<reference path=\"plugins/GithubCommitProvider.ts\"/>\r\n///<reference path=\"typedefs/moment-node.d.ts\"/>\r\n///<reference path=\"typedefs/moment.d.ts\"/>\r\n\r\nmodule Gitline {\r\n\r\n\tinterface Commits {\r\n\t\t[key:string]:Commit;\r\n\t}\r\n\r\n\tinterface Branches {\r\n\t\t[key:string]:Branch;\r\n\t}\r\n\r\n\texport function create(): Main {\r\n\t\treturn new Main();\r\n\t}\r\n\r\n\texport class Main {\r\n\r\n\t\tpublic maxX: number = 0;\r\n\t\tpublic maxIndexY: number = 0;\r\n\t\tpublic commits: Commits = {};\r\n\t\tpublic firstCommit: Commit;\r\n\t\tpublic canvas;\r\n\t\tpublic data;\r\n\t\tpublic panel;\r\n\t\tpublic textPanel;\r\n\t\tpublic headsMap: Branches = {};\r\n\t\tpublic rootLabel;\r\n\r\n\t\tpublic al: AsyncLoader;\r\n\r\n\t\tpublic config: Config = new Config();\r\n\r\n\t\t// HTML stuff\r\n\t\tprivate loadingPanel: HTMLElement;\r\n\t\tprivate graphicalPanel: HTMLElement;\r\n\t\tprivate headerPanel: HTMLElement;\r\n\t\tprivate contentPanel: HTMLElement;\r\n\r\n\t\tprivate commitProvider: CommitProvider;\r\n\r\n\t\tpublic addCommit(commit: Commit) {\r\n\t\t\tthis.commits[commit.getFullSha()] = commit;\r\n\r\n\t\t\t// first commit needed by rendering\r\n\t\t\tif (this.firstCommit === undefined) {\r\n\t\t\t\tthis.firstCommit = commit;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic addBranch(refname: string, commit: Commit, specifity: number) {\r\n\t\t\tthis.headsMap[refname] = new Branch(refname, commit, specifity);\r\n\t\t}\r\n\r\n\t\tpublic render() {\r\n\t\t\tthis.canvas = new jsgl.Panel(this.graphicalPanel);\r\n\r\n\t\t\tthis.al.thenSingle(\"Loading Data\", () => {\r\n\t\t\t\tthis.al.suspend();\r\n\t\t\t\tthis.commitProvider.withCallback((json) => {\r\n\t\t\t\t\tthis.data = json;\r\n\t\t\t\t\tthis.al.resume();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.commitProvider.withErrorCallback(error => {\r\n\t\t\t\t\tthis.al.error(error);\r\n\t\t\t\t});\r\n\t\t\t\tthis.commitProvider.request();\r\n\t\t\t}).then(\"Loading Commits\", () => {\r\n\t\t\t\treturn Object.keys(this.data)\r\n\t\t\t}, (sha) => {\r\n\t\t\t\tvar commit = new Commit(this, this.data[sha]);\r\n\t\t\t\tthis.addCommit(commit);\r\n\t\t\t})\r\n\t\t\t\t.thenSingle(\"Building Graph\", () => {\r\n\t\t\t\t\tthis.buildGraph();\r\n\t\t\t\t})\r\n\t\t\t\t.then(\"Drawing Labels\", () => {\r\n\t\t\t\t\treturn Object.keys(this.commits)\r\n\t\t\t\t}, (sha) => {\r\n\t\t\t\t\tvar commit = this.commits[sha];\r\n\t\t\t\t\tthis.drawCommit(commit);\r\n\t\t\t\t})\r\n\t\t\t\t.thenSingle(\"Creating Legend\", () => {\r\n\t\t\t\t\tthis.rootLabel = document.createElement('div');\r\n\t\t\t\t\tthis.rootLabel.className = \"commit-legend\";\r\n\t\t\t\t\tthis.textPanel.appendChild(this.rootLabel);\r\n\t\t\t\t})\r\n\t\t\t\t.then(\"Drawing Merges\", () => {\r\n\t\t\t\t\treturn Object.keys(this.commits)\r\n\t\t\t\t}, (sha) => {\r\n\t\t\t\t\tvar commit = this.commits[sha];\r\n\t\t\t\t\tthis.drawReferences(commit);\r\n\t\t\t\t})\r\n\t\t\t\t.thenSingle(\"Resizing\", () => {\r\n\t\t\t\t\tthis.graphicalPanel.style.width = indexToX(this.maxX + 1) + \"px\";\r\n\t\t\t\t\tthis.graphicalPanel.style.height = this.getHeight() + \"px\";\r\n\t\t\t\t}).start();\r\n\r\n\t\t\twindow.onresize = () => {\r\n\r\n\t\t\t\tthis.al.then(\"Redrawing\", () => {\r\n\t\t\t\t\treturn Object.keys(this.commits)\r\n\t\t\t\t}, (sha) => {\r\n\t\t\t\t\tvar commit: Commit = this.commits[sha];\r\n\t\t\t\t\tcommit.view.redraw();\r\n\t\t\t\t}).thenSingle(\"Resizing\", () => {\r\n\t\t\t\t\tthis.graphicalPanel.style.width = indexToX(this.maxX + 1) + \"px\";\r\n\t\t\t\t\tthis.graphicalPanel.style.height = this.getHeight() + \"px\";\r\n\t\t\t\t}).start(false);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tpublic getHeight() {\r\n\t\t\treturn this.rootLabel.offsetTop - this.firstCommit.view.label.offsetTop;\r\n\t\t}\r\n\r\n\t\tpublic buildGraph() {\r\n\t\t\tvar shas = Object.keys(this.commits);\r\n\t\t\tshas.forEach((sha) => {\r\n\t\t\t\tvar commit = this.commits[sha];\r\n\t\t\t\tcommit.initRelations();\r\n\t\t\t});\r\n\t\t\tshas.forEach((sha) => {\r\n\t\t\t\tvar commit = this.commits[sha];\r\n\r\n\t\t\t\tcommit.initHeadSpecifity();\r\n\t\t\t\tcommit.initMerges();\r\n\t\t\t});\r\n\t\t\tthis.initBranches();\r\n\t\t}\r\n\r\n\t\tpublic drawCommit(commit: Commit) {\r\n\t\t\t// Label\r\n\t\t\tcommit.view = new CommitView(this.canvas, this.config, commit);\r\n\r\n\t\t\tif (commit.outOfScope === false) {\r\n\t\t\t\tcommit.view.label = this.drawLabel(commit);\r\n\r\n\t\t\t\tcommit.view.label.onclick = function () {\r\n\t\t\t\t\tif (console) {\r\n\t\t\t\t\t\tLogger.debug(commit);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.textPanel.appendChild(commit.view.label);\r\n\t\t\t\tcommit.view.label.style['padding-left'] = Gitline.indexToX(this.maxX + 1) + \"px\"\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic drawReferences(commit: Commit) {\r\n\t\t\tcommit.view.addRelations();\r\n\t\t\tcommit.view.redraw();\r\n\t\t}\r\n\r\n\t\tpublic drawLabel(commit: Commit) {\r\n\t\t\tvar label = document.createElement('gitline-legend');\r\n\r\n\t\t\t// SHA Hash\r\n\t\t\tvar shortSha: string = commit.getShortSha().trim();\r\n\t\t\tvar fullSha: string = commit.getFullSha().trim();\r\n\t\t\tvar sha: HTMLExpandableElement = Expandable.extend(document.createElement(\"gitline-sha\"));\r\n\t\t\tsha.setAttribute(\"title\", fullSha);\r\n\t\t\tsha.whenShort(shortSha);\r\n\t\t\tsha.whenFull(fullSha);\r\n\r\n\t\t\tlabel.appendChild(sha);\r\n\r\n\t\t\t// Author and committer\r\n\t\t\tlabel.appendChild(this.drawIdentity(\"author\", commit.author));\r\n\r\n\t\t\tif (commit.author.email != commit.committer.email) {\r\n\t\t\t\tlabel.appendChild(this.drawIdentity(\"committer\", commit.committer));\r\n\t\t\t}\r\n\r\n\t\t\t// Branch - TODO: Tags and other branches\r\n\t\t\tif (commit.branch && commit.branch.commit === commit && !commit.branch.anonymous) {\r\n\t\t\t\tvar head: HTMLExpandableElement = Expandable.extend(document.createElement(\"gitline-ref\"));\r\n\t\t\t\thead.style.backgroundColor = commit.getColor(40);\r\n\t\t\t\thead.whenShort(commit.branch.ref);\r\n\t\t\t\thead.whenFull(commit.branch.ref);\r\n\r\n\t\t\t\tlabel.appendChild(head);\r\n\t\t\t}\r\n\r\n\t\t\t// Subject\r\n\t\t\tvar subject = document.createElement(\"gitline-subject\");\r\n\t\t\tsubject.innerHTML = commit.subject;\r\n\t\t\tif (commit.hasMerges()) {\r\n\t\t\t\tsubject.classList.add(\"has-merges\");\r\n\t\t\t}\r\n\t\t\tlabel.appendChild(subject);\r\n\r\n\t\t\treturn label;\r\n\t\t}\r\n\r\n\t\tprivate drawIdentity(type: string, id: Identity): HTMLElement {\r\n\t\t\tvar container: HTMLElement = document.createElement(\"gitline-identity-container\");\r\n\r\n\t\t\tvar identity: HTMLExpandableElement = Expandable.extend(document.createElement(\"gitline-identity\"));\r\n\t\t\tidentity.classList.add(type);\r\n\t\t\tvar fullname = id.name + \" &lt;\" + id.email.toLowerCase() + \"&gt;\";\r\n\t\t\tidentity.setAttribute(\"title\", id.name + \" <\" + id.email.toLowerCase() + \">\");\r\n\t\t\tidentity.style.background = this.config.avatars.map(f => {\r\n\t\t\t\treturn \"url(\" + f(id.email) + \") no-repeat left center\"\r\n\t\t\t}).join(\", \");\r\n\t\t\tidentity.whenFull(fullname);\r\n\t\t\tidentity.whenShort(\"\");\r\n\r\n\t\t\tvar datetime: HTMLExpandableElement = Expandable.extend(document.createElement(\"gitline-identity-datetime\"));\r\n\t\t\tdatetime.classList.add(type + \"-datetime\");\r\n\t\t\tvar fullDate = id.date.format(\"YYYY-MM-DD HH:mm\");\r\n\t\t\tdatetime.setAttribute(\"title\", fullDate);\r\n\t\t\tdatetime.whenFull(fullDate);\r\n\t\t\tdatetime.whenShort(id.date.format(\"HH:mm\"));\r\n\r\n\t\t\tcontainer.appendChild(identity);\r\n\t\t\tcontainer.appendChild(datetime);\r\n\r\n\t\t\treturn container;\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t Based on the specifity assign the branches to the commits. if in doubt the commit will be on the most specific branch\r\n\t\t */\r\n\t\tpublic initBranches() {\r\n\r\n\t\t\tvar heads = Object.keys(this.headsMap);\r\n\r\n\t\t\t/* set the index to the head object */\r\n\t\t\tfor (var i = 0; i < heads.length; i++) {\r\n\t\t\t\tvar headName = heads[i];\r\n\t\t\t\tvar head = this.headsMap[headName];\r\n\t\t\t\thead.commit.initDefaultBranch();\r\n\t\t\t}\r\n\r\n\t\t\t/* Sort the branches by specifity */\r\n\t\t\tvar self = this;\r\n\t\t\theads.sort(function (l, r) {\r\n\t\t\t\tvar lHead: Commit = self.headsMap[l].commit;\r\n\t\t\t\tvar rHead: Commit = self.headsMap[r].commit;\r\n\r\n\t\t\t\tif (lHead === rHead) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (lHead.branch.category === rHead.branch.category) {\r\n\t\t\t\t\treturn lHead.branch.specifity - rHead.branch.specifity;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn lHead.branch.category.length - rHead.branch.category.length;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/* set the index to the head object */\r\n\t\t\tvar maxLane = 0;\r\n\t\t\tfor (var i = 0; i < heads.length; i++) {\r\n\t\t\t\tvar headName = heads[i];\r\n\t\t\t\tvar head = this.headsMap[headName];\r\n\t\t\t\tvar tip: Commit = head.commit;\r\n\r\n\t\t\t\tif (tip.branch === head) {\r\n\t\t\t\t\thead.lane = maxLane;\r\n\t\t\t\t\t//head.index = maxLane;\r\n\t\t\t\t\tmaxLane++;\r\n\r\n\t\t\t\t\t// Can we display this head a little more to the left?\r\n\t\t\t\t\tfor (var l = 0; l < heads.length; l++) {\r\n\r\n\t\t\t\t\t\tvar canUseLane: boolean = true;\r\n\t\t\t\t\t\tfor (var j = 0; j < heads.length; j++) {\r\n\t\t\t\t\t\t\tvar jheadName = heads[j];\r\n\t\t\t\t\t\t\tvar headOnLane: Commit = this.headsMap[jheadName].commit;\r\n\r\n\t\t\t\t\t\t\tif (headOnLane === undefined ||\r\n\t\t\t\t\t\t\t\theadOnLane.branch != head &&\r\n\t\t\t\t\t\t\t\theadOnLane.branch.lane === l &&\r\n\t\t\t\t\t\t\t\t(tip.intersects(headOnLane) || tip.branch.category != headOnLane.branch.category)) {\r\n\t\t\t\t\t\t\t\tcanUseLane = false;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (canUseLane) {\r\n\r\n\t\t\t\t\t\t\tLogger.debug(\"NO INTERSECTS: \", tip.branch.ref, \" - \", headOnLane.branch.ref);\r\n\t\t\t\t\t\t\thead.lane = l;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.maxX = Math.max(this.maxX, head.lane);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Launching\r\n\t\tpublic fromJSON(jsonFile: string): Main {\r\n\t\t\treturn this.fromProvider(new Plugin.LocalGit2JsonProvider(jsonFile));\r\n\t\t}\r\n\r\n\t\tpublic fromProvider(commitProvider: CommitProvider): Main {\r\n\t\t\tthis.commitProvider = commitProvider;\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tprivate renderTo(panel: HTMLElement): Main {\r\n\t\t\tif (this.headerPanel !== undefined) {\r\n\t\t\t\tpanel.appendChild(this.headerPanel);\r\n\t\t\t}\r\n\t\t\tpanel.appendChild(this.loadingPanel = document.createElement(\"gitline-loadingpanel\"));\r\n\t\t\tpanel.appendChild(this.contentPanel = document.createElement(\"gitline-contentpanel\"));\r\n\t\t\tthis.contentPanel.appendChild(this.graphicalPanel = document.createElement(\"gitline-graphicalpanel\"));\r\n\t\t\tthis.contentPanel.appendChild(this.textPanel = document.createElement(\"gitline-textpanel\"));\r\n\t\t\tthis.al = new AsyncLoader(this.loadingPanel);\r\n\r\n\t\t\tthis.render();\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic withHeader(header: string): Main;\r\n\t\tpublic withHeader(header: HTMLElement): Main;\r\n\r\n\t\tpublic withHeader(header: any) {\r\n\t\t\tif (typeof header === \"string\") {\r\n\t\t\t\tthis.headerPanel = document.createElement(\"gitline-headerpanel\");\r\n\t\t\t\tthis.headerPanel.innerHTML = header;\r\n\t\t\t} else {\r\n\t\t\t\tthis.headerPanel = header;\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n}","module Gitline.Rendering {\r\n\r\n\t/**\r\n\t * basic support for jsgl shapes\r\n\t */\r\n\texport class Shape {\r\n\t\tprotected element: any; // jsgl element\r\n\t\tprivate renderedTo: HTMLElement; // jsgl canvas (any html)\r\n\t\tprotected canvas: any;\r\n\t\tprivate dependencies: Shape[] = [];\r\n\r\n\t\tpublic constructor(canvas: any, element: any) {\r\n\t\t\tthis.canvas = canvas;\r\n\t\t\tthis.element = element;\r\n\t\t}\r\n\r\n\t\tpublic addIfMissing() {\r\n\t\t\tif (this.element !== undefined && this.renderedTo == null) {\r\n\t\t\t\tthis.addElements();\r\n\t\t\t\tthis.renderedTo = this.canvas;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic addElements() {\r\n\t\t\tthis.canvas.addElement(this.element);\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tthis.dependencies.forEach(dep => {\r\n\t\t\t\tdep.update();\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tpublic dependsOn(on: Shape) {\r\n\t\t\ton.dependencies.push(this);\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"Shape.ts\"/>\r\n\r\nmodule Gitline.Rendering {\r\n\r\n\t/**\r\n\t * Shape that links two dots\r\n\t */\r\n\texport class BaseLink extends Shape {\r\n\r\n\t\tparentDot: Dot;\r\n\t\tchildDot: Dot;\r\n\r\n\t\tlineColor: string;\r\n\r\n\t\tconstructor(canvas: any, element: any) {\r\n\t\t\tsuper(canvas, element);\r\n\t\t}\r\n\r\n\t\tpublic from(from: Dot): BaseLink {\r\n\t\t\tthis.dependsOn(from);\r\n\t\t\tthis.parentDot = from;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic to(to: Dot): BaseLink {\r\n\t\t\t//this.dependsOn(to);\r\n\t\t\tthis.childDot = to;\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic color(lineColor: string): BaseLink {\r\n\t\t\tthis.element.getStroke().setWeight(1);\r\n\t\t\tthis.element.getStroke().setColor(lineColor);\r\n\t\t\tthis.lineColor = lineColor;\r\n\t\t\tthis.addIfMissing();\r\n\t\t\treturn this;\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"BaseLink.ts\"/>\r\n\r\ndeclare var jsgl: any;\r\n\r\nmodule Gitline.Rendering {\r\n\texport class Curve extends BaseLink {\r\n\r\n\t\tprivate arrow;\r\n\r\n\t\tconstructor(canvas: any) {\r\n\t\t\tsuper(canvas, canvas.createCurve());\r\n\t\t\tthis.arrow = this.canvas.createPolygon();\r\n\t\t}\r\n\r\n\t\tpublic addElements() {\r\n\t\t\tsuper.addElements();\r\n\r\n\t\t\t// 2nd element\r\n\t\t\tthis.canvas.addElement(this.arrow);\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tvar x: number = this.childDot.x;\r\n\t\t\tvar y: number = this.childDot.y;\r\n\t\t\tvar parentX: number = this.parentDot.x;\r\n\t\t\tvar parentY: number = this.parentDot.y;\r\n\t\t\tvar color: string = this.lineColor;\r\n\r\n\t\t\tvar direction = x < parentX ? 1 : -1;\r\n\r\n\t\t\tthis.element.setStartPointXY(parentX, parentY - this.parentDot.height / 2)\r\n\t\t\tthis.element.setEndPointXY(x + this.childDot.width / 2 * direction, y);\r\n\t\t\tthis.element.setControl2PointXY(parentX, y);\r\n\t\t\tthis.element.setControl1PointXY(parentX, y);\r\n\r\n\t\t\tthis.element.getStroke().setWeight(1);\r\n\t\t\tthis.element.getStroke().setColor(color);\r\n\r\n\r\n\t\t\tthis.arrow.getStroke().setWeight(0);\r\n\t\t\tthis.arrow.getFill().setColor(color);\r\n\r\n\t\t\tthis.arrow.clearPoints();\r\n\t\t\tthis.arrow.addPointXY(0, 0);\r\n\t\t\tthis.arrow.addPointXY(6, -4);\r\n\t\t\tthis.arrow.addPointXY(6, 4);\r\n\r\n\t\t\t// Move\r\n\t\t\tfor (var i = 0; i < this.arrow.getPointsCount(); i++) {\r\n\t\t\t\tvar px = this.arrow.getPointAt(i).X;\r\n\t\t\t\tvar py = this.arrow.getPointAt(i).Y;\r\n\t\t\t\t//this.arrow.setPointXYAt(px, py + y, i);\r\n\t\t\t\tthis.arrow.setPointXYAt(px * direction + x + this.childDot.width / 2 * direction, py + y, i);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"BaseLink.ts\"/>\r\n\r\nmodule Gitline.Rendering {\r\n\texport class Straight extends BaseLink {\r\n\r\n\t\tconstructor(canvas: any) {\r\n\t\t\tsuper(canvas, canvas.createLine());\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tsuper.update();\r\n\t\t\tthis.element.setStartPointXY(this.parentDot.x, this.parentDot.y - this.parentDot.height / 2);\r\n\t\t\tthis.element.setEndPointXY(this.childDot.x, this.childDot.y + this.childDot.height / 2);\r\n\t\t}\r\n\r\n}\r\n}","///<reference path=\"BaseLink.ts\"/>\r\n\r\ndeclare var jsgl: any;\r\n\r\nmodule Gitline.Rendering {\r\n\texport class Creation extends BaseLink {\r\n\r\n\t\tsecondLine;\r\n\r\n\t\tconstructor(canvas: any) {\r\n\t\t\tsuper(canvas, canvas.createLine());\r\n\t\t\tthis.secondLine = canvas.createLine();\r\n\t\t}\r\n\r\n\t\tpublic addElements() {\r\n\t\t\tsuper.addElements();\r\n\r\n\t\t\t// 2nd element\r\n\t\t\tthis.canvas.addElement(this.secondLine); // TODO: add later?\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tsuper.update();\r\n\r\n\t\t\t// Horizontal dotted line\r\n\t\t\tif (this.parentDot.x < this.childDot.x) {\r\n\t\t\t\tthis.element.setStartPointXY(this.parentDot.x + this.parentDot.width / 2, this.parentDot.y)\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.setStartPointXY(this.parentDot.x - this.parentDot.width / 2, this.parentDot.y)\r\n\t\t\t}\r\n\r\n\t\t\tthis.element.setEndPointXY(this.childDot.x, this.parentDot.y);\r\n\t\t\tthis.element.getStroke().setWeight(1);\r\n\t\t\tthis.element.getStroke().setDashStyle(jsgl.DashStyles.DASH);\r\n\t\t\tthis.element.getStroke().setColor(this.lineColor);\r\n\r\n\t\t\t// Vertical line\r\n\t\t\tthis.secondLine.setStartPointXY(this.childDot.x, this.parentDot.y)\r\n\t\t\tthis.secondLine.setEndPointXY(this.childDot.x, this.childDot.y + this.childDot.height / 2);\r\n\t\t\tthis.secondLine.getStroke().setWeight(1)\r\n\t\t\tthis.secondLine.getStroke().setColor(this.lineColor);\r\n\t\t}\r\n\t}\r\n}","/// <reference path=\"Shape.ts\"/>\r\n\r\nmodule Gitline.Rendering {\r\n\texport class Dot extends Shape {\r\n\r\n\t\tx: number;\r\n\t\ty: number;\r\n\t\twidth: number;\r\n\t\theight: number;\r\n\r\n\t\tconstructor(canvas: any) {\r\n\t\t\tsuper(canvas, canvas.createRectangle());\r\n\t\t}\r\n\r\n\t\tpublic size(width: number, height: number): Dot {\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.element.setWidth(width);\r\n\t\t\tthis.element.setHeight(height);\r\n\t\t\tthis.element.setXRadius(width / 4);\r\n\t\t\tthis.element.setYRadius(width / 4);\r\n\r\n\t\t\tthis.update();\r\n\t\t\tthis.addIfMissing();\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic at(x: number, y: number): Dot {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\r\n\t\t\tthis.update();\r\n\t\t\tthis.addIfMissing();\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic color(strokeColor: string, fillColor: string): Dot {\r\n\t\t\tthis.element.getStroke().setWeight(1);\r\n\t\t\tthis.element.getStroke().setColor(strokeColor);\r\n\t\t\tthis.element.getFill().setColor(fillColor);\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tpublic update() {\r\n\t\t\tthis.element.setLocationXY(this.x - this.width / 2, this.y - this.height / 2);\r\n\t\t\tsuper.update();\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"rendering/Curve.ts\"/>\r\n///<reference path=\"rendering/Straight.ts\"/>\r\n///<reference path=\"rendering/Creation.ts\"/>\r\n///<reference path=\"rendering/Dot.ts\"/>\r\n///<reference path=\"Config.ts\"/>\r\n///<reference path=\"Commit.ts\"/>\r\n///<reference path=\"rendering/Shape.ts\"/>\r\n\r\nmodule Gitline {\r\n\r\n\t/**\r\n\t * View of the Commit\r\n\t */\r\n\texport class CommitView {\r\n\r\n\t\tpublic commit: Commit;\r\n\t\tpublic label: HTMLElement;\r\n\t\tpublic canvas: any; // jsgl\r\n\t\tpublic config: Config;\r\n\r\n\t\tpublic dot: Rendering.Dot;\r\n\t\tpublic lines: Rendering.Shape[] = [];\r\n\r\n\t\tconstructor(canvas, config: Config, commit: Commit) {\r\n\t\t\tthis.canvas = canvas;\r\n\t\t\tthis.config = config;\r\n\t\t\tthis.commit = commit;\r\n\r\n\t\t\tthis.dot = new Rendering.Dot(this.canvas);\r\n\t\t}\r\n\r\n\t\tpublic addRelations() {\r\n\r\n\t\t\t// Direct parent\r\n\t\t\tif (this.commit.directparent != null) {\r\n\t\t\t\tvar dpl: Rendering.Shape;\r\n\t\t\t\tif (this.commit.getLane() == this.commit.directparent.getLane() || this.commit.directparent.outOfScope) {\r\n\t\t\t\t\t// direct parent is the same X/lane, this means it is a standard forward commit\r\n\t\t\t\t\tdpl = new Rendering.Straight(this.canvas).from(this.commit.directparent.view.dot).to(this.dot).color(this.commit.getColor(20));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// direct parent is on a different lane, this is most certainly a new branch\r\n\t\t\t\t\tdpl = new Rendering.Creation(this.canvas).from(this.commit.directparent.view.dot).to(this.dot).color(this.commit.getColor(30));\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.lines.push(dpl);\r\n\t\t\t}\r\n\r\n\t\t\tvar allmerges = this.commit.merges.standard.concat(this.commit.merges.anonymous);\r\n\t\t\tallmerges.forEach(merge => {\r\n\t\t\t\tthis.lines.push(\r\n\t\t\t\t\tnew Rendering.Curve(this.canvas)\r\n\t\t\t\t\t\t.from(merge.source.view.dot)\r\n\t\t\t\t\t\t.to(this.dot)\r\n\t\t\t\t\t\t.color(merge.source.getColor(35)))\r\n\t\t\t\t;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t/** calculate the positions based on model and update the shapes */\r\n\t\tpublic redraw() {\r\n\t\t\tthis.dot\r\n\t\t\t\t.at(this.commit.getX(), this.commit.getY())\r\n\t\t\t\t.size(this.config.dotWidth, this.config.dotHeight)\r\n\t\t\t\t.color(this.commit.getColor(20), this.commit.getColor(80));\r\n\t\t}\r\n\r\n\r\n\t}\r\n}","///<reference path=\"Main.ts\"/>\r\n///<reference path=\"CommitView.ts\"/>\r\n///<reference path=\"Branch.ts\"/>\r\n///<reference path=\"typedefs/moment-node.d.ts\"/>\r\n///<reference path=\"typedefs/moment.d.ts\"/>\r\n\r\nmodule Gitline {\r\n\r\n\t/** committer or author */\r\n\texport class Identity {\r\n\t\tpublic image: string; // optional\r\n\r\n\t\tpublic constructor(public name: string, public email: string, public date: moment.Moment) {\r\n\t\t}\r\n\t}\r\n\r\n\texport class Commit {\r\n\t\tprivate container: Gitline.Main;\r\n\r\n\t\tprivate warnings: any[] = [];\r\n\t\tprivate inHeadsRef: Commit[] = [];\r\n\t\tprivate parents: Commit[] = [];\r\n\t\tprivate childs: Commit[] = [];\r\n\t\tprivate siblings: Commit[] = [];\r\n\t\tpublic outOfScope: boolean = false; // This commit was not part of the logs scope, but is referenced by another commit.\r\n\t\tpublic merges = {standard: [], anonymous: []};\r\n\t\tprivate sha: string;\r\n\t\tprivate ssha: string; // Abbreviated hash\r\n\t\tpublic subject: string;\r\n\t\tprivate data: any;\r\n\t\tprivate indexY: number;\r\n\r\n\t\tprivate maxSpecifity: number;\r\n\t\tpublic branch: Branch;\r\n\t\tpublic directparent: Commit;\r\n\t\tpublic directchild: Commit;\r\n\r\n\t\tpublic view: CommitView;\r\n\r\n\t\tpublic committer: Identity;\r\n\t\tpublic author: Identity;\r\n\r\n\t\tconstructor(container: Gitline.Main, data) {\r\n\t\t\tthis.container = container;\r\n\t\t\tthis.data = data;\r\n\r\n\t\t\t// reference the data back to the object\r\n\t\t\tthis.data.obj = this;\r\n\r\n\t\t\tif (data.inHeads == null) data.inHeads = [];\r\n\t\t\tif (data.parenthashes == null) data.parenthashes = [];\r\n\t\t\tif (data.refnames == null) data.refnames = [];\r\n\r\n\t\t\tthis.sha = data.sha;\r\n\t\t\tthis.ssha = data.ssha;\r\n\t\t\tthis.subject = data.subject;\r\n\t\t\tthis.indexY = container.maxIndexY++;\r\n\r\n\t\t\tthis.committer = new Identity(this.data.committername, this.data.committeremail, moment.unix(this.data.committerdate));\r\n\t\t\tthis.author = new Identity(this.data.authorname, this.data.authoremail, moment.unix(this.data.authordate));\r\n\t\t}\r\n\r\n\t\tpublic getShortSha(): string {\r\n\t\t\treturn this.ssha;\r\n\t\t}\r\n\r\n\t\tpublic getFullSha(): string {\r\n\t\t\treturn this.sha;\r\n\t\t}\r\n\r\n\t\tpublic initRelations() {\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tthis.data.parenthashes.forEach(hash => {\r\n\t\t\t\tvar parentCommit = this.container.commits[hash];\r\n\r\n\t\t\t\t// Create a virtual commit\r\n\t\t\t\tif (parentCommit == null) {\r\n\t\t\t\t\tparentCommit = new Commit(this.container, {sha: hash + Math.random()});\r\n\t\t\t\t\tparentCommit.outOfScope = true;\r\n\t\t\t\t\tself.container.addCommit(parentCommit);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.parents.push(parentCommit);\r\n\t\t\t\tparentCommit.childs.push(this);\r\n\t\t\t\tthis.siblings = parentCommit.childs; // this will be overwitten as new childs are found\r\n\r\n\t\t\t\tif (this.parents.length > 0) {\r\n\t\t\t\t\tvar dp = this.parents[0];\r\n\t\t\t\t\tthis.directparent = dp;\r\n\t\t\t\t\tdp.directchild = this;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.data.inHeads.forEach(headsha => {\r\n\t\t\t\tvar commit = this.container.commits[headsha];\r\n\t\t\t\tif (this.inHeadsRef.indexOf(commit) === undefined) {\r\n\t\t\t\t\tthis.inHeadsRef.push(commit)\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t}\r\n\r\n\t\tpublic initDefaultBranch() {\r\n\t\t\tvar commit: Commit = this;\r\n\r\n\t\t\twhile (commit != null) {\r\n\r\n\t\t\t\t// GUESSING: The correct branch is usually the one with the least specific name\r\n\t\t\t\tif (commit.branch == null || commit.branch.specifity > this.branch.specifity) {\r\n\t\t\t\t\tcommit.branch = this.branch;\r\n\t\t\t\t\t//commit.debug(\"assigning \"+this.branch.ref)\r\n\t\t\t\t}\r\n\t\t\t\tcommit.branch.start = commit; // this function will traverse the parents, so the last one will be the first commit\r\n\t\t\t\tcommit.branch.origin = commit.directparent; // this could be null -> it is outside of the history.\r\n\t\t\t\tcommit = commit.directparent;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic initHeadSpecifity() {\r\n\t\t\tfor (var i = 0; i < this.data.refnames.length; i++) {\r\n\t\t\t\tvar refname = this.data.refnames[i];\r\n\r\n\t\t\t\tif (!this.container.config.remoteOnly || refname.indexOf(\"origin/\") == 0) {\r\n\r\n\t\t\t\t\tif (this.container.config.remoteOnly) {\r\n\t\t\t\t\t\trefname = refname.replace(/^origin./, '');\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar specifity = refname.replace(/[^\\/-]/g, '').length * 1000;\r\n\t\t\t\t\tspecifity += refname.replace(/[^a-zA-Z0-9-]/, '').length;\r\n\r\n\t\t\t\t\tthis.container.addBranch(refname, this, specifity);\r\n\r\n\t\t\t\t\t/* assign the most specific head on this tip commit */\r\n\t\t\t\t\tif (this.maxSpecifity == null || specifity < this.maxSpecifity) {\r\n\t\t\t\t\t\tLogger.debug(\"assigning branch\", refname, this.sha, this.maxSpecifity, specifity)\r\n\t\t\t\t\t\tthis.maxSpecifity = specifity;\r\n\t\t\t\t\t\tthis.branch = this.container.headsMap[refname];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.initDefaultBranch();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic initMerges() {\r\n\r\n\t\t\tthis.merges = {standard: [], anonymous: []};\r\n\t\t\tthis.warnings = [];\r\n\r\n\t\t\t// Detect a merge (octopus currently not supported)\r\n\r\n\t\t\tif (this.parents.length == 1) {\r\n\t\t\t\tvar dp = this.parents[0];\r\n\t\t\t\tthis.directparent = dp;\r\n\t\t\t\tdp.directchild = this;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.parents.length >= 2) {\r\n\t\t\t\tvar dp = this.parents[0];\r\n\t\t\t\tthis.directparent = dp;\r\n\t\t\t\tdp.directchild = this;\r\n\r\n\t\t\t\tfor (var i = 1; i < this.parents.length; i++) {\r\n\t\t\t\t\tvar mp = this.parents[i];\r\n\r\n\t\t\t\t\tif (mp != null) {\r\n\r\n\t\t\t\t\t\t// Clues if this is a standard or anonymous merge\r\n\t\t\t\t\t\tif (mp.data.refnames.length > 0 // This is standard merge with mps head\r\n\t\t\t\t\t\t\t|| mp.inHeadsRef.length != dp.inHeadsRef.length // The heads of both are different\r\n\t\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\t\tthis.merges.standard.push({source: mp});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// This is a anonymous (automatic) merge on the same branch\r\n\t\t\t\t\t\t\tthis.merges.anonymous.push({source: mp})\r\n\t\t\t\t\t\t\tthis.initAnonymous();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic initAnonymous() {\r\n\t\t\t// Create a dummy branch for anonymous merges, which is as specific as the original branch.\r\n\t\t\t// try finding the original branch by going up direct childs, which will get the original\r\n\r\n\t\t\tthis.merges.anonymous.forEach(_merge => {\r\n\t\t\t\tvar merge: Commit = _merge.source\r\n\t\t\t\tvar child = this;\r\n\r\n\t\t\t\twhile (child != null && child.branch == null) {\r\n\t\t\t\t\tchild = child.directchild;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/* this is only an anonymous branch head, if there is only one child (the merge)\r\n\t\t\t\t TODO: if there are multiple, it might result in wrongly assigned branches */\r\n\t\t\t\tif (child != null && merge.branch == null) {\r\n\t\t\t\t\tmerge.branch = new Branch(child.branch.ref + \"/anonymous\" + merge.sha + Math.random(), merge, child.branch.specifity + 1);\r\n\t\t\t\t\tmerge.branch.anonymous = true;\r\n\t\t\t\t\tmerge.branch.parent = child.branch;\r\n\t\t\t\t\tmerge.branch.start = child;\r\n\t\t\t\t\tmerge.branch.category = child.branch.category;\r\n\r\n\t\t\t\t\tthis.container.headsMap[merge.branch.ref] = merge.branch;\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tpublic getColor(lightness: number): string {\r\n\t\t\tif (this.branch == null) {\r\n\t\t\t\tthis.warn(\"No Branch set\")\r\n\t\t\t} else {\r\n\t\t\t\tvar b = this.branch;\r\n\t\t\t\tif (this.branch.anonymous) {\r\n\t\t\t\t\tb = this.branch.parent;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar hue = b.lane * 300 / this.container.maxX;\r\n\t\t\t\treturn \"hsl(\" + hue + \", 100%, \" + lightness + \"%)\";\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic hasMerges(): boolean {\r\n\t\t\treturn this.merges.standard.length > 0 || this.merges.anonymous.length > 0;\r\n\t\t}\r\n\r\n\t\tpublic getX() {\r\n\t\t\treturn Gitline.indexToX(this.getLane());\r\n\t\t}\r\n\r\n\t\tpublic getY() {\r\n\t\t\tif (this.outOfScope) {\r\n\t\t\t\treturn this.container.rootLabel.offsetTop + 20;\r\n\t\t\t}\r\n\t\t\treturn this.view.label.offsetTop - this.container.firstCommit.view.label.offsetTop + this.view.label.offsetHeight / 2;\r\n\t\t}\r\n\r\n\t\tpublic getOriginIndexY(): number {\r\n\t\t\tif (this.branch.origin != undefined) {\r\n\t\t\t\treturn this.branch.origin.getIndexY();\r\n\t\t\t} else if (this.branch.start.outOfScope) {\r\n\t\t\t\treturn this.container.maxIndexY;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.branch.start.indexY;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t\r\n\t\t/** Tip plus the next direct child index (position of last merge) */\r\n\t\tpublic getTipPlusIndexY(): number {\r\n\t\t\tif(this.branch != undefined && this.branch.commit != undefined) {\r\n\t\t\t\tvar indexY = this.branch.commit.indexY;\r\n\t\t\t\t\r\n\t\t\t\t// find the top child \r\n\t\t\t\tthis.branch.commit.childs.forEach(c => {\r\n\t\t\t\t\tindexY = Math.min(indexY, c.indexY);\t\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treturn indexY;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// nothing found, assume top\r\n\t\t\treturn 0;\r\n\t\t}\t\t\r\n\r\n\t\t/** does this branch intersect with another when drawn next to each other. \r\n\t\t    can this branch be displayed on the same X axis without overlapping? */\r\n\t\tpublic intersects(other: Commit): boolean {\r\n\t\t\tvar otherY = 9999999, thisY = 999999;\r\n\t\t\tif (this.outOfScope || other.outOfScope) return true;\r\n\r\n\t\t\treturn this.getOriginIndexY() > other.getTipPlusIndexY() && this.getTipPlusIndexY() < other.getOriginIndexY();\r\n\t\t}\r\n\r\n\t\tpublic getIndexY(): number {\r\n\t\t\treturn this.indexY;\r\n\t\t}\r\n\r\n\t\tpublic warn(warning: string) {\r\n\t\t\tthis.warnings.push(warning);\r\n\t\t\tthis.debug(warning);\r\n\t\t}\r\n\r\n\t\tpublic debug(warning: string) {\r\n\t\t\tif (console) {\r\n\t\t\t\tLogger.debug(warning, this);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic getLane() {\r\n\t\t\tif (this.branch != null) { // TODO: anonymous branches will get their index from parent ones\r\n\t\t\t\treturn this.branch.commit.branch.lane;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n}","///<reference path=\"Commit.ts\"/>\r\n\r\nmodule Gitline {\r\n\texport class Branch {\r\n\t\tpublic specifity: number;\r\n\t\tpublic start: Commit;\r\n\t\tpublic origin: Commit;\r\n\t\tpublic category: string;\r\n\t\tpublic commit: Commit; // Head commit\r\n\t\tpublic ref: string; // Name of the branch\r\n\t\tpublic shortname: string; // name without repo\r\n\t\tpublic lane: number;\r\n\t\tpublic parent: Branch;\r\n\t\tpublic anonymous: boolean;\r\n\r\n\r\n\t\tconstructor(refname: string, commit: Commit, specifity: number) {\r\n\t\t\tthis.ref = refname;\r\n\t\t\tthis.commit = commit;\r\n\t\t\tthis.specifity = specifity;\r\n\t\t\tthis.shortname = refname.split(\"@\")[0];\r\n\t\t\tthis.category = this.shortname.substring(0, this.shortname.lastIndexOf(\"/\"));\r\n\t\t}\r\n\t}\r\n}"],"sourceRoot":"/source/"}